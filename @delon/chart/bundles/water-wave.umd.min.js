/**
 * @license ng-alain(cipchk@qq.com) v2.0.1
 * (c) 2018 Cipchk https://ng-alain.com/
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("rxjs/operators"),require("@angular/common"),require("@angular/core"),require("@delon/util")):"function"==typeof define&&define.amd?define("@delon/chart/water-wave",["exports","rxjs","rxjs/operators","@angular/common","@angular/core","@delon/util"],t):t((e.delon=e.delon||{},e.delon.chart=e.delon.chart||{},e.delon.chart["water-wave"]={}),e.rxjs,e.rxjs.operators,e.ng.common,e.ng.core,e.delon.util)}(this,function(e,t,n,r,i,o){"use strict";function a(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,n,a):i(t,n))||a);return 3<o&&a&&Object.defineProperty(t,n,a),a}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function c(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}var h=function(){function e(e,t,n,r){this.el=e,this.renderer=t,this.cdr=n,this.zone=r,this._title="",this.color="#1890FF",this.height=160,this.resize$=null,this.initFlag=!1}return Object.defineProperty(e.prototype,"title",{set:function(e){e instanceof i.TemplateRef?(this._title=null,this._titleTpl=e):this._title=e},enumerable:!0,configurable:!0}),e.prototype.renderChart=function(){var t=this.percent/100;if(t){this.node.nativeElement.innerHTML="";var n=this,e=this.node.nativeElement,c=e.getContext("2d"),r=e.width,h=e.height,u=r/2,i=2,p=u-i;c.beginPath(),c.lineWidth=2*i;for(var d=r-i,f=d/8,o=.2,g=o,v=i,y=0,m=0,a=.005,s=[],w=u-i,l=-Math.PI/2,b=!0,C=l;C<l+2*Math.PI;C+=1/(8*Math.PI))s.push([u+w*Math.cos(C),u+w*Math.sin(C)]);var R=s.shift();c.strokeStyle=this.color,c.moveTo(R[0],R[1]),function x(){if(c.clearRect(0,0,r,h),b)if(s.length){var e=s.shift();c.lineTo(e[0],e[1]),c.stroke()}else b=!1,c.lineTo(R[0],R[1]),c.stroke(),s=null,c.globalCompositeOperation="destination-over",c.beginPath(),c.lineWidth=i,c.arc(u,u,w,0,2*Math.PI,!0),c.beginPath(),c.save(),c.arc(u,u,3*(u-i),0,2*Math.PI,!0),c.restore(),c.clip(),c.fillStyle="#1890FF";else.85<=t?o/4<g&&(g-=.01*o):t<=.1?g<1.5*o&&(g+=.01*o):(g<=o&&(g+=.01*o),o<=g&&(g-=.01*o)),0<t-m&&(m+=a),t-m<0&&(m-=a),y+=.07,function l(){c.beginPath(),c.save();for(var e=[],t=v;t<=v+d;t+=20/d){var n=y+(v+t)/f,r=Math.sin(n)*g,i=t,o=2*p*(1-m)+(u-p)-f*r;c.lineTo(i,o),e.push([i,o])}var a=e.shift();c.lineTo(v+d,h),c.lineTo(v,h),c.lineTo(a[0],a[1]);var s=c.createLinearGradient(0,0,0,h);s.addColorStop(0,"#ffffff"),s.addColorStop(1,"#1890FF"),c.fillStyle=s,c.fill(),c.restore()}();n.timer=requestAnimationFrame(x)}()}},e.prototype.updateRadio=function(e){this.renderer.setStyle(this.el.nativeElement,"transform","scale("+e+")")},e.prototype.installResizeEvent=function(){var e=this;this.resize$||(this.resize$=t.fromEvent(window,"resize").pipe(n.debounceTime(500)).subscribe(function(){return e.resize()}))},e.prototype.resize=function(){var e=this.el.nativeElement.parentNode.offsetWidth;this.updateRadio(e<this.height?e/this.height:1),this.renderChart()},e.prototype.ngOnInit=function(){var e=this;this.initFlag=!0,this.cdr.detectChanges(),this.zone.runOutsideAngular(function(){e.updateRadio(1),e.installResizeEvent(),setTimeout(function(){return e.resize()},130)})},e.prototype.ngOnChanges=function(){var e=this;this.initFlag&&(this.cdr.detectChanges(),this.zone.runOutsideAngular(function(){return e.renderChart()}))},e.prototype.ngOnDestroy=function(){this.timer&&cancelAnimationFrame(this.timer),this.resize$&&this.resize$.unsubscribe()},e.decorators=[{type:i.Component,args:[{selector:"g2-water-wave",template:'<div [ngStyle]="{\'height.px\': height, \'width.px\': height, \'overflow\': \'hidden\'}">\n  <canvas #container class="g2-water-wave__canvas" width="{{height*2}}" height="{{height*2}}"></canvas>\n</div>\n<div class="g2-water-wave__desc" [ngStyle]="{\'width.px\': height}">\n  <span *ngIf="title" class="g2-water-wave__desc-title">\n    <ng-container *stringTemplateOutlet="title">{{title}}</ng-container>\n  </span>\n  <h4 class="g2-water-wave__desc-percent">{{percent}}%</h4>\n</div>\n',host:{"[class.g2-water-wave]":"true"},changeDetection:i.ChangeDetectionStrategy.OnPush}]}],e.ctorParameters=function(){return[{type:i.ElementRef},{type:i.Renderer2},{type:i.ChangeDetectorRef},{type:i.NgZone}]},e.propDecorators={title:[{type:i.Input}],color:[{type:i.Input}],height:[{type:i.Input}],percent:[{type:i.Input}],node:[{type:i.ViewChild,args:["container"]}]},a([o.InputNumber(),s("design:type",Object)],e.prototype,"height",void 0),a([o.InputNumber(),s("design:type",Number)],e.prototype,"percent",void 0),e}(),u=[h],p=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[r.CommonModule,o.DelonUtilModule],declarations:c(u),exports:c(u)}]}],e}();e.G2WaterWaveComponent=h,e.G2WaterWaveModule=p,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=water-wave.umd.min.js.map