{"version":3,"file":"radar.js.map","sources":["ng://@delon/chart/radar/radar.component.ts","ng://@delon/chart/radar/radar.module.ts"],"sourcesContent":["import {\r\n  Component,\r\n  Input,\r\n  HostBinding,\r\n  ViewChild,\r\n  ElementRef,\r\n  OnDestroy,\r\n  OnChanges,\r\n  NgZone,\r\n  TemplateRef,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n} from '@angular/core';\r\nimport { toNumber, toBoolean } from '@delon/util';\r\n\r\ndeclare var G2: any;\r\n\r\n@Component({\r\n  selector: 'g2-radar',\r\n  templateUrl: './radar.component.html',\r\n  host: { '[class.g2-radar]': 'true' },\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  preserveWhitespaces: false,\r\n})\r\nexport class G2RadarComponent implements OnDestroy, OnChanges {\r\n  // #region fields\r\n\r\n  _title = '';\r\n  _titleTpl: TemplateRef<any>;\r\n  @Input()\r\n  set title(value: string | TemplateRef<any>) {\r\n    if (value instanceof TemplateRef) {\r\n      this._title = null;\r\n      this._titleTpl = value;\r\n    } else this._title = value;\r\n  }\r\n\r\n  @HostBinding('style.height.px')\r\n  @Input()\r\n  get height() {\r\n    return this._height;\r\n  }\r\n  set height(value: any) {\r\n    this._height = toNumber(value);\r\n  }\r\n  private _height = 0;\r\n\r\n  @Input()\r\n  padding: number[] = [44, 30, 16, 30];\r\n\r\n  @Input()\r\n  get hasLegend() {\r\n    return this._hasLegend;\r\n  }\r\n  set hasLegend(value: any) {\r\n    this._hasLegend = toBoolean(value);\r\n  }\r\n  private _hasLegend = true;\r\n\r\n  @Input()\r\n  set tickCount(value: any) {\r\n    this._tickCount = toNumber(value);\r\n  }\r\n  private _tickCount = 4;\r\n\r\n  @Input()\r\n  data: Array<{\r\n    name: string;\r\n    label: string;\r\n    value: number;\r\n    [key: string]: any;\r\n  }> = [];\r\n\r\n  @Input() colors = [\r\n    '#1890FF',\r\n    '#FACC14',\r\n    '#2FC25B',\r\n    '#8543E0',\r\n    '#F04864',\r\n    '#13C2C2',\r\n    '#fa8c16',\r\n    '#a0d911',\r\n  ];\r\n\r\n  // #endregion\r\n\r\n  @ViewChild('container')\r\n  private node: ElementRef;\r\n\r\n  private chart: any;\r\n  legendData: any[] = [];\r\n\r\n  constructor(private cd: ChangeDetectorRef, private zone: NgZone) {}\r\n\r\n  _click(i: number) {\r\n    this.legendData[i].checked = !this.legendData[i].checked;\r\n\r\n    if (this.chart) {\r\n      // const filterItem = this.legendData.filter(l => l.checked).map(l => l.name);\r\n      this.chart.filter(\r\n        'name',\r\n        (val: any) => this.legendData.find(w => w.name === val).checked,\r\n      );\r\n      this.chart.repaint();\r\n    }\r\n  }\r\n\r\n  private runInstall() {\r\n    this.zone.runOutsideAngular(() => setTimeout(() => this.install()));\r\n  }\r\n\r\n  private install() {\r\n    if (!this.data || (this.data && this.data.length < 1)) return;\r\n\r\n    this.uninstall();\r\n    this.node.nativeElement.innerHTML = '';\r\n\r\n    const chart = new G2.Chart({\r\n      container: this.node.nativeElement,\r\n      forceFit: true,\r\n      height: +this.height - (this.hasLegend ? 80 : 22),\r\n      padding: this.padding,\r\n    });\r\n    chart.source(this.data, {\r\n      value: {\r\n        min: 0,\r\n        tickCount: this._tickCount,\r\n      },\r\n    });\r\n\r\n    chart.coord('polar');\r\n    chart.legend(false);\r\n\r\n    chart.axis('label', {\r\n      line: null,\r\n      labelOffset: 8,\r\n      labels: {\r\n        label: {\r\n          fill: 'rgba(0, 0, 0, .65)',\r\n        },\r\n      },\r\n      grid: {\r\n        line: {\r\n          stroke: '#e9e9e9',\r\n          lineWidth: 1,\r\n          lineDash: [0, 0],\r\n        },\r\n      },\r\n    });\r\n\r\n    chart.axis('value', {\r\n      grid: {\r\n        type: 'polygon',\r\n        line: {\r\n          stroke: '#e9e9e9',\r\n          lineWidth: 1,\r\n          lineDash: [0, 0],\r\n        },\r\n      },\r\n      labels: {\r\n        label: {\r\n          fill: 'rgba(0, 0, 0, .65)',\r\n        },\r\n      },\r\n    });\r\n\r\n    chart\r\n      .line()\r\n      .position('label*value')\r\n      .color('name', this.colors);\r\n    chart\r\n      .point()\r\n      .position('label*value')\r\n      .color('name', this.colors)\r\n      .shape('circle')\r\n      .size(3);\r\n\r\n    chart.render();\r\n\r\n    this.chart = chart;\r\n\r\n    if (this.hasLegend) {\r\n      this.zone.run(() => {\r\n        this.legendData = chart\r\n          .getAllGeoms()[0]\r\n          ._attrs.dataArray.map((item: any) => {\r\n            const origin = item[0]._origin;\r\n            const result = {\r\n              name: origin.name,\r\n              color: item[0].color,\r\n              checked: true,\r\n              value: item.reduce((p, n) => p + n._origin.value, 0),\r\n            };\r\n\r\n            return result;\r\n          });\r\n        this.cd.detectChanges();\r\n      });\r\n    }\r\n  }\r\n\r\n  private uninstall() {\r\n    if (this.chart) {\r\n      this.chart.destroy();\r\n      this.chart = null;\r\n    }\r\n  }\r\n\r\n  ngOnChanges(): void {\r\n    this.runInstall();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.uninstall();\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgZorroAntdModule } from 'ng-zorro-antd';\r\nimport { DelonUtilModule } from '@delon/util';\r\n\r\nimport { G2RadarComponent } from './radar.component';\r\n\r\nconst COMPONENTS = [G2RadarComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule, DelonUtilModule, NgZorroAntdModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class G2RadarModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: G2RadarModule, providers: [] };\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}
