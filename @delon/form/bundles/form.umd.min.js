/**
 * @license ng-alain(cipchk@qq.com) v8.0.0-rc.0
 * (c) 2019 cipchk https://ng-alain.com/
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@delon/acl"),require("@delon/theme"),require("@delon/util"),require("rxjs"),require("rxjs/operators"),require("@angular/common"),require("@angular/forms"),require("ng-zorro-antd/auto-complete"),require("ng-zorro-antd/button"),require("ng-zorro-antd/card"),require("ng-zorro-antd/cascader"),require("ng-zorro-antd/checkbox"),require("ng-zorro-antd/date-picker"),require("ng-zorro-antd/form"),require("ng-zorro-antd/grid"),require("ng-zorro-antd/icon"),require("ng-zorro-antd/input"),require("ng-zorro-antd/input-number"),require("ng-zorro-antd/mention"),require("ng-zorro-antd/modal"),require("ng-zorro-antd/radio"),require("ng-zorro-antd/rate"),require("ng-zorro-antd/select"),require("ng-zorro-antd/slider"),require("ng-zorro-antd/switch"),require("ng-zorro-antd/tag"),require("ng-zorro-antd/time-picker"),require("ng-zorro-antd/tooltip"),require("ng-zorro-antd/transfer"),require("ng-zorro-antd/tree-select"),require("ng-zorro-antd/upload"),require("date-fns/format")):"function"==typeof define&&define.amd?define("@delon/form",["exports","@angular/core","@delon/acl","@delon/theme","@delon/util","rxjs","rxjs/operators","@angular/common","@angular/forms","ng-zorro-antd/auto-complete","ng-zorro-antd/button","ng-zorro-antd/card","ng-zorro-antd/cascader","ng-zorro-antd/checkbox","ng-zorro-antd/date-picker","ng-zorro-antd/form","ng-zorro-antd/grid","ng-zorro-antd/icon","ng-zorro-antd/input","ng-zorro-antd/input-number","ng-zorro-antd/mention","ng-zorro-antd/modal","ng-zorro-antd/radio","ng-zorro-antd/rate","ng-zorro-antd/select","ng-zorro-antd/slider","ng-zorro-antd/switch","ng-zorro-antd/tag","ng-zorro-antd/time-picker","ng-zorro-antd/tooltip","ng-zorro-antd/transfer","ng-zorro-antd/tree-select","ng-zorro-antd/upload","date-fns/format"],t):t(((e=e||self).delon=e.delon||{},e.delon.form={}),e.ng.core,e.delon.acl,e.delon.theme,e.delon.util,e.rxjs,e.rxjs.operators,e.ng.common,e.ng.forms,e["ng-zorro-antd/auto-complete"],e["ng-zorro-antd/button"],e["ng-zorro-antd/card"],e["ng-zorro-antd/cascader"],e["ng-zorro-antd/checkbox"],e["ng-zorro-antd/date-picker"],e["ng-zorro-antd/form"],e["ng-zorro-antd/grid"],e["ng-zorro-antd/icon"],e["ng-zorro-antd/input"],e["ng-zorro-antd/input-number"],e["ng-zorro-antd/mention"],e["ng-zorro-antd/modal"],e["ng-zorro-antd/radio"],e["ng-zorro-antd/rate"],e["ng-zorro-antd/select"],e["ng-zorro-antd/slider"],e["ng-zorro-antd/switch"],e["ng-zorro-antd/tag"],e["ng-zorro-antd/time-picker"],e["ng-zorro-antd/tooltip"],e["ng-zorro-antd/transfer"],e["ng-zorro-antd/tree-select"],e["ng-zorro-antd/upload"],e.format)}(this,function(e,t,n,r,i,o,a,s,l,u,p,c,h,d,f,m,g,y,z,b,v,w,C,_,x,S,V,O,E,P,D,I,M,T){"use strict";T=T&&T.hasOwnProperty("default")?T["default"]:T;var k=function(e,t){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function F(e,t){function n(){this.constructor=e}k(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var N=function(){return(N=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function A(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function j(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function L(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function W(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function $(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(W(arguments[t]));return e}var R=function(){function e(){this.ingoreKeywords=["type","enum"],this.liveValidate=!0,this.autocomplete=null,this.firstVisual=!1,this.onlyVisual=!1,this.errors={},this.button={submit_type:"primary",reset_type:"default"},this.uiDateStringFormat="YYYY-MM-DD HH:mm:ss",this.uiDateNumberFormat="x",this.uiTimeStringFormat="HH:mm:ss",this.uiTimeNumberFormat="x",this.uiEmailSuffixes=["qq.com","163.com","gmail.com","126.com","aliyun.com"]}return e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),q={"date-time":{widget:"date",showTime:!0,format:"YYYY-MM-DDTHH:mm:ssZ"},date:{widget:"date",format:"YYYY-MM-DD"},"full-date":{widget:"date",format:"YYYY-MM-DD"},time:{widget:"time"},"full-time":{widget:"time"},week:{widget:"date",mode:"week",format:"YYYY-WW"},month:{widget:"date",mode:"month",format:"YYYY-MM"},uri:{widget:"upload"},email:{widget:"autocomplete",type:"email"},color:{widget:"string",type:"color"},"":{widget:"string"}};function H(e){return null==e}function U(e,t){return null==(e=i.toBoolean(e,!0))?t:e}function B(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e.debug&&console.warn.apply(console,$(t))}function Y(e,t){if(void 0===t&&(t={}),e.hasOwnProperty("$ref")){var n=function(e,t){var n,r,i=/^#\/definitions\/(.*)$/.exec(e);if(i&&i[1]){var o=i[1].split("/"),a=t;try{for(var s=L(o),l=s.next();!l.done;l=s.next()){var u=l.value;if(u=u.replace(/~1/g,"/").replace(/~0/g,"~"),!a.hasOwnProperty(u))throw new Error("Could not find a definition for "+e+".");a=a[u]}}catch(p){n={error:p}}finally{try{l&&!l.done&&(r=s["return"])&&r.call(s)}finally{if(n)throw n.error}}return a}throw new Error("Could not find a definition for "+e+".")}(e.$ref,t),r=(e.$ref,function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["$ref"]));return Y(N({},n,r),t)}return e}function G(e,t){if(!e.hasOwnProperty("if")||!e.hasOwnProperty("then"))return null;if(!e["if"].properties)throw new Error("if: does not contain 'properties'");var n=Object.keys(e.properties),r=Object.keys(e["if"].properties);K(n,r),K(n,e.then.required),e.required=e.required.concat(e.then.required);var i=e.hasOwnProperty("else");i&&(K(n,e["else"].required),e.required=e.required.concat(e["else"].required));var o={},a={};return r.forEach(function(t){var n=e["if"].properties[t]["enum"];o[t]=n,i&&(a[t]=function(e){return!n.includes(e)})}),e.then.required.forEach(function(e){return t["$"+e].visibleIf=o}),i&&e["else"].required.forEach(function(e){return t["$"+e].visibleIf=a}),e}function K(e,t){t.forEach(function(t){if(!e.includes(t))throw new Error("if: properties does not contain '"+t+"'")})}function X(e,t,n){return H(e)||!Array.isArray(e)||0===e.length?[]:("object"!=typeof e[0]&&(e=e.map(function(e){return{label:e,value:e}})),t&&(Array.isArray(t)||(t=[t]),e.forEach(function(e){~t.indexOf(e.value)&&(e.checked=!0)})),n&&e.forEach(function(e){return e.disabled=!0}),e)}function Z(e,t,n){return X(i.deepCopy(e||[]),t,n)}function J(e,t,n,r){return"function"==typeof t.asyncData?t.asyncData(r).pipe(a.map(function(t){return X(t,n,e.readOnly)})):o.of(Z(e["enum"],n,e.readOnly))}var Q=function(){function e(e,t,n,r,i,a,s){this._options=s,this._errors=null,this._valueChanges=new o.BehaviorSubject(null),this._errorsChanges=new o.BehaviorSubject(null),this._visible=!0,this._visibilityChanges=new o.BehaviorSubject(!0),this._objErrors={},this._value=null,this.schema=t,this.ui=n,this.schemaValidator=e.createValidatorFn(t,{ingoreKeywords:this.ui.ingoreKeywords,debug:n.debug}),this.formData=r||t["default"],this._parent=i,i?this._root=i.root:this instanceof ee&&(this._root=this),this._path=a}return Object.defineProperty(e.prototype,"valueChanges",{get:function(){return this._valueChanges},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorsChanges",{get:function(){return this._errorsChanges},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.schema.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root||this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errors",{get:function(){return this._errors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return null===this._errors||0===this._errors.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),e.prototype.updateValueAndValidity=function(e,t,n){void 0===e&&(e=!1),void 0===t&&(t=!0),void 0===n&&(n=!0),this._updateValue(),t&&this.valueChanges.next(this.value),n&&!0===this.ui.liveValidate&&this._runValidation(),this.parent&&!e&&this.parent.updateValueAndValidity(e,t,!1)},e.prototype.searchProperty=function(e){var t=this,n=null,r=null;if("/"===e[0])r=(n=this.findRoot()).getProperty(e.substr(1));else for(;null===r&&null!==t.parent;)t=n=t.parent,r=n.getProperty(e);return r},e.prototype.findRoot=function(){for(var e=this;null!==e.parent;)e=e.parent;return e},e.prototype.isEmptyData=function(e){if(H(e))return!0;switch(this.type){case"string":return 0===(""+e).length}return!1},e.prototype._runValidation=function(){var e,t=this,n=this.isEmptyData(this._value);e=n&&this.ui._required?[{keyword:"required"}]:n?[]:this.schemaValidator(this._value)||[];var r=this.ui.validator;if("function"==typeof r){var i=r(this.value,this,this.findRoot());return i instanceof o.Observable?void i.subscribe(function(n){t.setCustomErrors(e,n),t.widget.detectChanges()}):void this.setCustomErrors(e,i)}this._errors=e,this.setErrors(this._errors)},e.prototype.setCustomErrors=function(e,t){null!=t&&t.length>0&&t.forEach(function(e){if(!e.message)throw new Error("The custom validator must contain a 'message' attribute to viewed error text");e._custom=!0}),this._errors=this.mergeErrors(e,t),this.setErrors(this._errors)},e.prototype.mergeErrors=function(e,t){return t&&(Array.isArray(t)?e=e.concat.apply(e,$(t)):e.push(t)),e},e.prototype.setErrors=function(e,t){var n=this;if(void 0===t&&(t=!0),t&&e&&!this.ui.onlyVisual){var r=this.widget&&this.widget.l.error||{};e=e.map(function(e){var t=!0===e._custom&&e.message?e.message:(n.ui.errors||{})[e.keyword]||n._options.errors[e.keyword]||r[e.keyword]||"";return t&&"function"==typeof t&&(t=t(e)),t&&(~t.indexOf("{")&&(t=t.replace(/{([\.a-z0-9]+)}/g,function(t,n){return e.params[n]||""})),e.message=t),e})}this._errors=e,this._errorsChanges.next(e),this._parent&&this._parent.setParentAndPlatErrors(e,this.path)},e.prototype.setParentAndPlatErrors=function(e,t){var n=this;this._objErrors[t]=e;var r=[];Object.keys(this._objErrors).forEach(function(e){var t=n.searchProperty(e);t&&!t.visible||r.push.apply(r,$(n._objErrors[e]))}),this.setErrors(r,!1)},e.prototype.setVisible=function(e){this._visible=e,this._visibilityChanges.next(e),this.resetValue(this.value,!0)},e.prototype._bindVisibility=function(){var e=this,t=this.ui.visibleIf;if("object"==typeof t&&0===Object.keys(t).length)this.setVisible(!1);else if(t!==undefined){var n=[],r=function(e){if(t.hasOwnProperty(e)){var r=i.searchProperty(e);if(r){var s=r.valueChanges.pipe(a.map(function(n){var r=t[e];return"function"==typeof r?r(n):-1!==r.indexOf("$ANY$")?n.length>0:-1!==r.indexOf(n)})),l=r._visibilityChanges,u=o.combineLatest(s,l).pipe(a.map(function(e){return e[0]&&e[1]}));n.push(u)}else console.warn("Can't find property "+e+" for visibility check of "+i.path)}},i=this;for(var s in t)r(s);o.combineLatest(n).pipe(a.map(function(e){return-1!==e.indexOf(!0)}),a.distinctUntilChanged()).subscribe(function(t){return e.setVisible(t)})}},e}(),ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.properties=null,t}return F(t,e),t.prototype.getProperty=function(e){var n=e.indexOf("/"),r=-1!==n?e.substr(0,n):e,i=this.properties[r];if(null!==i&&-1!==n&&i instanceof t){var o=e.substr(n+1);i=i.getProperty(o)}return i},t.prototype.forEachChild=function(e){for(var t in this.properties){if(this.properties.hasOwnProperty(t))e(this.properties[t],t)}},t.prototype.forEachChildRecursive=function(e){this.forEachChild(function(n){e(n),n instanceof t&&n.forEachChildRecursive(e)})},t.prototype._bindVisibility=function(){e.prototype._bindVisibility.call(this),this._bindVisibilityRecursive()},t.prototype._bindVisibilityRecursive=function(){this.forEachChildRecursive(function(e){e._bindVisibility()})},t.prototype.isRoot=function(){return this===this.root},t}(Q),te=function(e){function t(t,n,r,i,o,a,s,l){var u=e.call(this,n,r,i,o,a,s,l)||this;return u.formPropertyFactory=t,u.tick=1,u.properties=[],u}return F(t,e),t.prototype.getProperty=function(e){var t=e.indexOf("/"),n=+(-1!==t?e.substr(0,t):e),r=this.properties;if(isNaN(n)||n>=r.length)return undefined;var i=e.substr(t+1);return r[n].getProperty(i)},t.prototype.setValue=function(e,t){this.properties=[],this.clearErrors(),this.resetProperties(e),this.updateValueAndValidity(t,!0)},t.prototype.resetValue=function(e,t){this._value=e||this.schema["default"]||[],this.setValue(this._value,t)},t.prototype._hasValue=function(){return!0},t.prototype._updateValue=function(){var e=[];this.forEachChild(function(t){t.visible&&t._hasValue()&&e.push(N({},t.formData,t.value))}),this._value=e},t.prototype.addProperty=function(e){var t=this.formPropertyFactory.createProperty(this.schema.items,this.ui.$items,e,this);return this.properties.push(t),t},t.prototype.resetProperties=function(e){var t,n;try{for(var r=L(e),i=r.next();!i.done;i=r.next()){var o=i.value;this.addProperty(o).resetValue(o,!0)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(t)throw t.error}}},t.prototype.clearErrors=function(e){e?delete this._objErrors[e]:this._objErrors={}},t.prototype.add=function(e){var t=this.addProperty(e);return t.resetValue(e,!1),t},t.prototype.remove=function(e){var t=this.properties;this.clearErrors(t[e].path),t.splice(e,1),this.updateValueAndValidity(!1,!0)},t}(ee),ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return F(t,e),t.prototype.setValue=function(e,t){this._value=e,this.updateValueAndValidity(t,!0)},t.prototype.resetValue=function(e,t){null==e&&(e=this.schema["default"]!==undefined?this.schema["default"]:this.fallbackValue()),this._value=e,this.updateValueAndValidity(t,!0),this.widget&&this.widget.reset(e)},t.prototype._hasValue=function(){return this.fallbackValue()!==this.value},t.prototype._updateValue=function(){},t}(Q),re=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return F(t,e),t.prototype.fallbackValue=function(){return null},t}(ne),ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return F(t,e),t.prototype.fallbackValue=function(){return null},t.prototype.setValue=function(e,t){"string"==typeof e&&(e=e.length?e.indexOf(".")>-1?parseFloat(e):parseInt(e,10):undefined),this._value=e,this.updateValueAndValidity(t,!0)},t}(ne),oe=function(e){function t(t,n,r,i,o,a,s,l){var u=e.call(this,n,r,i,o,a,s,l)||this;return u.formPropertyFactory=t,u._propertiesId=[],u.createProperties(),u}return F(t,e),Object.defineProperty(t.prototype,"propertiesId",{get:function(){return this._propertiesId},enumerable:!0,configurable:!0}),t.prototype.createProperties=function(){var e,t=this;this.properties={},this._propertiesId=[];try{e=function(e,t){if(!Array.isArray(t))return e;var n=function(e){return e.reduce(function(e,t){return e[t]=!0,e},{})},r=function(e){return"property ["+e.join("', '")+"]"},i=n(e),o=n(t),a=t.filter(function(e){return"*"!==e&&!i[e]});if(a.length)throw new Error("ui schema order list contains extraneous "+r(a));var s=e.filter(function(e){return!o[e]}),l=t.indexOf("*");if(-1===l){if(s.length)throw new Error("ui schema order list does not contain "+r(s));return t}if(l!==t.lastIndexOf("*"))throw new Error("ui schema order list contains more than one wildcard item");var u=$(t);return u.splice.apply(u,$([l,1],s)),u}(Object.keys(this.schema.properties),this.ui.order)}catch(n){console.error("Invalid "+(this.schema.title||"root")+" object field configuration:",n)}e.forEach(function(e){t.properties[e]=t.formPropertyFactory.createProperty(t.schema.properties[e],t.ui["$"+e],(t.formData||{})[e],t,e),t._propertiesId.push(e)})},t.prototype.setValue=function(e,t){for(var n in e)e.hasOwnProperty(n)&&this.properties[n]&&this.properties[n].setValue(e[n],!0);this.updateValueAndValidity(t,!0)},t.prototype.resetValue=function(e,t){for(var n in e=e||this.schema["default"]||{},this.schema.properties)this.properties[n].resetValue(e[n],!0);this.updateValueAndValidity(t,!0)},t.prototype._hasValue=function(){return null!=this.value&&!!Object.keys(this.value).length},t.prototype._updateValue=function(){var e={};this.forEachChild(function(t,n){t.visible&&t._hasValue()&&(e[n]=t.value)}),this._value=e},t}(ee),ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return F(t,e),t.prototype.fallbackValue=function(){return null},t.prototype.setValue=function(e,t){this._value=null==e?"":e,this.updateValueAndValidity(t,!0)},t}(ne),se=function(){function e(e,t){this.schemaValidatorFactory=e,this.options=t}return e.prototype.createProperty=function(e,t,n,r,i){void 0===r&&(r=null);var o=null,a="";if(r)if(a+=r.path,null!==r.parent&&(a+="/"),"object"===r.type)a+=i;else{if("array"!==r.type)throw new Error("Instanciation of a FormProperty with an unknown parent type: "+r.type);a+=r.tick++}else a="/";if(e.$ref){var s=Y(e,r.root.schema.definitions);o=this.createProperty(s,t,n,r,a)}else switch(i&&-1!==(r.schema.required||[]).indexOf(i.split("/").pop())&&(t._required=!0),null==e.title&&(e.title=i),"string"!==e.type&&"number"!==e.type||e.format||t.format||("date"===t.widget?t.format="string"===e.type?this.options.uiDateStringFormat:this.options.uiDateNumberFormat:"time"===t.widget&&(t.format="string"===e.type?this.options.uiTimeStringFormat:this.options.uiTimeNumberFormat)),e.type){case"integer":case"number":o=new ie(this.schemaValidatorFactory,e,t,n,r,a,this.options);break;case"string":o=new ae(this.schemaValidatorFactory,e,t,n,r,a,this.options);break;case"boolean":o=new re(this.schemaValidatorFactory,e,t,n,r,a,this.options);break;case"object":o=new oe(this,this.schemaValidatorFactory,e,t,n,r,a,this.options);break;case"array":o=new te(this,this.schemaValidatorFactory,e,t,n,r,a,this.options);break;default:throw new TypeError("Undefined type "+e.type)}return o instanceof ee&&this.initializeRoot(o),o},e.prototype.initializeRoot=function(e){e._bindVisibility()},e}(),le=function(){function e(){this.onDestroy=new o.Subject}return e.prototype.destroy=function(){this.onDestroy.next(!0)},e}(),ue=function(){return function(){}}(),pe=function(e){function n(t){var n=e.call(this)||this;return n.options=t,n.ajv=new Ajv(N({},t.ajv,{errorDataPath:"property",allErrors:!0,jsonPointers:!0})),n.ajv.addFormat("data-url",/^data:([a-z]+\/[a-z0-9-+.]+)?;name=(.*);base64,(.*)$/),n.ajv.addFormat("color",/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/),n.ajv.addFormat("mobile",/^(0|\+?86|17951)?1[0-9]{10}$/),n.ajv.addFormat("id-card",/(^\d{15}$)|(^\d{17}([0-9]|X)$)/),n}return F(n,e),n.prototype.createValidatorFn=function(e,t){var n=this,r=$(this.options.ingoreKeywords,t.ingoreKeywords||[]);return function(i){try{n.ajv.validate(e,i)}catch(a){t.debug&&console.warn(a)}var o=n.ajv.errors;return n.options&&r&&o&&(o=o.filter(function(e){return-1===r.indexOf(e.keyword)})),o}},n.ctorParameters=function(){return[{type:R,decorators:[{type:t.Inject,args:[R]}]}]},n}(ue),ce=function(){function e(){this._widgets={}}return Object.defineProperty(e.prototype,"widgets",{get:function(){return this._widgets},enumerable:!0,configurable:!0}),e.prototype.setDefault=function(e){this.defaultWidget=e},e.prototype.register=function(e,t){this._widgets[e]=t},e.prototype.has=function(e){return this._widgets.hasOwnProperty(e)},e.prototype.getType=function(e){return this.has(e)?this._widgets[e]:this.defaultWidget},e}(),he=function(){function e(e,t){this.registry=e,this.resolver=t}return e.prototype.createWidget=function(e,t){this.registry.has(t)||console.warn('No widget for type "'+t+'"');var n=this.registry.getType(t),r=this.resolver.resolveComponentFactory(n);return e.createComponent(r)},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:ce},{type:t.ComponentFactoryResolver}]},e}();function de(e,t){return new se(e,t)}var fe=function(){function e(e,n,r,i,s,l,u){var p=this;this.formPropertyFactory=e,this.terminator=n,this.options=r,this.cdr=i,this.localeSrv=s,this.aclSrv=l,this.i18nSrv=u,this.unsubscribe$=new o.Subject,this._renders=new Map,this._valid=!0,this._inited=!1,this.locale={},this.rootProperty=null,this.layout="horizontal",this.button={},this.liveValidate=!0,this.firstVisual=!0,this.onlyVisual=!1,this.loading=!1,this.disabled=!1,this.formChange=new t.EventEmitter,this.formSubmit=new t.EventEmitter,this.formReset=new t.EventEmitter,this.formError=new t.EventEmitter,this.liveValidate=r.liveValidate,this.firstVisual=r.firstVisual,this.autocomplete=r.autocomplete,this.localeSrv.change.pipe(a.takeUntil(this.unsubscribe$)).subscribe(function(){p.locale=p.localeSrv.getData("sf"),p._inited&&(p.validator({emitError:!1,onlyRoot:!1}),p.coverButtonProperty(),p.cdr.markForCheck())});var c=[this.aclSrv?this.aclSrv.change:null,this.i18nSrv?this.i18nSrv.change:null].filter(function(e){return null!=e});c.length>0&&o.merge.apply(void 0,$(c)).pipe(a.filter(function(){return p._inited}),a.takeUntil(this.unsubscribe$)).subscribe(function(){return p.refreshSchema()})}return Object.defineProperty(e.prototype,"mode",{get:function(){return this._mode},set:function(e){switch(e){case"search":this.layout="inline",this.firstVisual=!1,this.liveValidate=!1,this._btn&&(this._btn.submit=this._btn.search);break;case"edit":this.layout="horizontal",this.firstVisual=!1,this.liveValidate=!0,this._btn&&(this._btn.submit=this._btn.edit)}this._mode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return this._valid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._item},enumerable:!0,configurable:!0}),e.prototype.getProperty=function(e){return this.rootProperty.searchProperty(e)},e.prototype.getValue=function(e){return this.getProperty(e).value},e.prototype.setValue=function(e,t){var n=this.getProperty(e);if(!n)throw new Error("Invalid path: "+e);return n.resetValue(t,!1),this},e.prototype.onSubmit=function(e){e.preventDefault(),e.stopPropagation(),this.liveValidate||this.validator(),this.valid&&this.formSubmit.emit(this.value)},e.prototype.fanyi=function(e){return(this.i18nSrv?this.i18nSrv.fanyi(e):"")||e},e.prototype.coverProperty=function(){var e=this,t="horizontal"===this.layout,n=i.deepCopy(this.schema),r=n.definitions,o=function(n,a,s,l,u){Array.isArray(n.required)||(n.required=[]),Object.keys(n.properties).forEach(function(a){var p="$"+a,c=Y(n.properties[a],r),h=i.deepMergeKey({},!0,{widget:c.type},c.format&&q[c.format],"string"==typeof c.ui?{widget:c.ui}:null,!c.format&&!c.ui&&Array.isArray(c["enum"])&&c["enum"].length>0?{widget:"select"}:null,e._defUi,c.ui,s[p]);if(t?l.spanLabelFixed?h.spanLabelFixed||(h.spanLabelFixed=l.spanLabelFixed):(h.spanLabel||(h.spanLabel="undefined"==typeof l.spanLabel?5:l.spanLabel),h.spanControl||(h.spanControl="undefined"==typeof l.spanControl?19:l.spanControl),h.offsetControl||(h.offsetControl="undefined"==typeof l.offsetControl?null:l.offsetControl)):(h.spanLabel=null,h.spanControl=null,h.offsetControl=null),"date"===h.widget&&null!=h.end){var d=n.properties[h.end];d?d.ui=N({},d.ui,{hidden:!0}):h.end=null}if(h.optionalHelp){"string"==typeof h.optionalHelp&&(h.optionalHelp={text:h.optionalHelp});var f=h.optionalHelp=N({text:"",icon:"question-circle",placement:"top",trigger:"hover",mouseEnterDelay:.15,mouseLeaveDelay:.1},h.optionalHelp);f.i18n&&(f.text=e.fanyi(f.i18n)),f.text||(h.optionalHelp=undefined)}if(h.i18n&&(c.title=e.fanyi(h.i18n)),h.descriptionI18n&&(c.description=e.fanyi(h.descriptionI18n)),h.hidden="boolean"==typeof h.hidden&&h.hidden,!1===h.hidden&&h.acl&&e.aclSrv&&!e.aclSrv.can(h.acl)&&(h.hidden=!0),u[p]=h,delete c.ui,!0===h.hidden){var m=n.required.indexOf(a);-1!==m&&n.required.splice(m,1)}c.items&&(u[p].$items=u[p].$items||{},o(c.items,c.items,(s[p]||{}).$items||{},h,u[p].$items)),c.properties&&Object.keys(c.properties).length&&o(c,n,s[p]||{},h,u[p])})},a=function(e,t){Object.keys(e.properties).forEach(function(n){var r=e.properties[n],i="$"+n;G(r,t[i]),r.items&&a(r.items,t[i].$items),r.properties&&a(r,t[i])})};null==this.ui&&(this.ui={}),this._defUi=N({onlyVisual:this.options.onlyVisual,size:this.options.size,liveValidate:this.liveValidate,firstVisual:this.firstVisual},this.options.ui,n.ui,this.ui["*"]),!0===this.onlyVisual&&(this._defUi.onlyVisual=!0),this._ui=N({},this._defUi),o(n,n,this.ui,this.ui,this._ui),G(n,this._ui),a(n,this._ui),this._schema=n,B(this._ui,"cover schema & ui",this._ui,n)},e.prototype.coverButtonProperty=function(){this._btn=N({render:{size:"default"}},this.locale,this.options.button,this.button);var e=Object.keys(this._ui).find(function(e){return e.startsWith("$")});if("horizontal"===this.layout){var t=e?this._ui[e]:this._defUi;this._btn.render.grid||(this._btn.render.grid={offset:t.spanLabel,span:t.spanControl}),null==this._btn.render.spanLabelFixed&&(this._btn.render.spanLabelFixed=t.spanLabelFixed),!this._btn.render["class"]&&"number"==typeof t.spanLabelFixed&&t.spanLabelFixed>0&&(this._btn.render["class"]="text-center")}else this._btn.render.grid={};this._mode&&(this.mode=this._mode),B(this._ui,"button property",this._btn)},e.prototype.ngOnInit=function(){this._inited=!0,this.validator()},e.prototype.ngOnChanges=function(e){1!==Object.keys(e).length||!e.loading&&!e.disabled?this.refreshSchema():this.cdr.detectChanges()},e.prototype._addTpl=function(e,t){this._renders.has(e)?console.warn('Duplicate definition "'+e+'" custom widget'):(this._renders.set(e,t),this.attachCustomRender())},e.prototype.attachCustomRender=function(){var e=this;this._renders.forEach(function(t,n){var r=e.rootProperty.searchProperty(n);null!=r&&(r.ui._render=t)})},e.prototype.validator=function(e){void 0===e&&(e={emitError:!0,onlyRoot:!0});var t=function(e){e._runValidation(),e instanceof ee&&e.properties&&(Array.isArray(e.properties)?e.properties.forEach(function(e){return t(e)}):Object.keys(e.properties).forEach(function(n){return t(e.properties[n])}))};e.onlyRoot?this.rootProperty._runValidation():t(this.rootProperty);var n=this.rootProperty.errors;return this._valid=!(n&&n.length),e.emitError&&!this._valid&&this.formError.emit(n),this.cdr.detectChanges(),this},e.prototype.refreshSchema=function(e,t){var n=this;if(e&&(this.schema=e),t&&(this.ui=t),!this.schema||"undefined"==typeof this.schema.properties)throw new Error("Invalid Schema");if(this.schema.ui&&"string"==typeof this.schema.ui)throw new Error("Don't support string with root ui property");this.schema.type="object",this._formData=N({},this.formData),this._inited&&this.terminator.destroy(),this.cleanRootSub(),this.coverProperty(),this.coverButtonProperty(),this.rootProperty=this.formPropertyFactory.createProperty(this._schema,this._ui,this.formData),this.attachCustomRender(),this.cdr.detectChanges(),this.reset();var r=!0;return this.rootProperty.valueChanges.subscribe(function(e){n._item=N({},n.formData,e),r?r=!1:n.formChange.emit(n._item)}),this.rootProperty.errorsChanges.subscribe(function(e){n._valid=!(e&&e.length),n.formError.emit(e),n.cdr.detectChanges()}),this},e.prototype.reset=function(e){var t=this;return void 0===e&&(e=!1),this.rootProperty.resetValue(this.formData,!1),Promise.resolve().then(function(){return t.cdr.detectChanges()}),e&&this.formReset.emit(this.value),this},e.prototype.cleanRootSub=function(){this.rootProperty&&(this.rootProperty.errorsChanges.unsubscribe(),this.rootProperty.valueChanges.unsubscribe())},e.prototype.ngOnDestroy=function(){this.cleanRootSub(),this.terminator.destroy();var e=this.unsubscribe$;e.next(),e.complete()},e.decorators=[{type:t.Component,args:[{selector:"sf, [sf]",exportAs:"sf",template:'<ng-template #con>\n  <ng-content></ng-content>\n</ng-template>\n<form nz-form\n      [nzLayout]="layout"\n      (submit)="onSubmit($event)"\n      [attr.autocomplete]="autocomplete">\n  <sf-item [formProperty]="rootProperty"></sf-item>\n  <ng-container *ngIf="button !== \'none\'; else con">\n    <nz-form-item [ngClass]="_btn.render!.class"\n                  class="sf-btns"\n                  [fixed-label]="_btn.render!.spanLabelFixed">\n      <div nz-col\n           class="ant-form-item-control-wrapper"\n           [nzSpan]="_btn.render!.grid!.span"\n           [nzOffset]="_btn.render!.grid!.offset"\n           [nzXs]="_btn.render!.grid!.xs"\n           [nzSm]="_btn.render!.grid!.sm"\n           [nzMd]="_btn.render!.grid!.md"\n           [nzLg]="_btn.render!.grid!.lg"\n           [nzXl]="_btn.render!.grid!.xl"\n           [nzXXl]="_btn.render!.grid!.xxl">\n        <div class="ant-form-item-control">\n          <ng-container *ngIf="button; else con">\n            <button type="submit"\n                    nz-button\n                    [nzType]="_btn.submit_type"\n                    [nzSize]="_btn.render!.size"\n                    [nzLoading]="loading"\n                    [disabled]="liveValidate && !valid">\n              <i *ngIf="_btn.submit_icon"\n                  nz-icon\n                  [nzType]="_btn.submit_icon.type"\n                  [nzTheme]="_btn.submit_icon.theme"\n                  [nzTwotoneColor]="_btn.submit_icon.twoToneColor"\n                  [nzIconfont]="_btn.submit_icon.iconfont"></i>\n              {{_btn.submit}}\n            </button>\n            <button *ngIf="_btn.reset"\n                    type="button"\n                    nz-button\n                    [nzType]="_btn.reset_type"\n                    [nzSize]="_btn.render!.size"\n                    [disabled]="loading"\n                    (click)="reset(true)">\n              <i *ngIf="_btn.reset_icon"\n                  nz-icon\n                  [nzType]="_btn.reset_icon.type"\n                  [nzTheme]="_btn.reset_icon.theme"\n                  [nzTwotoneColor]="_btn.reset_icon.twoToneColor"\n                  [nzIconfont]="_btn.reset_icon.iconfont"></i>\n              {{_btn.reset}}\n            </button>\n          </ng-container>\n        </div>\n      </div>\n    </nz-form-item>\n  </ng-container>\n</form>\n',providers:[he,{provide:se,useFactory:de,deps:[ue,R]},le],host:{"[class.sf]":"true","[class.sf__inline]":"layout === 'inline'","[class.sf__search]":"mode === 'search'","[class.sf__edit]":"mode === 'edit'","[class.sf__no-error]":"onlyVisual"},preserveWhitespaces:!1,changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:se},{type:le},{type:R},{type:t.ChangeDetectorRef},{type:r.DelonLocaleService},{type:n.ACLService,decorators:[{type:t.Optional}]},{type:undefined,decorators:[{type:t.Optional},{type:t.Inject,args:[r.ALAIN_I18N_TOKEN]}]}]},e.propDecorators={layout:[{type:t.Input}],schema:[{type:t.Input}],ui:[{type:t.Input}],formData:[{type:t.Input}],button:[{type:t.Input}],liveValidate:[{type:t.Input}],autocomplete:[{type:t.Input}],firstVisual:[{type:t.Input}],onlyVisual:[{type:t.Input}],mode:[{type:t.Input}],loading:[{type:t.Input}],disabled:[{type:t.Input}],formChange:[{type:t.Output}],formSubmit:[{type:t.Output}],formReset:[{type:t.Output}],formError:[{type:t.Output}]},A([i.InputBoolean(),j("design:type",Object)],e.prototype,"liveValidate",void 0),A([i.InputBoolean(),j("design:type",Object)],e.prototype,"firstVisual",void 0),A([i.InputBoolean(),j("design:type",Object)],e.prototype,"onlyVisual",void 0),A([i.InputBoolean(),j("design:type",Object)],e.prototype,"loading",void 0),A([i.InputBoolean(),j("design:type",Object)],e.prototype,"disabled",void 0),e}(),me=0,ge=function(){function e(e,t){this.widgetFactory=e,this.terminator=t,this.unsubscribe$=new o.Subject,this.widget=null}return e.prototype.onWidgetInstanciated=function(e){this.widget=e;var t="_sf-"+me++,n=this.formProperty.ui;this.widget.formProperty=this.formProperty,this.widget.schema=this.formProperty.schema,this.widget.ui=n,this.widget.id=t,this.widget.firstVisual=n.firstVisual,this.formProperty.widget=e},e.prototype.ngOnInit=function(){var e=this;this.terminator.onDestroy.subscribe(function(){return e.ngOnDestroy()})},e.prototype.ngOnChanges=function(){this.ref=this.widgetFactory.createWidget(this.container,this.formProperty.ui.widget||this.formProperty.schema.type),this.onWidgetInstanciated(this.ref.instance)},e.prototype.ngOnDestroy=function(){var e=this.unsubscribe$;e.next(),e.complete(),this.ref.destroy()},e.decorators=[{type:t.Component,args:[{selector:"sf-item",exportAs:"sfItem",template:"\n    <ng-template #target></ng-template>\n  ",preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:he},{type:le}]},e.propDecorators={formProperty:[{type:t.Input}],container:[{type:t.ViewChild,args:["target",{read:t.ViewContainerRef,"static":!0}]}]},e}(),ye=function(){function e(e,t){this.render=t,this._inited=!1,this.el=e.nativeElement}return e.prototype.init=function(){if(this._inited&&null!=this.num&&!(this.num<=0)){var e=this.el.querySelector(".ant-row")||this.el;this.render.addClass(e,"sf__fixed");var t=e.querySelector(".ant-form-item-label"),n=this.num+"px";if(t)this.render.setStyle(t,"width",n),this.render.setStyle(t,"flex","0 0 "+n);else{var r=e.querySelector(".ant-form-item-control-wrapper");this.render.setStyle(r,"margin-left",n)}}},e.prototype.ngAfterViewInit=function(){this._inited=!0,this.init()},e.prototype.ngOnChanges=function(){this._inited&&this.init()},e.decorators=[{type:t.Directive,args:[{selector:"[fixed-label]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2}]},e.propDecorators={num:[{type:t.Input,args:["fixed-label"]}]},A([i.InputNumber(),j("design:type",Number)],e.prototype,"num",void 0),e}(),ze=function(){function e(){this.title=null}return Object.defineProperty(e.prototype,"t",{get:function(){return null===this.title?this.schema.title:this.title},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"oh",{get:function(){return this.ui.optionalHelp},enumerable:!0,configurable:!0}),e.decorators=[{type:t.Component,args:[{selector:"sf-item-wrap",template:'<nz-form-item [style.width.px]="ui.width">\n  <nz-col *ngIf="showTitle" [nzSpan]="ui.spanLabel" class="ant-form-item-label">\n    <label *ngIf="t" [attr.for]="id" [class.ant-form-item-required]="ui._required">\n      {{ t }}\n      <span class="sf__optional">\n        {{ ui.optional }}\n        <nz-tooltip *ngIf="oh"\n          [nzTitle]="oh.text" [nzPlacement]="oh.placement" [nzTrigger]="oh.trigger"\n          [nzOverlayClassName]="oh.overlayClassName" [nzOverlayStyle]="oh.overlayStyle"\n          [nzMouseEnterDelay]="oh.mouseEnterDelay" [nzMouseLeaveDelay]="oh.mouseLeaveDelay">\n          <i nz-tooltip nz-icon [nzType]="oh.icon"></i>\n        </nz-tooltip>\n      </span>\n    </label>\n  </nz-col>\n  <nz-col class="ant-form-item-control-wrapper" [nzSpan]="ui.spanControl" [nzOffset]="ui.offsetControl">\n    <div class="ant-form-item-control" [class.has-error]="showError">\n      <ng-content></ng-content>\n      <nz-form-extra *ngIf="schema.description" [innerHTML]="schema.description"></nz-form-extra>\n      <nz-form-explain *ngIf="!ui.onlyVisual && showError">{{error}}</nz-form-explain>\n    </div>\n  </nz-col>\n</nz-form-item>\n',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],e.propDecorators={id:[{type:t.Input}],schema:[{type:t.Input}],ui:[{type:t.Input}],showError:[{type:t.Input}],error:[{type:t.Input}],showTitle:[{type:t.Input}],title:[{type:t.Input}]},e}(),be=function(){function e(e,t){this.templateRef=e,this.table=t}return e.prototype.ngOnInit=function(){this.table._addTpl(this.path.startsWith("/")?this.path:"/"+this.path,this.templateRef)},e.decorators=[{type:t.Directive,args:[{selector:"[sf-template]"}]}],e.ctorParameters=function(){return[{type:t.TemplateRef},{type:fe}]},e.propDecorators={path:[{type:t.Input,args:["sf-template"]}]},e}(),ve=function(){function e(e,t,n,r){this.cd=e,this.injector=t,this.sfItemComp=n,this.sfComp=r,this.showError=!1,this.id="",this.firstVisual=!1}return Object.defineProperty(e.prototype,"cls",{get:function(){return this.ui["class"]||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return!(!0!==this.schema.readOnly&&!this.sfComp.disabled)||null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"l",{get:function(){return this.formProperty.root.widget.sfComp.locale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"oh",{get:function(){return this.ui.optionalHelp},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this;this.formProperty.errorsChanges.pipe(a.takeUntil(this.sfItemComp.unsubscribe$)).subscribe(function(t){null!=t&&(B(e.ui,"errorsChanges",e.formProperty.path,t),e.firstVisual&&(e.showError=t.length>0,e.error=e.showError?t[0].message:"",e.cd.detectChanges()),e.firstVisual=!0)})},e.prototype.setValue=function(e){this.formProperty.setValue(e,!1),B(this.ui,"valueChanges",this.formProperty.path,this.formProperty)},Object.defineProperty(e.prototype,"value",{get:function(){return this.formProperty.value},enumerable:!0,configurable:!0}),e.prototype.detectChanges=function(e){void 0===e&&(e=!1),e?this.cd.markForCheck():this.formProperty.root.widget.cd.markForCheck()},e.ctorParameters=function(){return[{type:t.ChangeDetectorRef,decorators:[{type:t.Inject,args:[t.ChangeDetectorRef]}]},{type:t.Injector,decorators:[{type:t.Inject,args:[t.Injector]}]},{type:ge,decorators:[{type:t.Inject,args:[ge]}]},{type:fe,decorators:[{type:t.Inject,args:[fe]}]}]},e.propDecorators={cls:[{type:t.HostBinding,args:["class"]}]},e}(),we=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return F(t,e),t.prototype.reset=function(e){},t}(ve),Ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return F(t,e),t.prototype.reset=function(e){},t}(ve),_e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return F(t,e),t.prototype.reset=function(e){},t.prototype.ngAfterViewInit=function(){var e=this;this.formProperty.errorsChanges.pipe(a.takeUntil(this.sfItemComp.unsubscribe$)).subscribe(function(){return e.cd.detectChanges()})},t}(ve),xe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return F(t,e),t.prototype.reset=function(e){},t.prototype.ngAfterViewInit=function(){var e=this;this.formProperty.errorsChanges.pipe(a.takeUntil(this.sfItemComp.unsubscribe$)).subscribe(function(){return e.cd.detectChanges()})},t}(ve),Se=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.arraySpan=8,t}return F(n,e),Object.defineProperty(n.prototype,"addDisabled",{get:function(){return this.schema.maxItems&&this.formProperty.properties.length>=this.schema.maxItems},enumerable:!0,configurable:!0}),n.prototype.ngOnInit=function(){var e=this.ui,t=e.grid,n=e.addTitle,r=e.addType,i=e.removable,o=e.removeTitle;t&&t.arraySpan&&(this.arraySpan=t.arraySpan),this.addTitle=n||this.l.addText,this.addType=r||"dashed",this.removeTitle=!1===i?null:o||this.l.removeText},n.prototype.addItem=function(){this.formProperty.add(null)},n.prototype.removeItem=function(e){this.formProperty.remove(e)},n.decorators=[{type:t.Component,args:[{selector:"sf-array",template:'<nz-form-item>\n  <nz-col *ngIf="schema.title"\n          [nzSpan]="ui.spanLabel"\n          class="ant-form-item-label">\n    <label>\n      {{ schema.title }}\n      <span class="sf__optional">\n        {{ ui.optional }}\n        <nz-tooltip *ngIf="oh"\n          [nzTitle]="oh.text" [nzPlacement]="oh.placement" [nzTrigger]="oh.trigger"\n          [nzOverlayClassName]="oh.overlayClassName" [nzOverlayStyle]="oh.overlayStyle"\n          [nzMouseEnterDelay]="oh.mouseEnterDelay" [nzMouseLeaveDelay]="oh.mouseLeaveDelay">\n          <i nz-tooltip nz-icon [nzType]="oh.icon"></i>\n        </nz-tooltip>\n      </span>\n    </label>\n    <div class="sf__array-add">\n      <button type="button"\n              nz-button\n              [nzType]="addType"\n              [disabled]="addDisabled"\n              (click)="addItem()"\n              [innerHTML]="addTitle"></button>\n    </div>\n  </nz-col>\n  <nz-col class="ant-form-item-control-wrapper"\n          [nzSpan]="ui.spanControl"\n          [nzOffset]="ui.offsetControl">\n    <div class="ant-form-item-control"\n         [class.has-error]="showError">\n\n      <nz-row class="sf__array-container">\n        <ng-container *ngFor="let i of formProperty.properties; let idx=index">\n          <nz-col *ngIf="i.visible && !i.ui.hidden"\n                  [nzSpan]="arraySpan"\n                  [attr.data-index]="idx"\n                  class="sf-array-item">\n            <nz-card>\n              <sf-item [formProperty]="i"></sf-item>\n              <span *ngIf="removeTitle"\n                    class="remove"\n                    (click)="removeItem(idx)"\n                    [attr.title]="removeTitle">\n                <i nz-icon nzType="delete"></i>\n              </span>\n            </nz-card>\n          </nz-col>\n        </ng-container>\n      </nz-row>\n\n      <nz-form-extra *ngIf="schema.description"\n                     [innerHTML]="schema.description"></nz-form-extra>\n      <nz-form-explain *ngIf="!ui.onlyVisual && showError">{{error}}</nz-form-explain>\n\n    </div>\n  </nz-col>\n</nz-form-item>\n',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],n}(_e),Ve=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.i={},t.typing="",t.isAsync=!1,t.fixData=[],t}return F(n,e),n.prototype.updateValue=function(e){this.typing=e.nzLabel,this.setValue(e.nzValue)},n.prototype.ngAfterViewInit=function(){var e=this,t=this.ui,n=t.backfill,r=t.defaultActiveFirstOption,i=t.nzWidth,o=t.filterOption,s=t.asyncData;this.i={backfill:U(n,!1),defaultActiveFirstOption:U(r,!0),width:i||undefined};var l=null==o||o;"boolean"==typeof l&&(l=function(e,t){return t.label.toLowerCase().indexOf((e||"").toLowerCase())>-1}),this.filterOption=l,this.isAsync=!!s;var u=+(this.ui.debounceTime||0),p=Math.max(0,this.isAsync?Math.max(50,u):u);this.list=this.ngModel.valueChanges.pipe(a.debounceTime(p),a.startWith(""),a.flatMap(function(t){return e.isAsync?s(t):e.filterData(t)}),a.map(function(t){return X(t,null,e.schema.readOnly)}))},n.prototype.reset=function(e){if(this.typing=this.value,!this.isAsync)switch(this.ui.type){case"email":this.fixData=Z(this.schema["enum"]||this.formProperty.options.uiEmailSuffixes,null,this.schema.readOnly);break;default:this.fixData=Z(this.schema["enum"],e,this.schema.readOnly)}},n.prototype.filterData=function(e){var t=this;switch(this.ui.type){case"email":return this.addEmailSuffix(e);default:return o.of(this.fixData.filter(function(n){return t.filterOption(e,n)}))}},n.prototype.addEmailSuffix=function(e){return o.of(!e||~e.indexOf("@")?[]:this.fixData.map(function(t){return e+"@"+t.label}))},n.decorators=[{type:t.Component,args:[{selector:"sf-autocomplete",template:'<sf-item-wrap [id]="id"\n              [schema]="schema"\n              [ui]="ui"\n              [showError]="showError"\n              [error]="error"\n              [showTitle]="schema.title">\n  <input nz-input\n         [nzAutocomplete]="auto"\n         [attr.id]="id"\n         [disabled]="disabled"\n         [attr.disabled]="disabled"\n         [nzSize]="ui.size"\n         [(ngModel)]="typing"\n         (ngModelChange)="setValue($event)"\n         [attr.maxLength]="schema.maxLength || null"\n         [attr.placeholder]="ui.placeholder"\n         autocomplete="off">\n  <nz-autocomplete #auto\n                   [nzBackfill]="i.backfill"\n                   [nzDefaultActiveFirstOption]="i.defaultActiveFirstOption"\n                   [nzWidth]="i.width"\n                   (selectionChange)="updateValue($event)">\n    <nz-auto-option *ngFor="let i of list | async" [nzValue]="i.value" [nzLabel]="i.label">\n      {{i.label}}\n    </nz-auto-option>\n  </nz-autocomplete>\n</sf-item-wrap>\n',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],n.propDecorators={ngModel:[{type:t.ViewChild,args:[l.NgModel,{"static":!1}]}]},n}(Ce),Oe=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.decorators=[{type:t.Component,args:[{selector:"sf-boolean",template:'<sf-item-wrap [id]="id"\n              [schema]="schema"\n              [ui]="ui"\n              [showError]="showError"\n              [error]="error"\n              [showTitle]="schema.title">\n  <nz-switch [ngModel]="value"\n             (ngModelChange)="setValue($event)"\n             [nzDisabled]="disabled"\n             [nzSize]="ui.size"\n             [nzCheckedChildren]="ui.checkedChildren"\n             [nzUnCheckedChildren]="ui.unCheckedChildren">\n  </nz-switch>\n</sf-item-wrap>\n',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],n}(we),Ee=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=[],t}return F(n,e),n.prototype.ngOnInit=function(){var e=this,t=this.ui,n=t.clearText,r=t.showArrow,i=t.showInput,o=t.triggerAction,a=t.asyncData;this.clearText=n||"清除",this.showArrow=U(r,!0),this.showInput=U(i,!0),this.triggerAction=o||["click"],a&&(this.loadData=function(t,n){return a(t,n,e).then(function(){return e.detectChanges()})})},n.prototype.reset=function(e){var t=this;J(this.schema,{},e).subscribe(function(e){t.data=e,t.detectChanges()})},n.prototype._visibleChange=function(e){this.ui.visibleChange&&this.ui.visibleChange(e)},n.prototype._change=function(e){this.setValue(e),this.ui.change&&this.ui.change(e)},n.prototype._selectionChange=function(e){this.ui.selectionChange&&this.ui.selectionChange(e)},n.prototype._select=function(e){this.ui.select&&this.ui.select(e)},n.prototype._clear=function(){this.ui.clear&&this.ui.clear()},n.decorators=[{type:t.Component,args:[{selector:"sf-cascader",template:'<sf-item-wrap [id]="id"\n              [schema]="schema"\n              [ui]="ui"\n              [showError]="showError"\n              [error]="error"\n              [showTitle]="schema.title">\n  <nz-cascader [nzDisabled]="disabled"\n               [nzSize]="ui.size"\n               [ngModel]="value"\n               (ngModelChange)="_change($event)"\n               [nzOptions]="data"\n               [nzAllowClear]="ui.allowClear"\n               [nzAutoFocus]="ui.autoFocus"\n               [nzChangeOn]="ui.changeOn"\n               [nzChangeOnSelect]="ui.changeOnSelect"\n               [nzColumnClassName]="ui.columnClassName"\n               [nzExpandTrigger]="ui.expandTrigger"\n               [nzMenuClassName]="ui.menuClassName"\n               [nzMenuStyle]="ui.menuStyle"\n               [nzLabelProperty]="ui.labelProperty || \'label\'"\n               [nzValueProperty]="ui.valueProperty || \'value\'"\n               [nzLoadData]="loadData"\n               [nzPlaceHolder]="ui.placeholder"\n               [nzShowArrow]="showArrow"\n               [nzShowInput]="showInput"\n               [nzShowSearch]="ui.showSearch"\n               (nzClear)="_clear()"\n               (nzVisibleChange)="_visibleChange($event)"\n               (nzSelect)="_select($event)"\n               (nzSelectionChange)="_selectionChange($event)">\n  </nz-cascader>\n</sf-item-wrap>\n',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],n}(Ce),Pe=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=[],t.allChecked=!1,t.indeterminate=!1,t.labelTitle="",t.inited=!1,t}return F(n,e),n.prototype.reset=function(e){var t=this;this.inited=!1,J(this.schema,this.ui,e).subscribe(function(e){t.data=e,t.allChecked=!1,t.indeterminate=!1,t.labelTitle=0===e.length?"":t.schema.title;var n=t.ui.span;t.grid_span=n&&n>0?n:0,t.updateAllChecked(),t.inited=!0,t.detectChanges()})},n.prototype._setValue=function(e){this.setValue(e),this.detectChanges(),this.notifyChange(e)},n.prototype.notifySet=function(){var e=this.data.filter(function(e){return e.checked});this.updateAllChecked().setValue(e.map(function(e){return e.value})),this.notifyChange(e)},n.prototype.groupInGridChange=function(e){this.data.forEach(function(t){return t.checked=-1!==e.indexOf(t.value)}),this.notifySet()},n.prototype.onAllChecked=function(){var e=this;this.data.forEach(function(t){return t.checked=e.allChecked}),this.notifySet()},n.prototype.updateAllChecked=function(){return this.data.every(function(e){return!0!==e.checked})?(this.allChecked=!1,this.indeterminate=!1):this.data.every(function(e){return!0===e.checked})?(this.allChecked=!0,this.indeterminate=!1):this.indeterminate=!0,this.detectChanges(),this},n.prototype.notifyChange=function(e){this.ui.change&&this.ui.change(e)},n.decorators=[{type:t.Component,args:[{selector:"sf-checkbox",template:'<ng-template #all>\n  <label *ngIf="ui.checkAll"\n         nz-checkbox\n         class="sf__checkbox-all mr-sm"\n         [(ngModel)]="allChecked"\n         (ngModelChange)="onAllChecked()"\n         [nzIndeterminate]="indeterminate">{{ ui.checkAllText || l.checkAllText }}</label>\n</ng-template>\n<sf-item-wrap [id]="id"\n              [schema]="schema"\n              [ui]="ui"\n              [showError]="showError"\n              [error]="error"\n              [showTitle]="true"\n              [title]="labelTitle">\n  <ng-container *ngIf="inited && data.length === 0">\n    <label nz-checkbox\n           [nzDisabled]="disabled"\n           [ngModel]="value"\n           (ngModelChange)="_setValue($event)">\n      {{schema.title}}\n      <span class="sf__optional">\n        {{ ui.optional }}\n        <nz-tooltip *ngIf="oh"\n          [nzTitle]="oh.text" [nzPlacement]="oh.placement" [nzTrigger]="oh.trigger"\n          [nzOverlayClassName]="oh.overlayClassName" [nzOverlayStyle]="oh.overlayStyle"\n          [nzMouseEnterDelay]="oh.mouseEnterDelay" [nzMouseLeaveDelay]="oh.mouseLeaveDelay">\n          <i nz-tooltip nz-icon [nzType]="oh.icon"></i>\n        </nz-tooltip>\n      </span>\n    </label>\n  </ng-container>\n  <ng-container *ngIf="inited && data.length > 0">\n    <ng-container *ngIf="grid_span === 0">\n      <ng-template [ngTemplateOutlet]="all"></ng-template>\n      <nz-checkbox-group [ngModel]="data"\n                         (ngModelChange)="notifySet()"></nz-checkbox-group>\n    </ng-container>\n    <ng-container *ngIf="grid_span !== 0">\n      <nz-checkbox-wrapper class="sf__checkbox-list"\n                           (nzOnChange)="groupInGridChange($event)">\n        <nz-row>\n          <nz-col [nzSpan]="grid_span"\n                  *ngIf="ui.checkAll">\n            <ng-template [ngTemplateOutlet]="all"></ng-template>\n          </nz-col>\n          <nz-col [nzSpan]="grid_span"\n                  *ngFor="let i of data">\n            <label nz-checkbox\n                   [nzValue]="i.value"\n                   [ngModel]="i.checked"\n                   [nzDisabled]="i.disabled">{{i.label}}</label>\n          </nz-col>\n        </nz-row>\n      </nz-checkbox-wrapper>\n    </ng-container>\n  </ng-container>\n</sf-item-wrap>\n',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],n}(Ce),De=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.decorators=[{type:t.Component,args:[{selector:"sf-custom",template:'\n    <sf-item-wrap [id]="id" [schema]="schema" [ui]="ui" [showError]="showError" [error]="error" [showTitle]="schema.title">\n      <ng-template\n        [ngTemplateOutlet]="$any(ui)._render"\n        [ngTemplateOutletContext]="{$implicit: this, schema: schema, ui: ui }"\n      ></ng-template>\n    </sf-item-wrap>\n  ',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],n}(Ce),Ie=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.displayValue=null,t.flatRange=!1,t}return F(n,e),n.prototype.ngOnInit=function(){var e=this.ui,t=e.mode,n=e.end,r=e.displayFormat,i=e.format,o=e.allowClear,a=e.showToday;if(this.mode=t||"date",this.flatRange=null!=n,this.flatRange&&(this.mode="range"),r)this.displayFormat=r;else switch(this.mode){case"year":this.displayFormat="yyyy";break;case"month":this.displayFormat="yyyy-MM";break;case"week":this.displayFormat="yyyy-ww"}this.format=i,this.i={allowClear:U(o,!0),showToday:U(a,!0)}},n.prototype.compCd=function(){var e=this;setTimeout(function(){return e.detectChanges()})},n.prototype.reset=function(e){e=this.toDate(e),this.flatRange?this.displayValue=null==e?[]:[e,this.toDate(this.endProperty.formData)]:this.displayValue=e,this.compCd()},n.prototype._change=function(e){var t=this;if(null==e)return this.setValue(null),void this.setEnd(null);var n=Array.isArray(e)?e.map(function(e){return T(e,t.format)}):T(e,this.format);this.flatRange?(this.setEnd(n[1]),this.setValue(n[0])):this.setValue(n)},n.prototype._openChange=function(e){this.ui.onOpenChange&&this.ui.onOpenChange(e)},n.prototype._ok=function(e){this.ui.onOk&&this.ui.onOk(e)},Object.defineProperty(n.prototype,"endProperty",{get:function(){return this.formProperty.parent.properties[this.ui.end]},enumerable:!0,configurable:!0}),n.prototype.setEnd=function(e){this.flatRange&&this.endProperty.setValue(e,!0)},n.prototype.toDate=function(e){return("number"==typeof e||"string"==typeof e&&!isNaN(+e))&&(e=new Date(+e)),e},n.decorators=[{type:t.Component,args:[{selector:"sf-date",template:'<sf-item-wrap [id]="id"\n              [schema]="schema"\n              [ui]="ui"\n              [showError]="showError"\n              [error]="error"\n              [showTitle]="schema.title">\n  <ng-container [ngSwitch]="mode">\n\n    <nz-year-picker *ngSwitchCase="\'year\'"\n                    [nzDisabled]="disabled"\n                    [nzSize]="ui.size"\n                    [nzFormat]="displayFormat"\n                    [(ngModel)]="displayValue"\n                    (ngModelChange)="_change($event)"\n                    [nzAllowClear]="i.allowClear"\n                    [nzClassName]="ui.className"\n                    [nzDisabledDate]="ui.disabledDate"\n                    [nzLocale]="ui.locale"\n                    [nzPlaceHolder]="ui.placeholder"\n                    [nzPopupStyle]="ui.popupStyle"\n                    [nzDropdownClassName]="ui.dropdownClassName"\n                    (nzOnOpenChange)="_openChange($event)"\n                    [nzRenderExtraFooter]="ui.renderExtraFooter"></nz-year-picker>\n\n    <nz-month-picker *ngSwitchCase="\'month\'"\n                     [nzDisabled]="disabled"\n                     [nzSize]="ui.size"\n                     [nzFormat]="displayFormat"\n                     [(ngModel)]="displayValue"\n                     (ngModelChange)="_change($event)"\n                     [nzAllowClear]="i.allowClear"\n                     [nzClassName]="ui.className"\n                     [nzDisabledDate]="ui.disabledDate"\n                     [nzLocale]="ui.locale"\n                     [nzPlaceHolder]="ui.placeholder"\n                     [nzPopupStyle]="ui.popupStyle"\n                     [nzDropdownClassName]="ui.dropdownClassName"\n                     (nzOnOpenChange)="_openChange($event)"\n                     [nzRenderExtraFooter]="ui.renderExtraFooter"></nz-month-picker>\n\n    <nz-week-picker *ngSwitchCase="\'week\'"\n                    [nzDisabled]="disabled"\n                    [nzSize]="ui.size"\n                    [nzFormat]="displayFormat"\n                    [(ngModel)]="displayValue"\n                    (ngModelChange)="_change($event)"\n                    [nzAllowClear]="i.allowClear"\n                    [nzClassName]="ui.className"\n                    [nzDisabledDate]="ui.disabledDate"\n                    [nzLocale]="ui.locale"\n                    [nzPlaceHolder]="ui.placeholder"\n                    [nzPopupStyle]="ui.popupStyle"\n                    [nzDropdownClassName]="ui.dropdownClassName"\n                    (nzOnOpenChange)="_openChange($event)"></nz-week-picker>\n\n    <nz-range-picker *ngSwitchCase="\'range\'"\n                     [nzDisabled]="disabled"\n                     [nzSize]="ui.size"\n                     [nzFormat]="displayFormat"\n                     [(ngModel)]="displayValue"\n                     (ngModelChange)="_change($event)"\n                     [nzAllowClear]="i.allowClear"\n                     [nzClassName]="ui.className"\n                     [nzDisabledDate]="ui.disabledDate"\n                     [nzLocale]="ui.locale"\n                     [nzPlaceHolder]="ui.placeholder"\n                     [nzPopupStyle]="ui.popupStyle"\n                     [nzDropdownClassName]="ui.dropdownClassName"\n                     (nzOnOpenChange)="_openChange($event)"\n                     [nzDisabledTime]="ui.disabledTime"\n                     [nzRenderExtraFooter]="ui.renderExtraFooter"\n                     [nzRanges]="ui.ranges"\n                     [nzShowTime]="ui.showTime"\n                     (nzOnOk)="_ok($event)"></nz-range-picker>\n\n    <nz-date-picker *ngSwitchDefault\n                    [nzDisabled]="disabled"\n                    [nzSize]="ui.size"\n                    [nzFormat]="displayFormat"\n                    [(ngModel)]="displayValue"\n                    (ngModelChange)="_change($event)"\n                    [nzAllowClear]="i.allowClear"\n                    [nzClassName]="ui.className"\n                    [nzDisabledDate]="ui.disabledDate"\n                    [nzLocale]="ui.locale"\n                    [nzPlaceHolder]="ui.placeholder"\n                    [nzPopupStyle]="ui.popupStyle"\n                    [nzDropdownClassName]="ui.dropdownClassName"\n                    (nzOnOpenChange)="_openChange($event)"\n                    [nzDisabledTime]="ui.disabledTime"\n                    [nzRenderExtraFooter]="ui.renderExtraFooter"\n                    [nzShowTime]="ui.showTime"\n                    [nzShowToday]="i.showToday"\n                    (nzOnOk)="_ok($event)"></nz-date-picker>\n  </ng-container>\n\n</sf-item-wrap>\n',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],n}(Ce),Me=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=[],t.loading=!1,t}return F(n,e),n.prototype.ngOnInit=function(){var e=this,t=this.ui,n=t.valueWith,r=t.notFoundContent,i=t.placement,o=t.prefix,a=t.autosize;this.i={valueWith:n||function(e){return e.label},notFoundContent:r||"无匹配结果，轻敲空格完成输入",placement:i||"bottom",prefix:o||"@",autosize:void 0===a||this.ui.autosize};var s=this.schema,l=s.minimum,u=s.maximum,p=void 0!==l?l:-1,c=void 0!==u?u:-1;this.ui.validator||-1===p&&-1===c||(this.ui.validator=function(){var t=e.mentionChild.getMentions().length;return-1!==p&&t<p?[{keyword:"mention",message:"最少提及 "+p+" 次"}]:-1!==c&&t>c?[{keyword:"mention",message:"最多提及 "+c+" 次"}]:null})},n.prototype.reset=function(e){var t=this;J(this.schema,this.ui,null).subscribe(function(e){t.data=e,t.detectChanges()})},n.prototype._select=function(e){this.ui.select&&this.ui.select(e)},n.prototype._search=function(e){var t=this;"function"==typeof this.ui.loadData&&(this.loading=!0,this.ui.loadData(e).pipe(a.tap(function(){return t.loading=!1}),a.map(function(e){return X(e,null,t.schema.readOnly)})).subscribe(function(e){t.data=e,t.detectChanges(!0)}))},n.decorators=[{type:t.Component,args:[{selector:"sf-mention",template:'<sf-item-wrap [id]="id"\n              [schema]="schema"\n              [ui]="ui"\n              [showError]="showError"\n              [error]="error"\n              [showTitle]="schema.title">\n  <nz-mention #mentions\n              [nzSuggestions]="data"\n              [nzValueWith]="i.valueWith"\n              [nzLoading]="loading"\n              [nzNotFoundContent]="i.notFoundContent"\n              [nzPlacement]="i.placement"\n              [nzPrefix]="i.prefix"\n              (nzOnSelect)="_select($event)"\n              (nzOnSearchChange)="_search($event)">\n      <input *ngIf="ui.inputStyle !== \'textarea\'" nzMentionTrigger\n             nz-input\n             [attr.id]="id"\n             [disabled]="disabled"\n             [attr.disabled]="disabled"\n             [nzSize]="ui.size"\n             [ngModel]="value"\n             (ngModelChange)="setValue($event)"\n             [attr.maxLength]="schema.maxLength || null"\n             [attr.placeholder]="ui.placeholder"\n             autocomplete="off" />\n      <textarea *ngIf="ui.inputStyle === \'textarea\'" nzMentionTrigger\n                nz-input\n                [attr.id]="id"\n                [disabled]="disabled"\n                [attr.disabled]="disabled"\n                [nzSize]="ui.size"\n                [ngModel]="value"\n                (ngModelChange)="setValue($event)"\n                [attr.maxLength]="schema.maxLength || null"\n                [attr.placeholder]="ui.placeholder"\n                [nzAutosize]="i.autosize">\n        </textarea>\n  </nz-mention>\n</sf-item-wrap>\n',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],n.propDecorators={mentionChild:[{type:t.ViewChild,args:["mentions",{"static":!0}]}]},n}(Ce),Te=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.formatter=function(e){return e},t.parser=function(e){return e},t}return F(n,e),n.prototype.ngOnInit=function(){var e=this.schema,t=e.minimum,n=e.exclusiveMinimum,r=e.maximum,i=e.exclusiveMaximum,o=e.multipleOf,a=e.type;void 0!==t&&(this.min=n?t+1:t),void 0!==r&&(this.max=i?r-1:r),this.step=o||1,"integer"===a&&(this.min=Math.trunc(this.min),this.max=Math.trunc(this.max),this.step=Math.trunc(this.step));var s=this.ui;null!=s.prefix&&(s.formatter=function(e){return null==e?"":s.prefix+" "+e},s.parser=function(e){return e.replace(s.prefix+" ","")}),null!=s.unit&&(s.formatter=function(e){return null==e?"":e+" "+s.unit},s.parser=function(e){return e.replace(" "+s.unit,"")}),s.formatter&&(this.formatter=s.formatter),s.parser&&(this.parser=s.parser)},n.prototype._setValue=function(e){this.setValue("integer"===this.schema.type?Math.floor(e):e)},n.decorators=[{type:t.Component,args:[{selector:"sf-number",template:'<sf-item-wrap [id]="id"\n              [schema]="schema"\n              [ui]="ui"\n              [showError]="showError"\n              [error]="error"\n              [showTitle]="schema.title">\n  <nz-input-number [ngModel]="value"\n                   (ngModelChange)="_setValue($event)"\n                   [nzDisabled]="disabled"\n                   [nzSize]="ui.size"\n                   [nzMin]="min"\n                   [nzMax]="max"\n                   [nzStep]="step"\n                   [nzFormatter]="formatter"\n                   [nzParser]="parser"\n                   [nzPrecision]="ui.precision"\n                   [nzPlaceHolder]="ui.placeholder || \'\'">\n  </nz-input-number>\n</sf-item-wrap>\n',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],n}(Ce),ke=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.list=[],t}return F(n,e),n.prototype.ngOnInit=function(){var e,t,n=this.formProperty,r=this.ui,i=r.grid,o=r.showTitle;n.isRoot()||n.parent instanceof te||!0!==o||(this.title=this.schema.title),this.grid=i;var a=[];try{for(var s=L(n.propertiesId),l=s.next();!l.done;l=s.next()){var u=l.value,p=n.properties[u],c={property:p,grid:p.ui.grid||i||{},spanLabelFixed:p.ui.spanLabelFixed,show:!1===p.ui.hidden};a.push(c)}}catch(h){e={error:h}}finally{try{l&&!l.done&&(t=s["return"])&&t.call(s)}finally{if(e)throw e.error}}this.list=a},n.decorators=[{type:t.Component,args:[{selector:"sf-object",template:'<div *ngIf="title" class="sf__title">{{ title }}</div>\n<ng-container *ngIf="grid; else noGrid">\n  <div nz-row\n       [nzGutter]="grid.gutter">\n    <ng-container *ngFor="let i of list">\n      <ng-container *ngIf="i.property.visible && i.show">\n        <div nz-col\n             [nzSpan]="i.grid.span"\n             [nzOffset]="i.grid.offset"\n             [nzXs]="i.grid.xs"\n             [nzSm]="i.grid.sm"\n             [nzMd]="i.grid.md"\n             [nzLg]="i.grid.lg"\n             [nzXl]="i.grid.xl"\n             [nzXXl]="i.grid.xxl">\n          <sf-item [formProperty]="i.property"\n                   [fixed-label]="i.spanLabelFixed"></sf-item>\n        </div>\n      </ng-container>\n    </ng-container>\n  </div>\n</ng-container>\n<ng-template #noGrid>\n  <ng-container *ngFor="let i of list">\n    <ng-container *ngIf="i.property.visible && i.show">\n      <sf-item [formProperty]="i.property"\n               [fixed-label]="i.spanLabelFixed"></sf-item>\n    </ng-container>\n  </ng-container>\n</ng-template>\n',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],n}(xe),Fe=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=[],t}return F(n,e),n.prototype.reset=function(e){var t=this;this.styleType="default"===(this.ui.styleType||"default"),J(this.schema,this.ui,e).subscribe(function(e){t.data=e,t.detectChanges()})},n.prototype._setValue=function(e){this.setValue(e),this.ui.change&&this.ui.change(e)},n.decorators=[{type:t.Component,args:[{selector:"sf-radio",template:'<sf-item-wrap [id]="id"\n              [schema]="schema"\n              [ui]="ui"\n              [showError]="showError"\n              [error]="error"\n              [showTitle]="schema.title">\n\n  <nz-radio-group [nzDisabled]="disabled"\n                  [nzSize]="ui.size"\n                  [nzName]="id"\n                  [ngModel]="value"\n                  (ngModelChange)="_setValue($event)"\n                  [nzButtonStyle]="ui.buttonStyle || \'outline\'">\n    <ng-container *ngIf="styleType">\n      <label *ngFor="let option of data"\n             nz-radio\n             [nzValue]="option.value"\n             [nzDisabled]="option.disabled">\n        <span [innerHTML]="option.label"></span>\n      </label>\n    </ng-container>\n    <ng-container *ngIf="!styleType">\n      <label *ngFor="let option of data"\n             nz-radio-button\n             [nzValue]="option.value"\n             [nzDisabled]="option.disabled">\n        <span [innerHTML]="option.label"></span>\n      </label>\n    </ng-container>\n  </nz-radio-group>\n\n</sf-item-wrap>\n',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],n}(Ce),Ne=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasText=!1,t}return F(n,e),Object.defineProperty(n.prototype,"text",{get:function(){return this.ui.text.replace("{{value}}",this.formProperty.value)},enumerable:!0,configurable:!0}),n.prototype.ngOnInit=function(){var e=this.schema,t=this.ui;this.count=e.maximum||5,this.allowHalf=.5===(e.multipleOf||.5),this.allowClear=U(t.allowClear,!0),this.autoFocus=U(t.autoFocus,!1),this.hasText=!!t.text},n.decorators=[{type:t.Component,args:[{selector:"sf-rate",template:'<sf-item-wrap [id]="id"\n              [schema]="schema"\n              [ui]="ui"\n              [showError]="showError"\n              [error]="error"\n              [showTitle]="schema.title">\n  <nz-rate [nzDisabled]="disabled"\n           [ngModel]="value"\n           (ngModelChange)="setValue($event)"\n           [nzAllowClear]="allowClear"\n           [nzAllowHalf]="allowHalf"\n           [nzAutoFocus]="autoFocus"\n           [nzCount]="count"></nz-rate>\n  <span *ngIf="hasText && formProperty.value"\n        class="ant-rate-text">{{ text }}</span>\n</sf-item-wrap>\n',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],n}(Ce),Ae=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasGroup=!1,t}return F(n,e),n.prototype.checkGroup=function(e){this.hasGroup=(e||[]).filter(function(e){return!0===e.group}).length>0},n.prototype.ngOnInit=function(){var e=this.ui,t=e.autoClearSearchValue,n=e.allowClear,r=e.autoFocus,i=e.dropdownClassName,o=e.dropdownMatchSelectWidth,a=e.serverSearch,s=e.maxMultipleCount,l=e.mode,u=e.notFoundContent,p=e.showSearch,c=e.tokenSeparators,h=e.maxTagCount,d=e.compareWith;this.i={autoClearSearchValue:U(t,!0),allowClear:n,autoFocus:U(r,!1),dropdownClassName:i||null,dropdownMatchSelectWidth:U(o,!0),serverSearch:U(a,!1),maxMultipleCount:s||Infinity,mode:l||"default",notFoundContent:u,showSearch:U(p,!0),tokenSeparators:c||[],maxTagCount:h||undefined,compareWith:d||function(e,t){return e===t}}},n.prototype.reset=function(e){var t=this;J(this.schema,this.ui,e).subscribe(function(n){t._value=e,t.data=n,t.checkGroup(n),t.detectChanges()})},n.prototype.change=function(e){this.ui.change&&this.ui.change(e),this.setValue(null==e?undefined:e)},n.prototype.openChange=function(e){this.ui.openChange&&this.ui.openChange(e)},n.prototype.searchChange=function(e){var t=this;this.ui.onSearch?this.ui.onSearch(e).then(function(e){t.data=e,t.checkGroup(e),t.detectChanges()}):this.detectChanges()},n.prototype.scrollToBottom=function(){this.ui.scrollToBottom&&this.ui.scrollToBottom()},n.decorators=[{type:t.Component,args:[{selector:"sf-select",template:'<sf-item-wrap [id]="id"\n              [schema]="schema"\n              [ui]="ui"\n              [showError]="showError"\n              [error]="error"\n              [showTitle]="schema.title">\n  <nz-select [nzDisabled]="disabled"\n             [nzSize]="ui.size"\n             [(ngModel)]="_value"\n             (ngModelChange)="change($event)"\n             [nzPlaceHolder]="ui.placeholder"\n             [nzAutoClearSearchValue]="i.autoClearSearchValue"\n             [nzAllowClear]="i.allowClear"\n             [nzAutoFocus]="i.autoFocus"\n             [nzDropdownClassName]="i.dropdownClassName"\n             [nzDropdownMatchSelectWidth]="i.dropdownMatchSelectWidth"\n             [nzServerSearch]="i.serverSearch"\n             [nzMaxMultipleCount]="i.maxMultipleCount"\n             [nzMode]="i.mode"\n             [nzNotFoundContent]="i.notFoundContent"\n             [nzShowSearch]="i.showSearch"\n             [nzTokenSeparators]="i.tokenSeparators"\n             [nzMaxTagCount]="i.maxTagCount"\n             [compareWith]="i.compareWith"\n             (nzOpenChange)="openChange($event)"\n             (nzOnSearch)="searchChange($event)"\n             (nzScrollToBottom)="scrollToBottom()">\n    <ng-container *ngIf="!hasGroup">\n      <nz-option *ngFor="let o of data"\n                 [nzLabel]="o.label"\n                 [nzValue]="o.value"\n                 [nzDisabled]="o.disabled">\n      </nz-option>\n    </ng-container>\n    <ng-container *ngIf="hasGroup">\n      <nz-option-group *ngFor="let i of data"\n                       [nzLabel]="i.label">\n        <nz-option *ngFor="let o of i.children"\n                   [nzLabel]="o.label"\n                   [nzValue]="o.value"\n                   [nzDisabled]="o.disabled">\n        </nz-option>\n      </nz-option-group>\n    </ng-container>\n  </nz-select>\n</sf-item-wrap>\n',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],n}(Ce),je=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t._formatter=function(e){var n=t.ui.formatter;return n?n(e):e},t}return F(n,e),n.prototype.ngOnInit=function(){var e=this.schema,t=e.minimum,n=e.maximum,r=e.multipleOf;this.min=t||0,this.max=n||100,this.step=r||1;var i=this.ui,o=i.marks,a=i.included;this.marks=o||null,this.included=void 0===a||a},n.prototype._afterChange=function(e){var t=this.ui.afterChange;if(t)return t(e)},n.decorators=[{type:t.Component,args:[{selector:"sf-slider",template:'<sf-item-wrap [id]="id"\n              [schema]="schema"\n              [ui]="ui"\n              [showError]="showError"\n              [error]="error"\n              [showTitle]="schema.title">\n\n  <nz-slider [ngModel]="value"\n             (ngModelChange)="setValue($event)"\n             [nzDisabled]="disabled"\n             [nzRange]="ui.range"\n             [nzMin]="min"\n             [nzMax]="max"\n             [nzStep]="step"\n             [nzMarks]="marks"\n             [nzDots]="ui.dots"\n             [nzIncluded]="included"\n             [nzVertical]="ui.vertical"\n             [nzTipFormatter]="_formatter"\n             (nzOnAfterChange)="_afterChange($event)">\n  </nz-slider>\n\n</sf-item-wrap>\n',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],n}(Ce),Le=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.ngOnInit=function(){var e=this.ui,t=e.addOnAfter,n=e.addOnAfterIcon,r=e.addOnBefore,i=e.addOnBeforeIcon,o=e.prefix,a=e.prefixIcon,s=e.suffix,l=e.suffixIcon;this.type=t||r||n||i||o||a||s||l?"addon":""},n.prototype.reset=function(e){e||"color"!==this.schema.format||this.setValue("#000000")},n.decorators=[{type:t.Component,args:[{selector:"sf-string",template:'<sf-item-wrap [id]="id"\n              [schema]="schema"\n              [ui]="ui"\n              [showError]="showError"\n              [error]="error"\n              [showTitle]="schema.title">\n\n  <ng-template #ipt>\n    <input nz-input\n           [attr.id]="id"\n           [disabled]="disabled"\n           [attr.disabled]="disabled"\n           [nzSize]="ui.size"\n           [ngModel]="value"\n           (ngModelChange)="setValue($event)"\n           [attr.maxLength]="schema.maxLength || null"\n           [attr.type]="ui.type || \'text\'"\n           [attr.placeholder]="ui.placeholder"\n           [attr.autocomplete]="ui.autocomplete"\n           [attr.autoFocus]="ui.autofocus">\n  </ng-template>\n\n  <ng-container *ngIf="type === \'addon\'; else ipt">\n    <nz-input-group [nzAddOnBefore]="ui.addOnBefore"\n                    [nzAddOnAfter]="ui.addOnAfter"\n                    [nzAddOnBeforeIcon]="ui.addOnBeforeIcon"\n                    [nzAddOnAfterIcon]="ui.addOnAfterIcon"\n                    [nzPrefix]="ui.prefix"\n                    [nzPrefixIcon]="ui.prefixIcon"\n                    [nzSuffix]="ui.suffix"\n                    [nzSuffixIcon]="ui.suffixIcon">\n      <ng-template [ngTemplateOutlet]="ipt"></ng-template>\n    </nz-input-group>\n  </ng-container>\n</sf-item-wrap>\n',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],n}(Ce),We=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.reset=function(e){var t=this;J(this.schema,this.ui,e).subscribe(function(e){t.data=e,t.detectChanges()})},n.prototype.onChange=function(e){e.checked=!e.checked,this.updateValue(),this.ui.checkedChange&&this.ui.checkedChange(e.checked)},n.prototype._afterClose=function(){this.ui.afterClose&&this.ui.afterClose()},n.prototype._close=function(e){this.ui.onClose&&this.ui.onClose(e)},n.prototype.updateValue=function(){this.formProperty.setValue(this.data.filter(function(e){return e.checked}).map(function(e){return e.value}),!1)},n.decorators=[{type:t.Component,args:[{selector:"sf-tag",template:'<sf-item-wrap [id]="id"\n              [schema]="schema"\n              [ui]="ui"\n              [showError]="showError"\n              [error]="error"\n              [showTitle]="schema.title">\n\n  <nz-tag *ngFor="let i of data"\n          [nzMode]="ui.mode || \'checkable\'"\n          [nzChecked]="i.checked"\n          (nzAfterClose)="_afterClose()"\n          (nzOnClose)="_close($event)"\n          (nzCheckedChange)="onChange(i)">\n    {{i.label}}\n  </nz-tag>\n\n</sf-item-wrap>\n',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],n}(Ce),$e=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.ngOnInit=function(){this.ui._required=!1},n.decorators=[{type:t.Component,args:[{selector:"sf-text",template:'<sf-item-wrap [id]="id"\n              [schema]="schema"\n              [ui]="ui"\n              [showError]="showError"\n              [error]="error"\n              [showTitle]="schema.title">\n  {{ value || ui.defaultText || \'-\' }}\n</sf-item-wrap>\n',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],n}(Ce),Re=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.autosize=!0,t}return F(n,e),n.prototype.ngOnInit=function(){var e=this.ui.autosize;null!=e&&(this.autosize=e)},n.decorators=[{type:t.Component,args:[{selector:"sf-textarea",template:'<sf-item-wrap [id]="id"\n              [schema]="schema"\n              [ui]="ui"\n              [showError]="showError"\n              [error]="error"\n              [showTitle]="schema.title">\n\n  <textarea nz-input\n            [attr.id]="id"\n            [disabled]="disabled"\n            [attr.disabled]="disabled"\n            [nzSize]="ui.size"\n            [ngModel]="value"\n            (ngModelChange)="setValue($event)"\n            [attr.maxLength]="schema.maxLength || null"\n            [attr.placeholder]="ui.placeholder"\n            [nzAutosize]="autosize">\n    </textarea>\n\n</sf-item-wrap>\n',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],n}(Ce),qe=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.displayValue=null,t}return F(n,e),n.prototype.ngOnInit=function(){var e=this.ui;this.format=e.format,this.i={displayFormat:e.displayFormat||"HH:mm:ss",allowEmpty:U(e.allowEmpty,!0),clearText:e.clearText||"清除",defaultOpenValue:e.defaultOpenValue||new Date,hideDisabledOptions:U(e.hideDisabledOptions,!1),hourStep:e.hourStep||1,minuteStep:e.nzMinuteStep||1,secondStep:e.secondStep||1}},n.prototype.reset=function(e){if(e instanceof Date)return this.displayValue=e,void this.detectChanges();var t=null!=e&&e.toString().length?new Date(e):null;null!=t&&"Invalid Date"===t.toString()&&(e.toString().split(":").length<=1&&(e+=":00"),t=new Date("1970-1-1 "+e)),this.displayValue=t,this.detectChanges()},n.prototype._change=function(e){null!=e?!0!==this.ui.utcEpoch?this.setValue(T(e,this.format)):this.setValue(Date.UTC(1970,0,1,e.getHours(),e.getMinutes(),e.getSeconds())):this.setValue(null)},n.decorators=[{type:t.Component,args:[{selector:"sf-time",template:'<sf-item-wrap [id]="id"\n              [schema]="schema"\n              [ui]="ui"\n              [showError]="showError"\n              [error]="error"\n              [showTitle]="schema.title">\n\n  <nz-time-picker [(ngModel)]="displayValue"\n                  (ngModelChange)="_change($event)"\n                  [nzDisabled]="disabled"\n                  [nzSize]="ui.size"\n                  [nzFormat]="i.displayFormat"\n                  [nzAllowEmpty]="i.allowEmpty"\n                  [nzClearText]="i.clearText"\n                  [nzDefaultOpenValue]="i.defaultOpenValue"\n                  [nzDisabledHours]="ui.disabledHours"\n                  [nzDisabledMinutes]="ui.disabledMinutes"\n                  [nzDisabledSeconds]="ui.disabledSeconds"\n                  [nzHideDisabledOptions]="i.hideDisabledOptions"\n                  [nzHourStep]="i.hourStep"\n                  [nzMinuteStep]="i.minuteStep"\n                  [nzSecondStep]="i.secondStep"\n                  [nzPopupClassName]="ui.popupClassName">\n  </nz-time-picker>\n\n</sf-item-wrap>\n',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],n}(Ce),He=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.list=[],t._data=[],t._canMove=function(e){return t.ui.canMove?t.ui.canMove(e):o.of(e.list)},t}return F(n,e),n.prototype.ngOnInit=function(){var e=this.ui,t=e.titles,n=e.operations,r=e.itemUnit,i=e.itemsUnit;this.i={titles:t||["",""],operations:n||["",""],itemUnit:r||"项",itemsUnit:i||"项"}},n.prototype.reset=function(e){var t=this;J(this.schema,this.ui,null).subscribe(function(n){var r=e;Array.isArray(r)||(r=[r]),n.forEach(function(e){~r.indexOf(e.value)&&(e.direction="right")}),t.list=n,t._data=n.filter(function(e){return"right"===e.direction}),t.notify(),t.detectChanges()})},n.prototype.notify=function(){this.formProperty.setValue(this._data.map(function(e){return e.value}),!1)},n.prototype._change=function(e){var t;"right"===e.to?this._data=(t=this._data).concat.apply(t,$(e.list)):this._data=this._data.filter(function(t){return-1===e.list.indexOf(t)}),this.ui.change&&this.ui.change(e),this.notify()},n.prototype._searchChange=function(e){this.ui.searchChange&&this.ui.searchChange(e),this.detectChanges()},n.prototype._selectChange=function(e){this.ui.selectChange&&this.ui.selectChange(e),this.detectChanges()},n.decorators=[{type:t.Component,args:[{selector:"sf-transfer",template:'<sf-item-wrap [id]="id"\n              [schema]="schema"\n              [ui]="ui"\n              [showError]="showError"\n              [error]="error"\n              [showTitle]="schema.title">\n\n  <nz-transfer [nzDataSource]="list"\n               [nzTitles]="i.titles"\n               [nzOperations]="i.operations"\n               [nzListStyle]="ui.listStyle"\n               [nzItemUnit]="i.itemUnit"\n               [nzItemsUnit]="i.itemsUnit"\n               [nzShowSearch]="ui.showSearch"\n               [nzFilterOption]="ui.filterOption"\n               [nzSearchPlaceholder]="ui.searchPlaceholder"\n               [nzNotFoundContent]="ui.notFoundContent"\n               [nzCanMove]="_canMove"\n               (nzChange)="_change($event)"\n               (nzSearchChange)="_searchChange($event)"\n               (nzSelectChange)="_selectChange($event)">\n  </nz-transfer>\n\n</sf-item-wrap>\n',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],n}(Ce),Ue=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=[],t}return F(n,e),n.prototype.ngOnInit=function(){var e=this.ui;this.i={allowClear:e.allowClear,showSearch:U(e.showSearch,!1),dropdownMatchSelectWidth:U(e.dropdownMatchSelectWidth,!0),multiple:U(e.multiple,!1),checkable:U(e.checkable,!1),showExpand:U(e.showExpand,!0),showLine:U(e.showLine,!1),asyncData:"function"==typeof e.expandChange,defaultExpandAll:U(e.defaultExpandAll,!1),defaultExpandedKeys:e.defaultExpandedKeys||[],displayWith:e.displayWith||function(e){return e.title}}},n.prototype.reset=function(e){var t=this;J(this.schema,this.ui,e).subscribe(function(e){t.data=e,t.detectChanges()})},n.prototype.change=function(e){this.ui.change&&this.ui.change(e),this.setValue(e)},n.prototype.expandChange=function(e){var t=this,n=this.ui;"function"==typeof n.expandChange&&n.expandChange(e).subscribe(function(n){e.node.clearChildren(),e.node.addChildren(n),t.detectChanges()})},n.decorators=[{type:t.Component,args:[{selector:"sf-tree-select",template:'<sf-item-wrap [id]="id"\n              [schema]="schema"\n              [ui]="ui"\n              [showError]="showError"\n              [error]="error"\n              [showTitle]="schema.title">\n  <nz-tree-select [nzAllowClear]="i.allowClear"\n                  [nzPlaceHolder]="ui.placeholder"\n                  [nzDisabled]="disabled"\n                  [nzShowSearch]="i.showSearch"\n                  [nzDropdownMatchSelectWidth]="i.dropdownMatchSelectWidth"\n                  [nzDropdownStyle]="ui.dropdownStyle"\n                  [nzMultiple]="i.multiple"\n                  [nzSize]="ui.size"\n                  [nzCheckable]="i.checkable"\n                  [nzShowExpand]="i.showExpand"\n                  [nzShowLine]="i.showLine"\n                  [nzAsyncData]="i.asyncData"\n                  [nzNodes]="data"\n                  [nzDefaultExpandAll]="i.defaultExpandAll"\n                  [nzDefaultExpandedKeys]="i.defaultExpandedKeys"\n                  [nzDisplayWith]="i.displayWith"\n                  [ngModel]="value"\n                  (ngModelChange)="change($event)"\n                  (nzExpandChange)="expandChange($event)">\n  </nz-tree-select>\n\n</sf-item-wrap>\n',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],n}(Ce),Be=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.fileList=[],t.btnType="",t.handleRemove=function(){return t._setValue(t.fileList),!0},t.handlePreview=function(e){if(t.ui.preview)t.ui.preview(e);else{var n=e.thumbUrl||e.url;n&&t.injector.get(w.NzModalService).create({nzContent:'<img src="'+n+'" class="img-fluid" />',nzFooter:null})}},t}return F(n,e),n.prototype.ngOnInit=function(){var e=this.ui,t=e.type,n=e.text,r=e.action,i=e.accept,o=e.limit,a=e.filter,s=e.fileSize,l=e.fileType,u=e.listType,p=e.multiple,c=e.name,h=e.showUploadList,d=e.withCredentials,f=e.resReName,m=e.urlReName,g=e.beforeUpload,y=e.customRequest,z=e.directory,b=e.openFileDialogOnClick;this.i={type:t||"select",text:n||"点击上传",action:r||"",accept:i||"",directory:U(z,!1),openFileDialogOnClick:U(b,!0),limit:null==o?0:+o,filter:null==a?[]:a,size:null==s?0:+s,fileType:l||"",listType:u||"text",multiple:U(p,!1),name:c||"file",showUploadList:U(h,!0),withCredentials:U(d,!1),resReName:(f||"").split("."),urlReName:(m||"").split("."),beforeUpload:"function"==typeof g?g:null,customRequest:"function"==typeof y?y:null},"picture-card"===this.i.listType&&(this.btnType="plus"),"drag"===this.i.type&&(this.i.listType=null,this.btnType="drag",this.i.text=this.ui.text||"单击或拖动文件到该区域上传",this.i.hint=this.ui.hint||"支持单个或批量，严禁上传公司数据或其他安全文件")},n.prototype.change=function(e){this.ui.change&&this.ui.change(e),"success"===e.type&&this._setValue(e.fileList)},n.prototype.reset=function(e){var t=this,n=this.ui.fileList;(n?o.of(n):Array.isArray(e)?o.of(e):J(this.schema,this.ui,null)).subscribe(function(e){t.fileList=e,t._setValue(t.fileList),t.detectChanges()})},n.prototype._getValue=function(e){return i.deepGet(e.response,this.i.resReName,e.response)},n.prototype._setValue=function(e){var t=this;e.filter(function(e){return!e.url}).forEach(function(e){e.url=i.deepGet(e.response,t.i.urlReName)});var n=e.filter(function(e){return"done"===e.status}).map(function(e){return t._getValue(e)});this.setValue(!0===this.i.multiple?n:n.pop())},n.decorators=[{type:t.Component,args:[{selector:"sf-upload",template:'<sf-item-wrap [id]="id"\n              [schema]="schema"\n              [ui]="ui"\n              [showError]="showError"\n              [error]="error"\n              [showTitle]="schema.title">\n  <nz-upload [nzType]="i.type"\n             [(nzFileList)]="fileList"\n             [nzDisabled]="disabled"\n             [nzAction]="i.action"\n             [nzDirectory]="i.directory"\n             [nzOpenFileDialogOnClick]="i.openFileDialogOnClick"\n             [nzAccept]="i.accept"\n             [nzLimit]="i.limit"\n             [nzFilter]="i.filter"\n             [nzSize]="i.size"\n             [nzFileType]="i.fileType"\n             [nzHeaders]="ui.headers"\n             [nzData]="ui.data"\n             [nzListType]="i.listType"\n             [nzMultiple]="i.multiple"\n             [nzName]="i.name"\n             [nzShowUploadList]="i.showUploadList"\n             [nzWithCredentials]="i.withCredentials"\n             [nzBeforeUpload]="i.beforeUpload"\n             [nzCustomRequest]="i.customRequest"\n             [nzRemove]="ui.remove || handleRemove"\n             [nzPreview]="handlePreview"\n             (nzChange)="change($event)">\n    <ng-container [ngSwitch]="btnType">\n      <ng-container *ngSwitchCase="\'plus\'">\n        <i nz-icon nzType="plus"></i>\n        <div class="ant-upload-text"\n             [innerHTML]="i.text"></div>\n      </ng-container>\n      <ng-container *ngSwitchCase="\'drag\'">\n        <p class="ant-upload-drag-icon"><i nz-icon nzType="inbox"></i></p>\n        <p class="ant-upload-text"\n           [innerHTML]="i.text"></p>\n        <p class="ant-upload-hint"\n           [innerHTML]="i.hint"></p>\n      </ng-container>\n      <ng-container *ngSwitchDefault>\n        <button type="button"\n                nz-button>\n          <i nz-icon nzType="upload"></i><span [innerHTML]="i.text"></span>\n        </button>\n      </ng-container>\n    </ng-container>\n  </nz-upload>\n</sf-item-wrap>\n',preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],n}(Ce),Ye=function(e){function t(){var t=e.call(this)||this;return t.register("object",ke),t.register("array",Se),t.register("text",$e),t.register("string",Le),t.register("number",Te),t.register("integer",Te),t.register("date",Ie),t.register("time",qe),t.register("radio",Fe),t.register("checkbox",Pe),t.register("boolean",Oe),t.register("textarea",Re),t.register("select",Ae),t.register("tree-select",Ue),t.register("tag",We),t.register("upload",Be),t.register("transfer",He),t.register("slider",je),t.register("rate",Ne),t.register("autocomplete",Ve),t.register("cascader",Ee),t.register("mention",Me),t.register("custom",De),t.setDefault(Le),t}return F(t,e),t}(ce),Ge=[u.NzAutocompleteModule,p.NzButtonModule,c.NzCardModule,h.NzCascaderModule,d.NzCheckboxModule,f.NzDatePickerModule,m.NzFormModule,g.NzGridModule,y.NzIconModule,z.NzInputModule,b.NzInputNumberModule,v.NzMentionModule,w.NzModalModule,C.NzRadioModule,_.NzRateModule,x.NzSelectModule,S.NzSliderModule,V.NzSwitchModule,O.NzTagModule,E.NzTimePickerModule,P.NzToolTipModule,D.NzTransferModule,I.NzTreeSelectModule,M.NzUploadModule],Ke=[fe,ge,ze,be,ye],Xe=[ke,Se,Le,Te,Ie,qe,Fe,Pe,Oe,Re,Ae,Ue,We,Be,He,je,Ne,Ve,Ee,Me,De,$e],Ze=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[{provide:ue,useClass:pe},{provide:ce,useClass:Ye}]}},e.decorators=[{type:t.NgModule,args:[{imports:$([s.CommonModule,l.FormsModule,i.DelonUtilModule,r.DelonLocaleModule],Ge),declarations:$(Ke,Xe),entryComponents:$(Xe),exports:$(Ke)}]}],e}();e.AjvSchemaValidatorFactory=pe,e.ArrayLayoutWidget=_e,e.ArrayProperty=te,e.ArrayWidget=Se,e.AtomicProperty=ne,e.AutoCompleteWidget=Ve,e.BooleanProperty=re,e.BooleanWidget=Oe,e.CascaderWidget=Ee,e.CheckboxWidget=Pe,e.ControlUIWidget=Ce,e.ControlWidget=we,e.CustomWidget=De,e.DateWidget=Ie,e.DelonFormConfig=R,e.DelonFormModule=Ze,e.ERRORSDEFAULT={"false schema":"布尔模式出错",$ref:"无法找到引用{ref}",additionalItems:"不允许超过{ref}",additionalProperties:"不允许有额外的属性",anyOf:"数据应为 anyOf 所指定的其中一个",dependencies:"应当拥有属性{property}的依赖属性{deps}","enum":"应当是预设定的枚举值之一",format:"格式不正确",type:"类型应当是 {type}",required:"必填项",maxLength:"至多 {limit} 个字符",minLength:"至少 {limit} 个字符以上",minimum:"必须 {comparison}{limit}",formatMinimum:"必须 {comparison}{limit}",maximum:"必须 {comparison}{limit}",formatMaximum:"必须 {comparison}{limit}",maxItems:"不应多于 {limit} 个项",minItems:"不应少于 {limit} 个项",maxProperties:"不应多于 {limit} 个属性",minProperties:"不应少于 {limit} 个属性",multipleOf:"应当是 {multipleOf} 的整数倍",not:'不应当匹配 "not" schema',oneOf:'只能匹配一个 "oneOf" 中的 schema',pattern:"数据格式不正确",uniqueItems:"不应当含有重复项 (第 {j} 项与第 {i} 项是重复的)",custom:"格式不正确",propertyNames:'属性名 "{propertyName}" 无效',patternRequired:"应当有属性匹配模式 {missingPattern}","switch":'由于 {caseIndex} 失败，未通过 "switch" 校验',"const":"应当等于常量",contains:"应当包含一个有效项",formatExclusiveMaximum:"formatExclusiveMaximum 应当是布尔值",formatExclusiveMinimum:"formatExclusiveMinimum 应当是布尔值","if":'应当匹配模式 "{failingKeyword}"'},e.FormProperty=Q,e.FormPropertyFactory=se,e.MentionWidget=Me,e.NumberProperty=ie,e.NumberWidget=Te,e.NzWidgetRegistry=Ye,e.ObjectLayoutWidget=xe,e.ObjectProperty=oe,e.ObjectWidget=ke,e.PropertyGroup=ee,e.RadioWidget=Fe,e.RateWidget=Ne,e.SFComponent=fe,e.SFFixedDirective=ye,e.SFItemComponent=ge,e.SchemaValidatorFactory=ue,e.SelectWidget=Ae,e.SliderWidget=je,e.StringProperty=ae,e.StringWidget=Le,e.TagWidget=We,e.TextWidget=$e,e.TextareaWidget=Re,e.TimeWidget=qe,e.TransferWidget=He,e.TreeSelectWidget=Ue,e.UploadWidget=Be,e.Widget=ve,e.WidgetFactory=he,e.WidgetRegistry=ce,e.useFactory=de,e.ɵa=le,e.ɵb=ze,e.ɵc=be,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=form.umd.min.js.map