/**
 * @license ng-alain(cipchk@qq.com) v11.10.2
 * (c) 2020 cipchk https://ng-alain.com/
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/platform-browser"),require("@delon/util/config"),require("@delon/util/date-time"),require("@delon/util/decorator"),require("@delon/util/other"),require("@angular/common"),require("ng-zorro-antd/date-picker"),require("rxjs")):"function"==typeof define&&define.amd?define("@delon/abc/date-picker",["exports","@angular/core","@angular/forms","@angular/platform-browser","@delon/util/config","@delon/util/date-time","@delon/util/decorator","@delon/util/other","@angular/common","ng-zorro-antd/date-picker","rxjs"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).delon=e.delon||{},e.delon.abc=e.delon.abc||{},e.delon.abc["date-picker"]={}),e.ng.core,e.ng.forms,e.ng.platformBrowser,e.config,e.dateTime,e.decorator,e.other,e.ng.common,e["ng-zorro-antd/date-picker"],e.rxjs)}(this,(function(e,t,n,o,r,i,a,s,l,c,u){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */Object.create;function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a}Object.create;var d=function(){function e(e,n){this.dom=e,this.value=[],this.ngModelEndChange=new t.EventEmitter,this.nzAllowClear=!0,this.nzAutoFocus=!1,this.nzSize="default",this.nzOnOpenChange=new t.EventEmitter,this.nzShowToday=!0,this.nzOnPanelChange=new t.EventEmitter,this.nzOnOk=new t.EventEmitter;var o=n.merge("dataRange",{nzFormat:"yyyy-MM-dd",nzAllowClear:!0,nzAutoFocus:!1,nzPopupStyle:{position:"relative"},nzShowToday:!0,shortcuts:{enabled:!1,closed:!0,list:[{text:"今天",fn:function(){return i.getTimeDistance("today")}},{text:"昨天",fn:function(){return i.getTimeDistance("yesterday")}},{text:"近3天",fn:function(){return i.getTimeDistance(-2)}},{text:"近7天",fn:function(){return i.getTimeDistance(-6)}},{text:"本周",fn:function(){return i.getTimeDistance("week")}},{text:"本月",fn:function(){return i.getTimeDistance("month")}},{text:"全年",fn:function(){return i.getTimeDistance("year")}}]}});this.defaultShortcuts=Object.assign({},o.shortcuts),Object.assign(this,o)}return Object.defineProperty(e.prototype,"shortcut",{get:function(){return this._shortcut},set:function(e){var t=this,n=s.deepMergeKey({},!0,this.defaultShortcuts,null==e?{}:e);"boolean"==typeof e&&(n.enabled=e),(n.list||[]).forEach((function(e){e._text=t.dom.bypassSecurityTrustHtml(e.text)})),this._shortcut=n},enumerable:!1,configurable:!0}),e.prototype._nzOnOpenChange=function(e){this.nzOnOpenChange.emit(e)},e.prototype._nzOnPanelChange=function(e){this.nzOnPanelChange.emit(e)},e.prototype._nzOnOk=function(e){this.nzOnOk.emit(e)},e.prototype.valueChange=function(e){e=i.fixEndTimeOfRange(e),this.onChangeFn(e[0]),this.ngModelEnd=e[1],this.ngModelEndChange.emit(e[1])},e.prototype.writeValue=function(e){this.value=e&&this.ngModelEnd?[e,this.ngModelEnd]:[]},e.prototype.registerOnChange=function(e){this.onChangeFn=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.nzDisabled=e},e.prototype.clickShortcut=function(e){this.value=e.fn(this.value),this.valueChange(this.value),this._shortcut.closed&&this.comp.picker.hideOverlay()},e}();d.decorators=[{type:t.Component,args:[{selector:"range-picker",exportAs:"rangePicker",template:'<nz-range-picker\n  #comp\n  [ngModel]="value"\n  (ngModelChange)="valueChange($event)"\n  [nzAllowClear]="nzAllowClear"\n  [nzAutoFocus]="nzAutoFocus"\n  [ngClass]="nzClassName"\n  [nzDisabled]="nzDisabled"\n  [nzSize]="nzSize"\n  [nzDisabledDate]="nzDisabledDate"\n  [nzLocale]="nzLocale"\n  [nzPopupStyle]="nzPopupStyle"\n  [nzDropdownClassName]="nzDropdownClassName"\n  [ngStyle]="nzStyle"\n  [nzPlaceHolder]="nzPlaceHolder"\n  (nzOnOpenChange)="_nzOnOpenChange($event)"\n  [nzDateRender]="nzDateRender"\n  [nzDisabledTime]="nzDisabledTime"\n  [nzFormat]="nzFormat"\n  [nzRenderExtraFooter]="nzRenderExtraFooter || (shortcut?.enabled ? shortcutTpl : null)"\n  [nzShowTime]="nzShowTime"\n  [nzShowToday]="nzShowToday"\n  [nzMode]="nzMode"\n  [nzRanges]="nzRanges"\n  (nzOnPanelChange)="_nzOnPanelChange($event)"\n  (nzOnOk)="_nzOnOk($event)"\n></nz-range-picker>\n<ng-template #shortcutTpl>\n  <a *ngFor="let i of shortcut?.list; let first = first" (click)="clickShortcut(i)" [innerHTML]="i._text" [ngClass]="{ \'ml-sm\': !first }"></a>\n</ng-template>\n',providers:[{provide:n.NG_VALUE_ACCESSOR,multi:!0,useExisting:t.forwardRef((function(){return d}))}]}]}],d.ctorParameters=function(){return[{type:o.DomSanitizer},{type:r.AlainConfigService}]},d.propDecorators={comp:[{type:t.ViewChild,args:["comp",{static:!1}]}],ngModelEnd:[{type:t.Input}],shortcut:[{type:t.Input}],ngModelEndChange:[{type:t.Output}],nzAllowClear:[{type:t.Input}],nzAutoFocus:[{type:t.Input}],nzClassName:[{type:t.Input}],nzDisabled:[{type:t.Input}],nzSize:[{type:t.Input}],nzStyle:[{type:t.Input}],nzDisabledDate:[{type:t.Input}],nzLocale:[{type:t.Input}],nzPopupStyle:[{type:t.Input}],nzDropdownClassName:[{type:t.Input}],nzPlaceHolder:[{type:t.Input}],nzOnOpenChange:[{type:t.Output}],nzDateRender:[{type:t.Input}],nzFormat:[{type:t.Input}],nzDisabledTime:[{type:t.Input}],nzRenderExtraFooter:[{type:t.Input}],nzShowTime:[{type:t.Input}],nzShowToday:[{type:t.Input}],nzMode:[{type:t.Input}],nzRanges:[{type:t.Input}],nzOnPanelChange:[{type:t.Output}],nzOnOk:[{type:t.Output}]},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);i>3&&a&&Object.defineProperty(t,n,a)}([a.InputBoolean(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:type",Boolean)],d.prototype,"nzShowToday",void 0);var h=function(){function e(){this.list=[]}return e.prototype.click=function(e){},e}();h.decorators=[{type:t.Component,args:[{selector:"",template:'\n    <ng-template #tpl>\n      <a *ngFor="let i of list; let first = first" (click)="click(i)" [innerHTML]="i._text" [ngClass]="{ \'ml-sm\': !first }"></a>\n    </ng-template>\n  '}]}],h.propDecorators={tpl:[{type:t.ViewChild,args:["tpl",{static:!0}]}]};var f=function(){function e(e,n,o,r,a){this.dom=e,this.nativeComp=o,this.resolver=r,this.injector=a,this.destroy$=new u.Subject,this.shortcutFactory=null,this.start=null,this.end=null,this.ngModelEndChange=new t.EventEmitter,s.assert(!!o,'It should be attached to nz-range-picker component, for example: \'<nz-range-picker [(ngModel)]="i.start" extend [(ngModelEnd)]="i.end" shortcut></nz-range-picker>\'');var l=n.merge("dataRange",{nzFormat:"yyyy-MM-dd",nzAllowClear:!0,nzAutoFocus:!1,nzPopupStyle:{position:"relative"},nzShowToday:!0,shortcuts:{enabled:!1,closed:!0,list:[{text:"今天",fn:function(){return i.getTimeDistance("today")}},{text:"昨天",fn:function(){return i.getTimeDistance("yesterday")}},{text:"近3天",fn:function(){return i.getTimeDistance(-2)}},{text:"近7天",fn:function(){return i.getTimeDistance(-6)}},{text:"本周",fn:function(){return i.getTimeDistance("week")}},{text:"本月",fn:function(){return i.getTimeDistance("month")}},{text:"全年",fn:function(){return i.getTimeDistance("year")}}]}});this.defaultShortcuts=Object.assign({},l.shortcuts),Object.assign(this,l)}return Object.defineProperty(e.prototype,"shortcut",{get:function(){return this._shortcut},set:function(e){var t=this,n=s.deepMergeKey({list:[]},!0,this.defaultShortcuts,null==e?{}:e);"object"!=typeof e&&(n.enabled=!1!==e),(n.list||[]).forEach((function(e){e._text=t.dom.bypassSecurityTrustHtml(e.text)})),this._shortcut=n,this.refreshShortcut()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dp",{get:function(){return this.nativeComp.datePicker},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"srv",{get:function(){return this.dp.datePickerService},enumerable:!1,configurable:!0}),e.prototype.cd=function(){this.dp.cdr.markForCheck()},e.prototype.overrideNative=function(){var e=this,t=this.dp;t.writeValue=function(t){var n=(t&&e.ngModelEnd?[t,e.ngModelEnd]:[]).filter((function(e){return!!e}));e.srv.setValue(e.srv.makeValue(n)),e.start=n.length>0?n[0]:null,e.end=n.length>0?n[1]:null,e.cd()};var n=t.onChangeFn;t.onChangeFn=function(t){var o,r=null,a=null;t.length>0&&2===t.filter((function(e){return null!=e})).length&&(r=(o=p(i.fixEndTimeOfRange([t[0],t[1]]),2))[0],a=o[1]),e.start=r,e.end=a,n(r),e.ngModelEnd=a,e.ngModelEndChange.emit(a)}},e.prototype.refreshShortcut=function(){var e=this;if(this._shortcut){var t,n=this._shortcut,o=n.enabled,r=n.list;if(this.nativeComp&&o){if(!this.shortcutFactory){var i=this.resolver.resolveComponentFactory(h);this.shortcutFactory=i.create(this.injector)}var a=this.shortcutFactory.instance;a.list=r,a.click=function(t){var n=t.fn([e.start,e.end]);e.srv.setValue(e.srv.makeValue(n)),e.dp.onChangeFn(n),e.dp.close()},t=a.tpl}else t=void 0;this.nativeComp.datePicker.extraFooter=t,Promise.resolve().then((function(){return e.cd()}))}},e.prototype.ngAfterViewInit=function(){this.overrideNative(),this.refreshShortcut()},e.prototype.destoryShortcut=function(){null!=this.shortcutFactory&&this.shortcutFactory.destroy()},e.prototype.ngOnDestroy=function(){this.destoryShortcut(),this.destroy$.next(),this.destroy$.complete()},e}();f.decorators=[{type:t.Directive,args:[{selector:"nz-range-picker[extend]",exportAs:"extendRangePicker"}]}],f.ctorParameters=function(){return[{type:o.DomSanitizer},{type:r.AlainConfigService},{type:c.NzRangePickerComponent,decorators:[{type:t.Host},{type:t.Optional}]},{type:t.ComponentFactoryResolver},{type:t.Injector}]},f.propDecorators={shortcut:[{type:t.Input}],ngModelEnd:[{type:t.Input}],ngModelEndChange:[{type:t.Output}]};var g=[d,f,h],y=function(){};y.decorators=[{type:t.NgModule,args:[{imports:[l.CommonModule,n.FormsModule,c.NzDatePickerModule],declarations:g,exports:g}]}],e.DatePickerModule=y,e.RangePickerComponent=d,e.RangePickerDirective=f,e.ɵa=h,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=datePicker.umd.min.js.map