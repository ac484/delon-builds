{"version":3,"sources":["../../../../packages/abc/exception/exception.component.ts","../../../../packages/abc/exception/exception.module.ts"],"names":["ExceptionComponent","i18n","dom","directionality","this","destroy$","Subject","locale","hasCon","dir","_img","_title","_desc","Object","defineProperty","prototype","value","item","img","title","fixImg","_type","src","bypassSecurityTrustStyle","bypassSecurityTrustHtml","checkContent","isEmpty","conTpl","nativeElement","ngOnInit","_this","_a","change","pipe","takeUntil","subscribe","direction","getData","ngOnDestroy","next","complete","Component","args","selector","exportAs","template","host","preserveWhitespaces","changeDetection","ChangeDetectionStrategy","OnPush","encapsulation","ViewEncapsulation","None","DelonLocaleService","DomSanitizer","Directionality","decorators","type","Optional","ViewChild","static","Input","COMPONENTS","NgModule","imports","CommonModule","RouterModule","DelonLocaleModule","NzButtonModule","declarations","exports"],"mappings":"k8BA+FE,SAAAA,EAAoBC,EAAkCC,EAAuCC,GAAzEC,KAAAH,KAAAA,EAAkCG,KAAAF,IAAAA,EAAuCE,KAAAD,eAAAA,EA5DrFC,KAAAC,SAAW,IAAIC,EAAAA,QAIvBF,KAAAG,OAAqB,GACrBH,KAAAI,QAAS,EACTJ,KAAAK,IAAiB,MAEjBL,KAAAM,KAAgB,GAChBN,KAAAO,OAAmB,GACnBP,KAAAQ,MAAkB,UAElBC,OAAAC,eACId,EAAAe,UAAA,OAAI,KADR,SACSC,GACP,IAAMC,EAAuC,CAC3C,IAAK,CACHC,IAAK,sEACLC,MAAO,OAET,IAAK,CACHD,IAAK,sEACLC,MAAO,OAET,IAAK,CACHD,IAAK,sEACLC,MAAO,QAETH,GAEGC,IAELb,KAAKgB,OAAOH,EAAKC,KACjBd,KAAKiB,MAAQL,EACbZ,KAAKO,OAASM,EAAKE,MACnBf,KAAKQ,MAAQ,qCAGPZ,EAAAe,UAAAK,OAAA,SAAOE,GACblB,KAAKM,KAAON,KAAKF,IAAIqB,yBAAyB,QAAQD,EAAG,OAG3DT,OAAAC,eACId,EAAAe,UAAA,MAAG,KADP,SACQC,GACNZ,KAAKgB,OAAOJ,oCAGdH,OAAAC,eACId,EAAAe,UAAA,QAAK,KADT,SACUC,GACRZ,KAAKO,OAASP,KAAKF,IAAIsB,wBAAwBR,oCAGjDH,OAAAC,eACId,EAAAe,UAAA,OAAI,KADR,SACSC,GACPZ,KAAKQ,MAAQR,KAAKF,IAAIsB,wBAAwBR,oCAGhDhB,EAAAe,UAAAU,aAAA,WACErB,KAAKI,QAAUkB,EAAAA,QAAQtB,KAAKuB,OAAOC,gBAKrC5B,EAAAe,UAAAc,SAAA,WAAA,MAAAC,EAAA1B,KACEA,KAAKK,IAAML,KAAKD,eAAea,MACL,QAA1Be,EAAA3B,KAAKD,eAAe6B,cAAM,IAAAD,GAAAA,EAAEE,KAAKC,EAAAA,UAAU9B,KAAKC,WAAW8B,WAAU,SAACC,GACpEN,EAAKrB,IAAM2B,KAEbhC,KAAKH,KAAK+B,OAAOC,KAAKC,EAAAA,UAAU9B,KAAKC,WAAW8B,WAAU,WAAM,OAACL,EAAKvB,OAASuB,EAAK7B,KAAKoC,QAAQ,gBACjGjC,KAAKqB,gBAGPzB,EAAAe,UAAAuB,YAAA,WACElC,KAAKC,SAASkC,OACdnC,KAAKC,SAASmC,qCAxFjBC,EAAAA,UAASC,KAAA,CAAC,CACTC,SAAU,YACVC,SAAU,YACVC,SAAA,0jBACAC,KAAM,CACJ,oBAAqB,OACrB,wBAAyB,iBAE3BC,qBAAqB,EACrBC,gBAAiBC,EAAAA,wBAAwBC,OACzCC,cAAeC,EAAAA,kBAAkBC,kDAjB1BC,EAAAA,0BADAC,EAAAA,oBAZWC,EAAAA,eAAcC,WAAA,CAAA,CAAAC,KA+F0CC,EAAAA,8CA3DzEC,EAAAA,UAASlB,KAAA,CAAC,SAAU,CAAEmB,QAAQ,kBAW9BC,EAAAA,mBA6BAA,EAAAA,qBAKAA,EAAAA,oBAKAA,EAAAA,SC9EH,IAAMC,EAAa,CAAC/D,KAOpB,iCALCgE,EAAAA,SAAQtB,KAAA,CAAC,CACRuB,QAAS,CAACC,EAAAA,aAAcC,EAAAA,aAAcC,EAAAA,kBAAmBC,EAAAA,gBACzDC,aAAcP,EACdQ,QAASR","sourcesContent":["import { Direction, Directionality } from '@angular/cdk/bidi';\nimport {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  Input,\n  OnDestroy,\n  OnInit,\n  Optional,\n  ViewChild,\n  ViewEncapsulation,\n} from '@angular/core';\nimport { DomSanitizer, SafeHtml, SafeUrl } from '@angular/platform-browser';\nimport { DelonLocaleService, LocaleData } from '@delon/theme';\nimport { isEmpty } from '@delon/util/browser';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nexport type ExceptionType = 403 | 404 | 500;\n\n@Component({\n  selector: 'exception',\n  exportAs: 'exception',\n  templateUrl: './exception.component.html',\n  host: {\n    '[class.exception]': 'true',\n    '[class.exception-rtl]': `dir === 'rtl'`,\n  },\n  preserveWhitespaces: false,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n})\nexport class ExceptionComponent implements OnInit, OnDestroy {\n  static ngAcceptInputType_type: ExceptionType | string;\n\n  private destroy$ = new Subject<void>();\n  @ViewChild('conTpl', { static: true }) private conTpl: ElementRef;\n\n  _type: ExceptionType;\n  locale: LocaleData = {};\n  hasCon = false;\n  dir: Direction = 'ltr';\n\n  _img: SafeUrl = '';\n  _title: SafeHtml = '';\n  _desc: SafeHtml = '';\n\n  @Input()\n  set type(value: ExceptionType) {\n    const item: { img: string; title: string } = {\n      403: {\n        img: 'https://gw.alipayobjects.com/zos/rmsportal/wZcnGqRDyhPOEYFcZDnb.svg',\n        title: '403',\n      },\n      404: {\n        img: 'https://gw.alipayobjects.com/zos/rmsportal/KpnpchXsobRgLElEozzI.svg',\n        title: '404',\n      },\n      500: {\n        img: 'https://gw.alipayobjects.com/zos/rmsportal/RVRUAYdCGeYNBWoKiIwB.svg',\n        title: '500',\n      },\n    }[value];\n\n    if (!item) return;\n\n    this.fixImg(item.img);\n    this._type = value;\n    this._title = item.title;\n    this._desc = '';\n  }\n\n  private fixImg(src: string): void {\n    this._img = this.dom.bypassSecurityTrustStyle(`url('${src}')`);\n  }\n\n  @Input()\n  set img(value: string) {\n    this.fixImg(value);\n  }\n\n  @Input()\n  set title(value: string) {\n    this._title = this.dom.bypassSecurityTrustHtml(value);\n  }\n\n  @Input()\n  set desc(value: string) {\n    this._desc = this.dom.bypassSecurityTrustHtml(value);\n  }\n\n  checkContent(): void {\n    this.hasCon = !isEmpty(this.conTpl.nativeElement);\n  }\n\n  constructor(private i18n: DelonLocaleService, private dom: DomSanitizer, @Optional() private directionality: Directionality) {}\n\n  ngOnInit(): void {\n    this.dir = this.directionality.value;\n    this.directionality.change?.pipe(takeUntil(this.destroy$)).subscribe((direction: Direction) => {\n      this.dir = direction;\n    });\n    this.i18n.change.pipe(takeUntil(this.destroy$)).subscribe(() => (this.locale = this.i18n.getData('exception')));\n    this.checkContent();\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { DelonLocaleModule } from '@delon/theme';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\n\nimport { ExceptionComponent } from './exception.component';\n\nconst COMPONENTS = [ExceptionComponent];\n\n@NgModule({\n  imports: [CommonModule, RouterModule, DelonLocaleModule, NzButtonModule],\n  declarations: COMPONENTS,\n  exports: COMPONENTS,\n})\nexport class ExceptionModule {}\n"]}