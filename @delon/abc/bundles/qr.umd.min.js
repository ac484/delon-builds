/**
 * @license ng-alain(cipchk@qq.com) v9.1.0
 * (c) 2020 cipchk https://ng-alain.com/
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@delon/util"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("@delon/abc/qr",["exports","@angular/core","@delon/util","rxjs/operators","@angular/common"],t):t(((e=e||self).delon=e.delon||{},e.delon.abc=e.delon.abc||{},e.delon.abc.qr={}),e.ng.core,e.delon.util,e.rxjs.operators,e.ng.common)}(this,(function(e,t,n,r,o){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function i(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function a(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function s(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e}var p={lib:"https://cdn.bootcdn.net/ajax/libs/qrious/4.0.2/qrious.min.js",background:"white",backgroundAlpha:1,foreground:"black",foregroundAlpha:1,level:"L",mime:"image/png",padding:10,size:220},l=function(){function e(e,n,r){this.cdr=e,this.lazySrv=r,this.inited=!1,this.change=new t.EventEmitter,this.delay=100,this.cog=n.merge("qr",p),Object.assign(this,this.cog)}return e.prototype.init=function(){this.inited&&(null==this.qr&&(this.qr=new window.QRious),this.qr.set(this.option),this.dataURL=this.qr.toDataURL(),this.change.emit(this.dataURL),this.cdr.detectChanges())},e.prototype.initDelay=function(){var e=this;this.inited=!0,setTimeout((function(){return e.init()}),this.delay)},e.prototype.ngAfterViewInit=function(){var e=this;if(window.QRious)this.initDelay();else{var t=this.cog.lib;this.lazy$=this.lazySrv.change.pipe(r.filter((function(e){return 1===e.length&&e[0].path===t&&"ok"===e[0].status}))).subscribe((function(){return e.initDelay()})),this.lazySrv.load(t)}},e.prototype.ngOnChanges=function(){var e={background:this.background,backgroundAlpha:this.backgroundAlpha,foreground:this.foreground,foregroundAlpha:this.foregroundAlpha,level:this.level,mime:this.mime,padding:this.padding,size:this.size,value:this.toUtf8ByteArray(this.value)};this.option=e,this.init()},e.prototype.toUtf8ByteArray=function(e){if(null==e)return"";e=encodeURI(e);for(var t=[],n=0;n<e.length;n++)"%"!==e.charAt(n)?t.push(e.charCodeAt(n)):(t.push(parseInt(e.substr(n+1,2),16)),n+=2);return t.map((function(e){return String.fromCharCode(e)})).join("")},e.prototype.ngOnDestroy=function(){this.lazy$.unsubscribe()},e.decorators=[{type:t.Component,args:[{selector:"qr",exportAs:"qr",template:' <img style="max-width: 100%; max-height: 100%;" [src]="dataURL" /> ',host:{"[style.display]":"'inline-block'","[style.height.px]":"size","[style.width.px]":"size"},preserveWhitespaces:!1,changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:n.AlainConfigService},{type:n.LazyService}]},e.propDecorators={background:[{type:t.Input}],backgroundAlpha:[{type:t.Input}],foreground:[{type:t.Input}],foregroundAlpha:[{type:t.Input}],level:[{type:t.Input}],mime:[{type:t.Input}],padding:[{type:t.Input}],size:[{type:t.Input}],value:[{type:t.Input}],change:[{type:t.Output}],delay:[{type:t.Input}]},i([n.InputNumber(),a("design:type",Number)],e.prototype,"padding",void 0),i([n.InputNumber(),a("design:type",Number)],e.prototype,"size",void 0),i([n.InputNumber(),a("design:type",Object)],e.prototype,"delay",void 0),e}();var c=[l],d=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[o.CommonModule,n.DelonUtilModule],declarations:s(c),exports:s(c)}]}],e}();e.QRComponent=l,e.QRModule=d,e.QR_DEFULAT_CONFIG=p,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=qr.umd.min.js.map