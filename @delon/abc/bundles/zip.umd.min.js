/**
 * @license ng-alain(cipchk@qq.com) v11.3.1
 * (c) 2020 cipchk https://ng-alain.com/
 * License: MIT
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core"),require("file-saver"),require("@angular/common/http"),require("@delon/util/other"),require("@delon/util/config"),require("@angular/common")):"function"==typeof define&&define.amd?define("@delon/abc/zip",["exports","@angular/core","file-saver","@angular/common/http","@delon/util/other","@delon/util/config","@angular/common"],n):n(((e="undefined"!=typeof globalThis?globalThis:e||self).delon=e.delon||{},e.delon.abc=e.delon.abc||{},e.delon.abc.zip={}),e.ng.core,e.saveAs,e.ng.common.http,e.i2,e.i3,e.ng.common)}(this,(function(e,n,t,o,i,r,u){"use strict";var c=function(){function e(e,n,t,o){this.http=e,this.lazy=n,this.ngZone=o,this.cog=t.merge("zip",{url:"//cdn.bootcss.com/jszip/3.3.0/jszip.min.js",utils:[]})}return e.prototype.init=function(){return this.lazy.load([this.cog.url].concat(this.cog.utils))},e.prototype.check=function(e){if(!e)throw new Error("get instance via `ZipService.create()`")},e.prototype.read=function(e,n){var t=this;return new Promise((function(o,i){var r=function(e){t.ngZone.run((function(){return o(e)}))};t.init().then((function(){t.ngZone.runOutsideAngular((function(){if("string"!=typeof e){var o=new FileReader;o.onload=function(e){JSZip.loadAsync(e.target.result,n).then((function(e){return r(e)}))},o.readAsBinaryString(e)}else t.http.request("GET",e,{responseType:"arraybuffer"}).subscribe((function(e){JSZip.loadAsync(e,n).then((function(e){return r(e)}))}),(function(e){i(e)}))}))}))}))},e.prototype.create=function(){var e=this;return new Promise((function(n){e.init().then((function(){var e=new JSZip;n(e)}))}))},e.prototype.pushUrl=function(e,n,t){var o=this;return this.check(e),new Promise((function(i,r){o.http.request("GET",t,{responseType:"arraybuffer"}).subscribe((function(t){e.file(n,t),i()}),(function(e){r({url:t,error:e})}))}))},e.prototype.save=function(e,n){this.check(e);var o=Object.assign({},n);return new Promise((function(n,i){e.generateAsync(Object.assign({type:"blob"},o.options),o.update).then((function(e){o.callback&&o.callback(e),t.saveAs(e,o.filename||"download.zip"),n()}),(function(e){i(e)}))}))},e}();c.ɵfac=function(e){return new(e||c)(n.ɵɵinject(o.HttpClient),n.ɵɵinject(i.LazyService),n.ɵɵinject(r.AlainConfigService),n.ɵɵinject(n.NgZone))},c.ɵprov=n.ɵɵdefineInjectable({token:c,factory:c.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(c,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:o.HttpClient},{type:i.LazyService},{type:r.AlainConfigService},{type:n.NgZone}]}),null);var a=function(){};a.ɵmod=n.ɵɵdefineNgModule({type:a}),a.ɵinj=n.ɵɵdefineInjector({factory:function(e){return new(e||a)},imports:[[u.CommonModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n.ɵɵsetNgModuleScope(a,{imports:[u.CommonModule]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(a,[{type:n.NgModule,args:[{imports:[u.CommonModule]}]}],null,null),e.ZipModule=a,e.ZipService=c,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=zip.umd.min.js.map