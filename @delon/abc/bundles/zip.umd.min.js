/**
 * @license ng-alain(cipchk@qq.com) v9.0.0-rc.3
 * (c) 2020 cipchk https://ng-alain.com/
 * License: MIT
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core"),require("@delon/util"),require("@angular/common/http"),require("@delon/theme"),require("file-saver"),require("@angular/common")):"function"==typeof define&&define.amd?define("@delon/abc/zip",["exports","@angular/core","@delon/util","@angular/common/http","@delon/theme","file-saver","@angular/common"],n):n(((e=e||self).delon=e.delon||{},e.delon.abc=e.delon.abc||{},e.delon.abc.zip={}),e.ng.core,e.delon.util,e.ng.common.http,e.delon.theme,e.saveAs,e.ng.common)}(this,(function(e,n,t,o,r,i,c){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var u=function(){return(u=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)};var a=function(){function e(){this.url="//cdn.bootcss.com/jszip/3.1.5/jszip.min.js",this.utils=[],t.deprecation10Cog("ZipConfig")}return e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();var s=function(){function e(e,n,t){this.http=e,this.lazy=n,this.cog=t.merge("zip",{url:"//cdn.bootcss.com/jszip/3.3.0/jszip.min.js",utils:[]})}return e.prototype.init=function(){return this.lazy.load([this.cog.url].concat(this.cog.utils))},e.prototype.check=function(e){if(!e)throw new Error("get instance via `ZipService.create()`")},e.prototype.read=function(e,n){var t=this;return new Promise((function(o,r){t.init().then((function(){if("string"!=typeof e){var i=new FileReader;i.onload=function(e){JSZip.loadAsync(e.target.result,n).then((function(e){return o(e)}))},i.readAsBinaryString(e)}else t.http.request("GET",e,{responseType:"arraybuffer"}).subscribe((function(e){JSZip.loadAsync(e,n).then((function(e){return o(e)}))}),(function(e){r(e)}))}))}))},e.prototype.create=function(){var e=this;return new Promise((function(n){e.init().then((function(){var e=new JSZip;n(e)}))}))},e.prototype.pushUrl=function(e,n,t){var o=this;return this.check(e),new Promise((function(r,i){o.http.request("GET",t,{responseType:"arraybuffer"}).subscribe((function(t){e.file(n,t),r()}),(function(e){i({url:t,error:e})}))}))},e.prototype.save=function(e,n){this.check(e);var t=u({},n);return new Promise((function(n,o){e.generateAsync(u({type:"blob"},t.options),t.update).then((function(e){t.callback&&t.callback(e),i.saveAs(e,t.filename||"download.zip"),n()}),(function(e){o(e)}))}))},e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:o.HttpClient},{type:t.LazyService},{type:r.AlainConfigService}]},e.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new e(n.ɵɵinject(o.HttpClient),n.ɵɵinject(t.LazyService),n.ɵɵinject(r.AlainConfigService))},token:e,providedIn:"root"}),e}();var p=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[c.CommonModule,t.DelonUtilModule]}]}],e}();e.ZipConfig=a,e.ZipModule=p,e.ZipService=s,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=zip.umd.min.js.map