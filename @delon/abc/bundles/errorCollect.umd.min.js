/**
 * @license ng-alain(cipchk@qq.com) v7.0.0-rc.3
 * (c) 2018 Cipchk https://ng-alain.com/
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@delon/util")):"function"==typeof define&&define.amd?define("@delon/abc/error-collect",["exports","@angular/common","@angular/core","@delon/util"],t):t((e.delon=e.delon||{},e.delon.abc=e.delon.abc||{},e.delon.abc["error-collect"]={}),e.ng.common,e.ng.core,e.delon.util)}(this,function(e,t,o,r){"use strict";function n(e,t,o,r){var n,i=arguments.length,c=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(c=(i<3?n(c):3<i?n(t,o,c):n(t,o))||c);return 3<i&&c&&Object.defineProperty(t,o,c),c}function i(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,n,i=o.call(e),c=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)c.push(r.value)}catch(l){n={error:l}}finally{try{r&&!r.done&&(o=i["return"])&&o.call(i)}finally{if(n)throw n.error}}return c}function l(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var u=function(){function e(){this.freq=500,this.offsetTop=145}return e.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=o.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),a=function(){function e(e,t,o,r){this.el=t,this.cdr=o,this.doc=r,this.$time=null,this._hiden=!0,this.count=0,Object.assign(this,e)}return Object.defineProperty(e.prototype,"errEls",{get:function(){return this.formEl.querySelectorAll(".has-error")},enumerable:!0,configurable:!0}),e.prototype.update=function(){var e=this.errEls.length;e!==this.count&&(this.count=e,this._hiden=0===e,this.cdr.markForCheck())},e.prototype._click=function(){if(0===this.count)return!1;var e=this.errEls;(this.findParent(e[0],"[nz-form-control]")||e[0]).scrollIntoView(!0),this.doc.documentElement.scrollTop-=this.offsetTop},e.prototype.install=function(){var e=this;this.uninstall(),this.$time=setInterval(function(){return e.update()},this.freq),this.update()},e.prototype.uninstall=function(){clearInterval(this.$time)},e.prototype.findParent=function(e,t){for(var o=null;e;){if(e.querySelector(t)){o=e;break}e=e.parentElement}return o},e.prototype.ngOnInit=function(){if(this.formEl=this.findParent(this.el.nativeElement,"form"),null===this.formEl)throw new Error("未找到有效 form 元素");this.install()},e.prototype.ngOnDestroy=function(){this.uninstall()},e.decorators=[{type:o.Component,args:[{selector:"error-collect, [error-collect]",template:'\n    <i nz-icon type="exclamation-circle"></i>\n    <span class="pl-sm">{{ count }}</span>\n  ',host:{"[class.error-collect]":"true"},changeDetection:o.ChangeDetectionStrategy.OnPush}]}],e.ctorParameters=function(){return[{type:u},{type:o.ElementRef},{type:o.ChangeDetectorRef},{type:undefined,decorators:[{type:o.Inject,args:[t.DOCUMENT]}]}]},e.propDecorators={freq:[{type:o.Input}],offsetTop:[{type:o.Input}],_hiden:[{type:o.HostBinding,args:["class.d-none"]}],_click:[{type:o.HostListener,args:["click"]}]},n([r.InputNumber(),i("design:type",Number)],e.prototype,"freq",void 0),n([r.InputNumber(),i("design:type",Number)],e.prototype,"offsetTop",void 0),e}(),s=[a],f=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{imports:[t.CommonModule,r.DelonUtilModule],declarations:l(s),exports:l(s)}]}],e}();e.ErrorCollectComponent=a,e.ErrorCollectConfig=u,e.ErrorCollectModule=f,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=errorCollect.umd.min.js.map