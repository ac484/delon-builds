/**
 * @license ng-alain(cipchk@qq.com) v11.3.1
 * (c) 2020 cipchk https://ng-alain.com/
 * License: MIT
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core"),require("@angular/common"),require("ng-zorro-antd/spin"),require("ng-zorro-antd/icon"),require("@angular/cdk/portal"),require("rxjs"),require("rxjs/operators"),require("@angular/cdk/overlay"),require("@delon/util"),require("@angular/cdk/bidi")):"function"==typeof define&&define.amd?define("@delon/abc/loading",["exports","@angular/core","@angular/common","ng-zorro-antd/spin","ng-zorro-antd/icon","@angular/cdk/portal","rxjs","rxjs/operators","@angular/cdk/overlay","@delon/util","@angular/cdk/bidi"],n):n(((e="undefined"!=typeof globalThis?globalThis:e||self).delon=e.delon||{},e.delon.abc=e.delon.abc||{},e.delon.abc.loading={}),e.ng.core,e.ng.common,e["ng-zorro-antd/spin"],e["ng-zorro-antd/icon"],e.ng.cdk.portal,e.rxjs,e.rxjs.operators,e.ng.cdk.overlay,e.delon.util,e.ng.cdk.bidi)}(this,(function(e,n,t,o,i,r,l,a,c,s,u){"use strict";function p(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})}})),n.default=e,Object.freeze(n)}var d=p(n),g=function(){function e(){this.dir="ltr"}return Object.defineProperty(e.prototype,"icon",{get:function(){return this.options.icon},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"custom",{get:function(){return this.options.custom},enumerable:!1,configurable:!0}),e}();g.ɵfac=function(e){return new(e||g)},g.ɵcmp=n.ɵɵngDeclareComponent({version:"11.1.1",type:g,selector:"loading-default",host:{properties:{"class.loading-default":"true","class.loading-default-rtl":"dir === 'rtl'"}},ngImport:d,template:'<div class="loading-default__icon" *ngIf="options.type !== \'text\'">\n  <ng-container [ngSwitch]="options.type">\n    <nz-spin *ngSwitchCase="\'spin\'" nzSimple></nz-spin>\n    <i *ngSwitchCase="\'icon\'" nz-icon [nzType]="icon.type" [nzTheme]="icon.theme" [nzSpin]="icon.spin"></i>\n    <div *ngSwitchDefault class="loading-default__custom" [ngStyle]="custom.style" [innerHTML]="custom.html"></div>\n  </ng-container>\n</div>\n<div *ngIf="options.text" class="loading-default__text">{{ options.text }}</div>\n',directives:[{type:t.NgIf,selector:"[ngIf]",inputs:["ngIf","ngIfThen","ngIfElse"]},{type:t.NgSwitch,selector:"[ngSwitch]",inputs:["ngSwitch"]},{type:t.NgSwitchCase,selector:"[ngSwitchCase]",inputs:["ngSwitchCase"]},{type:o.NzSpinComponent,selector:"nz-spin",inputs:["nzIndicator","nzSize","nzTip","nzDelay","nzSimple","nzSpinning"],exportAs:["nzSpin"]},{type:i.NzIconDirective,selector:"[nz-icon]",inputs:["nzRotate","nzSpin","nzType","nzTheme","nzTwotoneColor","nzIconfont"],exportAs:["nzIcon"]},{type:t.NgSwitchDefault,selector:"[ngSwitchDefault]"},{type:t.NgStyle,selector:"[ngStyle]",inputs:["ngStyle"]}],changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(g,[{type:n.Component,args:[{selector:"loading-default",templateUrl:"./loading.component.html",host:{"[class.loading-default]":"true","[class.loading-default-rtl]":"dir === 'rtl'"},preserveWhitespaces:!1,changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None}]}],null,null);var f=function(){function e(e,n,t){var o=this;this.overlay=e,this.configSrv=n,this.directionality=t,this.compRef=null,this.opt=null,this.n$=new l.Subject,this.cog=n.merge("loading",{type:"spin",text:"加载中...",icon:{type:"loading",theme:"outline",spin:!0},delay:0}),this.loading$=this.n$.asObservable().pipe(a.debounce((function(){return l.timer(o.opt.delay)}))).subscribe((function(){return o.create()}))}return Object.defineProperty(e.prototype,"instance",{get:function(){return null!=this.compRef?this.compRef.instance:null},enumerable:!1,configurable:!0}),e.prototype.create=function(){if(null!=this.opt){this._close(!1),this._overlayRef=this.overlay.create({positionStrategy:this.overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:this.overlay.scrollStrategies.block(),hasBackdrop:!0,backdropClass:"loading-backdrop"}),this.compRef=this._overlayRef.attach(new r.ComponentPortal(g));var e=this.configSrv.get("loading").direction||this.directionality.value;Object.assign(this.instance,{options:this.opt,dir:e}),this.compRef.changeDetectorRef.markForCheck()}},e.prototype.open=function(e){this.opt=Object.assign(Object.assign({},this.cog),e),this.n$.next()},e.prototype._close=function(e){e&&(this.opt=null),this._overlayRef&&(this._overlayRef.detach(),this.compRef=null)},e.prototype.close=function(){this._close(!0)},e.prototype.ngOnDestroy=function(){this.loading$.unsubscribe()},e}();f.ɵfac=function(e){return new(e||f)(n.ɵɵinject(c.Overlay),n.ɵɵinject(s.AlainConfigService),n.ɵɵinject(u.Directionality,8))},f.ɵprov=n.ɵɵdefineInjectable({token:f,factory:f.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(f,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:c.Overlay},{type:s.AlainConfigService},{type:u.Directionality,decorators:[{type:n.Optional}]}]}),null);var y=[g],h=function(){};h.ɵmod=n.ɵɵdefineNgModule({type:h}),h.ɵinj=n.ɵɵdefineInjector({factory:function(e){return new(e||h)},imports:[[t.CommonModule,c.OverlayModule,r.PortalModule,i.NzIconModule,o.NzSpinModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n.ɵɵsetNgModuleScope(h,{declarations:[g],imports:[t.CommonModule,c.OverlayModule,r.PortalModule,i.NzIconModule,o.NzSpinModule],exports:[g]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(h,[{type:n.NgModule,args:[{imports:[t.CommonModule,c.OverlayModule,r.PortalModule,i.NzIconModule,o.NzSpinModule],declarations:y,entryComponents:y,exports:y}]}],null,null),e.LoadingDefaultComponent=g,e.LoadingModule=h,e.LoadingService=f,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=loading.umd.min.js.map