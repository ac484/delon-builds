/**
 * @license ng-alain(cipchk@qq.com) v2.0.0-beta.3-ed90aa6
 * (c) 2018 Cipchk https://ng-alain.com/
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/router"),require("rxjs/operators"),require("@delon/util"),require("@delon/theme"),require("@delon/abc/reuse-tab"),require("@angular/common"),require("ng-zorro-antd")):"function"==typeof define&&define.amd?define("@delon/abc/page-header",["exports","@angular/core","@angular/router","rxjs/operators","@delon/util","@delon/theme","@delon/abc/reuse-tab","@angular/common","ng-zorro-antd"],t):t((e.delon=e.delon||{},e.delon.abc=e.delon.abc||{},e.delon.abc["page-header"]={}),e.ng.core,e.ng.router,e.rxjs.operators,e.delon.util,e.delon.theme,e.delon.abc["reuse-tab"],e.ng.common,e.ngZorro.antd)}(this,function(e,t,n,p,r,i,o,a,s){"use strict";var l=function y(){this.home="首页",this.homeLink="/",this.autoBreadcrumb=!0,this.autoTitle=!0,this.syncTitle=!1,this.fixed=!1,this.fixedOffsetTop=64};function u(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,n,a):i(t,n))||a);return 3<o&&a&&Object.defineProperty(t,n,a),a}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function d(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}var f=function(){function e(e,t,n,r,i,o,a,s){var l=this;this.renderer=n,this.route=r,this.menuSrv=i,this.i18nSrv=o,this.titleSrv=a,this.reuseSrv=s,this.inited=!1,this.paths=[],Object.assign(this,e),this.i18nSrv&&(this.i18n$=this.i18nSrv.change.subscribe(function(){return l.refresh()})),this.set$=t.notify.pipe(p.filter(function(e){return l.affix&&"layout"===e.type&&"collapsed"===e.name})).subscribe(function(){return l.affix.updatePosition({})})}return Object.defineProperty(e.prototype,"menus",{get:function(){return this._menus||(this._menus=this.menuSrv.getPathByUrl(this.route.url.split("?")[0])),this._menus},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{set:function(e){e instanceof t.TemplateRef?(this._title=null,this._titleTpl=e):this._title=e},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){this.setTitle().genBreadcrumb()},e.prototype.genBreadcrumb=function(){var n=this;if(!(this.breadcrumb||!this.autoBreadcrumb||this.menus.length<=0)){var r=[];return this.menus.forEach(function(e){if("undefined"==typeof e.hideInBreadcrumb||!e.hideInBreadcrumb){var t=e.text;e.i18n&&n.i18nSrv&&(t=n.i18nSrv.fanyi(e.i18n)),r.push({title:t,link:e.link&&[e.link]})}}),this.home&&r.splice(0,0,{title:this.homeI18n&&this.i18nSrv&&this.i18nSrv.fanyi(this.homeI18n)||this.home,link:[this.homeLink]}),this.paths=r,this}},e.prototype.setTitle=function(){if("undefined"==typeof this._title&&"undefined"==typeof this._titleTpl&&this.autoTitle&&0<this.menus.length){var e=this.menus[this.menus.length-1],t=e.text;e.i18n&&this.i18nSrv&&(t=this.i18nSrv.fanyi(e.i18n)),this._title=t}return this._title&&this.syncTitle&&(this.titleSrv&&this.titleSrv.setTitle(this._title),this.reuseSrv&&(this.reuseSrv.title=this._title)),this},e.prototype.checkContent=function(){r.isEmpty(this.conTpl.nativeElement)?this.renderer.setAttribute(this.conTpl.nativeElement,"hidden",""):this.renderer.removeAttribute(this.conTpl.nativeElement,"hidden")},e.prototype.ngOnInit=function(){this.refresh(),this.inited=!0},e.prototype.ngAfterViewInit=function(){this.checkContent()},e.prototype.ngOnChanges=function(){this.inited&&this.refresh()},e.prototype.ngOnDestroy=function(){this.i18n$&&this.i18n$.unsubscribe(),this.set$.unsubscribe()},e.decorators=[{type:t.Component,args:[{selector:"page-header",template:'<nz-affix #affix *ngIf="fixed;else phTpl" [nzOffsetTop]="fixedOffsetTop">\r\n  <ng-template [ngTemplateOutlet]="phTpl"></ng-template>\r\n</nz-affix>\r\n<ng-template #phTpl>\r\n  <div class="page-header">\r\n    <ng-container *ngIf="!breadcrumb; else breadcrumb">\r\n      <nz-breadcrumb *ngIf="paths && paths.length > 0">\r\n        <nz-breadcrumb-item *ngFor="let i of paths">\r\n          <ng-container *ngIf="i.link">\r\n            <a [routerLink]="i.link">{{i.title}}</a>\r\n          </ng-container>\r\n          <ng-container *ngIf="!i.link">{{i.title}}</ng-container>\r\n        </nz-breadcrumb-item>\r\n      </nz-breadcrumb>\r\n    </ng-container>\r\n    <div class="page-header__detail">\r\n      <div *ngIf="logo" class="page-header__logo">\r\n        <ng-template [ngTemplateOutlet]="logo"></ng-template>\r\n      </div>\r\n      <div class="page-header__main">\r\n        <div class="page-header__row">\r\n          <h1 *ngIf="_title || _titleTpl" class="page-header__title">\r\n            <ng-container *ngIf="_title; else _titleTpl">{{_title}}</ng-container>\r\n          </h1>\r\n          <div *ngIf="action" class="page-header__action">\r\n            <ng-template [ngTemplateOutlet]="action"></ng-template>\r\n          </div>\r\n        </div>\r\n        <div class="page-header__row">\r\n          <div class="page-header__desc" (cdkObserveContent)="checkContent()" #conTpl>\r\n            <ng-content></ng-content>\r\n            <ng-template [ngTemplateOutlet]="content"></ng-template>\r\n          </div>\r\n          <div *ngIf="extra" class="page-header__extra">\r\n            <ng-template [ngTemplateOutlet]="extra"></ng-template>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <ng-template [ngTemplateOutlet]="tab"></ng-template>\r\n  </div>\r\n</ng-template>\r\n',preserveWhitespaces:!1}]}],e.ctorParameters=function(){return[{type:l},{type:i.SettingsService},{type:t.Renderer2},{type:n.Router},{type:i.MenuService},{type:undefined,decorators:[{type:t.Optional},{type:t.Inject,args:[i.ALAIN_I18N_TOKEN]}]},{type:i.TitleService,decorators:[{type:t.Optional},{type:t.Inject,args:[i.TitleService]}]},{type:o.ReuseTabService,decorators:[{type:t.Optional},{type:t.Inject,args:[o.ReuseTabService]}]}]},e.propDecorators={conTpl:[{type:t.ViewChild,args:["conTpl"]}],affix:[{type:t.ViewChild,args:["affix"]}],title:[{type:t.Input}],home:[{type:t.Input}],homeLink:[{type:t.Input}],homeI18n:[{type:t.Input}],autoBreadcrumb:[{type:t.Input}],autoTitle:[{type:t.Input}],syncTitle:[{type:t.Input}],fixed:[{type:t.Input}],fixedOffsetTop:[{type:t.Input}],breadcrumb:[{type:t.Input}],logo:[{type:t.Input}],action:[{type:t.Input}],content:[{type:t.Input}],extra:[{type:t.Input}],tab:[{type:t.Input}]},u([r.InputBoolean(),c("design:type",Boolean)],e.prototype,"autoBreadcrumb",void 0),u([r.InputBoolean(),c("design:type",Boolean)],e.prototype,"autoTitle",void 0),u([r.InputBoolean(),c("design:type",Boolean)],e.prototype,"syncTitle",void 0),u([r.InputBoolean(),c("design:type",Boolean)],e.prototype,"fixed",void 0),u([r.InputNumber(),c("design:type",Number)],e.prototype,"fixedOffsetTop",void 0),e}(),g=[f],m=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[l]}},e.decorators=[{type:t.NgModule,args:[{imports:[a.CommonModule,n.RouterModule,r.DelonUtilModule,s.NgZorroAntdModule],declarations:h(g),exports:h(g)}]}],e}();e.PageHeaderConfig=l,e.PageHeaderComponent=f,e.PageHeaderModule=m,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=pageHeader.umd.min.js.map