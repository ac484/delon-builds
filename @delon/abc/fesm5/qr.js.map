{"version":3,"file":"qr.js.map","sources":["ng://@delon/abc/qr/qr.config.ts","ng://@delon/abc/qr/qr.service.ts","ng://@delon/abc/qr/qr.component.ts","ng://@delon/abc/qr/qr.module.ts"],"sourcesContent":["export class QRConfig {\r\n  /** èæ¯ï¼é»è®¤ï¼`white` */\r\n  background = 'white';\r\n  /** èæ¯éæçº§å«ï¼èå´ï¼`0-1` ä¹é´ï¼é»è®¤ï¼`1.0` */\r\n  backgroundAlpha = 1.0;\r\n  /** åæ¯ï¼é»è®¤ï¼`black` */\r\n  foreground = 'black';\r\n  /** åæ¯éæçº§å«ï¼èå´ï¼`0-1` ä¹é´ï¼é»è®¤ï¼`1.0` */\r\n  foregroundAlpha = 1.0;\r\n  /** è¯¯å·®æ ¡æ­£çº§å«ï¼é»è®¤ï¼`L` */\r\n  level: 'L' | 'M' | 'Q' | 'H' = 'L';\r\n  /** äºç»´ç è¾åºå¾çMIMEç±»åï¼é»è®¤ï¼`image/png` */\r\n  mime = 'image/png';\r\n  /** åè¾¹è·ï¼åä½ï¼pxï¼ï¼é»è®¤ï¼`10` */\r\n  padding = 10;\r\n  /** å¤§å°ï¼åä½ï¼pxï¼ï¼é»è®¤ï¼`220` */\r\n  size = 220;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { QRConfig } from './qr.config';\r\n\r\ndeclare var QRious: any;\r\n\r\n@Injectable()\r\nexport class QRService {\r\n  /** å½åqrå®ä¾ */\r\n  readonly qr: any;\r\n  /** èæ¯ */\r\n  background: string;\r\n  /** èæ¯éæçº§å«ï¼èå´ï¼`0-1` ä¹é´ */\r\n  backgroundAlpha = 1.0;\r\n  /** åæ¯ */\r\n  foreground: string;\r\n  /** åæ¯éæçº§å«ï¼èå´ï¼`0-1` ä¹é´ */\r\n  foregroundAlpha: number;\r\n  /** è¯¯å·®æ ¡æ­£çº§å« */\r\n  level: string;\r\n  /** äºç»´ç è¾åºå¾çMIMEç±»å */\r\n  mime: string;\r\n  /** åè¾¹è·ï¼åä½ï¼pxï¼ */\r\n  padding: number;\r\n  /** å¤§å°ï¼åä½ï¼pxï¼ */\r\n  size: number;\r\n  /** å¼ */\r\n  value: string;\r\n\r\n  constructor(cog: QRConfig) {\r\n    Object.assign(this, cog);\r\n    this.qr = new QRious();\r\n  }\r\n\r\n  /**\r\n   * çæäºç»´ç ï¼å¹¶è¿åBase64ç¼ç \r\n   *\r\n   * @param [value] éæ°æå®å¼\r\n   */\r\n  refresh(value?: string | Object): string {\r\n    this.qr.set(typeof value === 'object' ? value : {\r\n      background: this.background,\r\n      backgroundAlpha: this.backgroundAlpha,\r\n      foreground: this.foreground,\r\n      foregroundAlpha: this.foregroundAlpha,\r\n      level: this.level,\r\n      padding: this.padding,\r\n      size: this.size,\r\n      value: value || this.value,\r\n    });\r\n    return this.dataURL;\r\n  }\r\n\r\n  /**\r\n   * è¿åå½åäºç»´ç Base64ç¼ç \r\n   */\r\n  get dataURL(): string {\r\n    return this.qr.toDataURL();\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  ChangeDetectionStrategy,\r\n  OnChanges,\r\n  ChangeDetectorRef,\r\n  HostBinding,\r\n  Output,\r\n  EventEmitter,\r\n} from '@angular/core';\r\nimport { InputNumber } from '@delon/util';\r\n\r\nimport { QRService } from './qr.service';\r\nimport { QRConfig } from './qr.config';\r\n\r\n@Component({\r\n  selector: 'qr',\r\n  template: `\r\n  <img class=\"qr__img\" src=\"{{dataURL}}\">\r\n  `,\r\n  preserveWhitespaces: false,\r\n  host: { '[class.qr]': 'true' },\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class QRComponent implements OnChanges {\r\n  dataURL: string;\r\n  // region: fields\r\n\r\n  /** èæ¯ */\r\n  @Input()\r\n  background: string;\r\n  /** èæ¯éæçº§å«ï¼èå´ï¼`0-1` ä¹é´ */\r\n  @Input()\r\n  backgroundAlpha: number;\r\n  /** åæ¯ */\r\n  @Input()\r\n  foreground: string;\r\n  /** åæ¯éæçº§å«ï¼èå´ï¼`0-1` ä¹é´ */\r\n  @Input()\r\n  foregroundAlpha: number;\r\n  /** è¯¯å·®æ ¡æ­£çº§å« */\r\n  @Input()\r\n  level: string;\r\n  /** äºç»´ç è¾åºå¾çMIMEç±»å */\r\n  @Input()\r\n  mime: string;\r\n  /** åè¾¹è·ï¼åä½ï¼pxï¼ */\r\n  @Input()\r\n  @InputNumber()\r\n  padding: number;\r\n  /** å¤§å°ï¼åä½ï¼pxï¼ */\r\n  @HostBinding('style.height.px')\r\n  @HostBinding('style.width.px')\r\n  @Input()\r\n  @InputNumber()\r\n  size: number;\r\n  /** å¼ */\r\n  @Input()\r\n  value: string;\r\n  /** åæ´æ¶åè° */\r\n  @Output()\r\n  change = new EventEmitter<string>();\r\n\r\n  // endregion\r\n\r\n  constructor(\r\n    cog: QRConfig,\r\n    private srv: QRService,\r\n    private cd: ChangeDetectorRef,\r\n  ) {\r\n    Object.assign(this, cog);\r\n  }\r\n\r\n  ngOnChanges(): void {\r\n    this.dataURL = this.srv.refresh({\r\n      background: this.background,\r\n      backgroundAlpha: this.backgroundAlpha,\r\n      foreground: this.foreground,\r\n      foregroundAlpha: this.foregroundAlpha,\r\n      level: this.level,\r\n      mime: this.mime,\r\n      padding: this.padding,\r\n      size: this.size,\r\n      value: this.value,\r\n    });\r\n    this.cd.detectChanges();\r\n    this.change.emit(this.dataURL);\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { DelonUtilModule } from '@delon/util';\r\n\r\nimport { QRConfig } from './qr.config';\r\nimport { QRComponent } from './qr.component';\r\nimport { QRService } from './qr.service';\r\n\r\nconst COMPONENTS = [QRComponent];\r\n\r\n@NgModule({\r\n  imports: [CommonModule, DelonUtilModule],\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n})\r\nexport class QRModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: QRModule, providers: [QRConfig, QRService] };\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;AAAA,IAAA;;;;;0BAEe,OAAO;;;;+BAEF,GAAG;;;;0BAER,OAAO;;;;+BAEF,GAAG;;;;qBAEU,GAAG;;;;oBAE3B,WAAW;;;;uBAER,EAAE;;;;oBAEL,GAAG;;mBAhBZ;IAiBC;;;;;;ACjBD;IA4BE,mBAAY,GAAa;;;;+BAhBP,GAAG;QAiBnB,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QACzB,IAAI,CAAC,EAAE,GAAG,IAAI,MAAM,EAAE,CAAC;KACxB;;;;;;;;;;;;IAOD,2BAAO;;;;;;IAAP,UAAQ,KAAuB;QAC7B,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,OAAO,KAAK,KAAK,QAAQ,GAAG,KAAK,GAAG;YAC9C,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,eAAe,EAAE,IAAI,CAAC,eAAe;YACrC,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,eAAe,EAAE,IAAI,CAAC,eAAe;YACrC,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,KAAK,EAAE,KAAK,IAAI,IAAI,CAAC,KAAK;SAC3B,CAAC,CAAC;QACH,OAAO,IAAI,CAAC,OAAO,CAAC;KACrB;IAKD,sBAAI,8BAAO;;;;;;;;QAAX;YACE,OAAO,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC;SAC5B;;;OAAA;;gBApDF,UAAU;;;;gBAJF,QAAQ;;oBADjB;;;;;;;;;ICiEE,qBACE,GAAa,EACL,KACA;QADA,QAAG,GAAH,GAAG;QACH,OAAE,GAAF,EAAE;;;;sBAPH,IAAI,YAAY,EAAU;QASjC,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;KAC1B;;;;IAED,iCAAW;;;IAAX;QACE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC;YAC9B,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,eAAe,EAAE,IAAI,CAAC,eAAe;YACrC,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,eAAe,EAAE,IAAI,CAAC,eAAe;YACrC,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,KAAK,EAAE,IAAI,CAAC,KAAK;SAClB,CAAC,CAAC;QACH,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,CAAC;QACxB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;KAChC;;gBAxEF,SAAS,SAAC;oBACT,QAAQ,EAAE,IAAI;oBACd,QAAQ,EAAE,qDAET;oBACD,mBAAmB,EAAE,KAAK;oBAC1B,IAAI,EAAE,EAAE,YAAY,EAAE,MAAM,EAAE;oBAC9B,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;;;;gBAVQ,QAAQ;gBADR,SAAS;gBAPhB,iBAAiB;;;6BAwBhB,KAAK;kCAGL,KAAK;6BAGL,KAAK;kCAGL,KAAK;wBAGL,KAAK;uBAGL,KAAK;0BAGL,KAAK;uBAIL,WAAW,SAAC,iBAAiB,cAC7B,WAAW,SAAC,gBAAgB,cAC5B,KAAK;wBAIL,KAAK;yBAGL,MAAM;;;QAZN,WAAW,EAAE;;;;QAMb,WAAW,EAAE;;;sBAtDhB;;;;;;;;ACQA,IAAM,UAAU,GAAG,CAAC,WAAW,CAAC,CAAC;;;;;;;IAQxB,gBAAO;;;IAAd;QACE,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,SAAS,EAAE,CAAC,QAAQ,EAAE,SAAS,CAAC,EAAE,CAAC;KACjE;;gBARF,QAAQ,SAAC;oBACR,OAAO,EAAE,CAAC,YAAY,EAAE,eAAe,CAAC;oBACxC,YAAY,WAAM,UAAU,CAAC;oBAC7B,OAAO,WAAM,UAAU,CAAC;iBACzB;;mBAdD;;;;;;;;;;;;;;;"}
