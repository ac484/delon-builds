{"version":3,"file":"numberToChinese.js.map","sources":["ng://@delon/abc/number-to-chinese/number-to-chinese.ts","ng://@delon/abc/number-to-chinese/number-to-chinese.pipe.ts","ng://@delon/abc/number-to-chinese/number-to-chinese.module.ts"],"sourcesContent":["import { NumberToChineseOptions } from './number-to-chinese.interfaces';\r\n\r\nexport function numberToChinese(\r\n  value: number | string,\r\n  rmb = true,\r\n  options?: NumberToChineseOptions,\r\n): string {\r\n  options = Object.assign(\r\n    {\r\n      minusSymbol: 'è´',\r\n      validThrow: false,\r\n    },\r\n    options,\r\n  );\r\n  if (typeof value === 'number') value = value.toString();\r\n  if (!/^-?\\d+(\\.\\d+)?$/.test(value) && options.validThrow)\r\n    throw new Error(`${value} is invalid number type`);\r\n  let integer: number | string, decimal: number | string;\r\n  [integer, decimal] = value.split('.');\r\n  let symbol = '';\r\n  if (integer.startsWith('-')) {\r\n    symbol = options.minusSymbol;\r\n    integer = integer.substr(1);\r\n  }\r\n  if (/^-?\\d+$/.test(value)) decimal = null;\r\n  integer = (+integer).toString();\r\n  const unit = {\r\n    num: rmb\r\n      ? ['', 'å£¹', 'è´°', 'å', 'è', 'ä¼', 'é', 'æ', 'æ', 'ç', 'ç¹']\r\n      : ['', 'ä¸', 'äº', 'ä¸', 'å', 'äº', 'å­', 'ä¸', 'å«', 'ä¹', 'ç¹'],\r\n    radice: rmb\r\n      ? [\r\n          '',\r\n          'æ¾',\r\n          'ä½°',\r\n          'ä»',\r\n          'ä¸',\r\n          'æ¾',\r\n          'ä½°',\r\n          'ä»',\r\n          'äº¿',\r\n          'æ¾',\r\n          'ä½°',\r\n          'ä»',\r\n          'ä¸äº¿',\r\n          'æ¾',\r\n          'ä½°',\r\n          'ä»',\r\n          'å',\r\n          'æ¾',\r\n          'ä½°',\r\n          'ä»',\r\n        ]\r\n      : [\r\n          '',\r\n          'å',\r\n          'ç¾',\r\n          'å',\r\n          'ä¸',\r\n          'å',\r\n          'ç¾',\r\n          'å',\r\n          'äº¿',\r\n          'å',\r\n          'ç¾',\r\n          'å',\r\n          'ä¸äº¿',\r\n          'å',\r\n          'ç¾',\r\n          'å',\r\n          'å',\r\n          'å',\r\n          'ç¾',\r\n          'å',\r\n        ],\r\n    dec: ['è§', 'å', 'å', 'æ¯«'],\r\n  };\r\n  if (rmb) value = (+value).toFixed(5).toString();\r\n  let integerRes = '';\r\n  const integerCount = integer.length;\r\n  if (integer === '0' || integerCount === 0) {\r\n    integerRes = 'é¶';\r\n  } else {\r\n    let cnDesc = '';\r\n    for (let i = 0; i < integerCount; i++) {\r\n      const n = +integer[i],\r\n        j = integerCount - i - 1,\r\n        isZero = i > 1 && n !== 0 && integer[i - 1] === '0',\r\n        cnZero = isZero ? 'é¶' : '',\r\n        isEmpptyUnit =\r\n          (n === 0 && j % 4 !== 0) || integer.substr(i - 3, 4) === '0000',\r\n        descMark = cnDesc;\r\n      let cnNum = unit.num[n];\r\n\r\n      cnDesc = isEmpptyUnit ? '' : unit.radice[j];\r\n      // ç¬¬ä¸ä½æ¯ä¸å\r\n      if (i === 0 && cnNum === 'ä¸' && cnDesc === 'å') cnNum = '';\r\n      const isChangeEr =\r\n        n > 1 &&\r\n        cnNum === 'äº' && // å»é¤é¦ä½\r\n        ['', 'å', 'ç¾'].indexOf(cnDesc) === -1 && // ä¸è¯»ä¸¤\\ä¸¤å\\ä¸¤ç¾\r\n        descMark !== 'å'; // ä¸è¯»åä¸¤\r\n      if (isChangeEr) cnNum = 'ä¸¤';\r\n      integerRes += cnZero + cnNum + cnDesc;\r\n    }\r\n  }\r\n\r\n  // å°æ°é¨åæ¼æ¥\r\n  let decimalRes = '';\r\n  const decimalCount = decimal ? decimal.toString().length : 0;\r\n  if (decimal === null) {\r\n    decimalRes = rmb ? 'æ´' : '';\r\n  } else if (decimal === '0') {\r\n    decimalRes = 'é¶';\r\n  } else {\r\n    for (let i = 0; i < decimalCount; i++) {\r\n      if (rmb && i > unit.dec.length - 1) break;\r\n      const n = decimal[i],\r\n        cnZero = n === '0' ? 'é¶' : '',\r\n        cnNum = unit.num[n],\r\n        cnDesc = rmb ? unit.dec[i] : '';\r\n      decimalRes += cnZero + cnNum + cnDesc;\r\n    }\r\n  }\r\n  const ret =\r\n    symbol +\r\n    (rmb\r\n      ? integerRes + (decimalRes === 'é¶' ? 'åæ´' : `å${decimalRes}`)\r\n      : integerRes + (decimalRes === '' ? '' : `ç¹${decimalRes}`));\r\n  return ret;\r\n}\r\n","import { PipeTransform, Pipe } from '@angular/core';\r\nimport { numberToChinese } from './number-to-chinese';\r\n\r\n@Pipe({ name: 'n2c' })\r\nexport class NaNumberToChinesePipe implements PipeTransform {\r\n  transform(\r\n    value: number | string,\r\n    rmb: boolean = true,\r\n    minusSymbol: string = 'è´',\r\n  ): string {\r\n    return numberToChinese(value, rmb, { minusSymbol });\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { NaNumberToChinesePipe } from './number-to-chinese.pipe';\r\n\r\nconst PIPES = [NaNumberToChinesePipe];\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: PIPES,\r\n  exports: PIPES,\r\n})\r\nexport class NumberToChineseModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: NumberToChineseModule, providers: [] };\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}
