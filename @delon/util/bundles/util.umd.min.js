/**
 * @license ng-alain(cipchk@qq.com) v9.0.0-rc.4
 * (c) 2020 cipchk https://ng-alain.com/
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("extend"),require("date-fns/addDays"),require("date-fns/endOfDay"),require("date-fns/endOfMonth"),require("date-fns/endOfWeek"),require("date-fns/endOfYear"),require("date-fns/parse"),require("date-fns/startOfDay"),require("date-fns/startOfMonth"),require("date-fns/startOfWeek"),require("date-fns/startOfYear"),require("date-fns/subMonths"),require("date-fns/subWeeks"),require("date-fns/subYears"),require("@angular/common"),require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("ng-zorro-antd/core/environments"),require("ng-zorro-antd/core/tree")):"function"==typeof define&&define.amd?define("@delon/util",["exports","extend","date-fns/addDays","date-fns/endOfDay","date-fns/endOfMonth","date-fns/endOfWeek","date-fns/endOfYear","date-fns/parse","date-fns/startOfDay","date-fns/startOfMonth","date-fns/startOfWeek","date-fns/startOfYear","date-fns/subMonths","date-fns/subWeeks","date-fns/subYears","@angular/common","@angular/core","rxjs","rxjs/operators","ng-zorro-antd/core/environments","ng-zorro-antd/core/tree"],t):t(((e=e||self).delon=e.delon||{},e.delon.util={}),e.Extend,e.addDays,e.endOfDay,e.endOfMonth,e.endOfWeek,e.endOfYear,e.parse,e.startOfDay,e.startOfMonth,e.startOfWeek,e.startOfYear,e.subMonths,e.subWeeks,e.subYears,e.ng.common,e.ng.core,e.rxjs,e.rxjs.operators,e.environments,e.tree)}(this,(function(e,t,r,n,a,o,i,c,u,d,l,s,f,p,y,h,m,v,b,M,g){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a,o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,c=c&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c,u=u&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u,d=d&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d,l=l&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s,f=f&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f,p=p&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p,y=y&&Object.prototype.hasOwnProperty.call(y,"default")?y.default:y;var O=function(){return(O=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function N(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function w(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i}function j(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(w(arguments[t]));return e}function k(e,t,r){if(!e||null==t||0===t.length)return r;if(Array.isArray(t)||(t=~t.indexOf(".")?t.split("."):[t]),1===t.length){var n=e[t[0]];return void 0===n?r:n}var a=t.reduce((function(e,t){return(e||{})[t]}),e);return void 0===a?r:a}function x(e){return t(!0,{},{_:e})._}function I(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(Array.isArray(e)||"object"!=typeof e)return e;var a=function(e){return"object"==typeof e||"function"==typeof e},o=function(e,r){return Object.keys(r).filter((function(e){return"__proto__"!==e&&Object.prototype.hasOwnProperty.call(r,e)})).forEach((function(n){var i=r[n],c=e[n];Array.isArray(c)?e[n]=t?i:j(c,i):null!=i&&a(i)&&null!=c&&a(c)?e[n]=o(c,i):e[n]=x(i)})),e};return r.filter((function(e){return null!=e&&a(e)})).forEach((function(t){return o(e,t)})),e}function P(e){return[u(e[0]),n(e[1])]}var T=function(){function e(e){this.doc=e,this.list={},this.cached={},this._notify=new v.BehaviorSubject([])}return Object.defineProperty(e.prototype,"change",{get:function(){return this._notify.asObservable().pipe(b.share(),b.filter((function(e){return 0!==e.length})))},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.list={},this.cached={}},e.prototype.load=function(e){var t=this;Array.isArray(e)||(e=[e]);var r=[];return e.forEach((function(e){e.endsWith(".js")?r.push(t.loadScript(e)):r.push(t.loadStyle(e))})),Promise.all(r).then((function(e){return t._notify.next(e),Promise.resolve(e)}))},e.prototype.loadScript=function(e,t){var r=this;return new Promise((function(n){if(!0!==r.list[e]){r.list[e]=!0;var a=function(t){r.cached[e]=t,n(t)},o=r.doc.createElement("script");o.type="text/javascript",o.src=e,o.charset="utf-8",t&&(o.innerHTML=t),o.readyState?o.onreadystatechange=function(){"loaded"!==o.readyState&&"complete"!==o.readyState||(o.onreadystatechange=null,a({path:e,loaded:!0,status:"ok"}))}:o.onload=function(){return a({path:e,loaded:!0,status:"ok"})},o.onerror=function(t){return a({path:e,loaded:!1,status:"error",error:t})},r.doc.getElementsByTagName("head")[0].appendChild(o)}else n(r.cached[e])}))},e.prototype.loadStyle=function(e,t,r){var n=this;return void 0===t&&(t="stylesheet"),new Promise((function(a){if(!0!==n.list[e]){n.list[e]=!0;var o=n.doc.createElement("link");o.rel=t,o.type="text/css",o.href=e,r&&(o.innerHTML=r),n.doc.getElementsByTagName("head")[0].appendChild(o);var i={path:e,loaded:!0,status:"ok"};n.cached[e]=i,a(i)}else a(n.cached[e])}))},e.decorators=[{type:m.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:m.Inject,args:[h.DOCUMENT]}]}]},e.ɵprov=m.ɵɵdefineInjectable({factory:function(){return new e(m.ɵɵinject(h.DOCUMENT))},token:e,providedIn:"root"}),e}();function C(e){return/^((-?\d+\.\d+)|(-?\d+)|(-?\.\d+))$/.test(e.toString())}function D(e){return C(e)&&parseInt(e.toString(),10).toString()===e.toString()}function S(e){return C(e)&&!D(e)}function q(e){return"string"==typeof e&&/(^\d{15}$)|(^\d{17}([0-9]|X)$)/i.test(e)}function A(e){return"string"==typeof e&&/^(0|\+?86|17951)?(13[0-9]|15[0-9]|17[0678]|18[0-9]|14[57])[0-9]{8}$/.test(e)}function _(e){return/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+(?::\d+)?|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/.test(e)}var E=function(){function e(){}return e.num=function(e){return C(e.value)?null:{num:!0}},e.int=function(e){return D(e.value)?null:{int:!0}},e.decimal=function(e){return S(e.value)?null:{decimal:!0}},e.idCard=function(e){return q(e.value)?null:{idCard:!0}},e.mobile=function(e){return A(e.value)?null:{mobile:!0}},e.url=function(e){return _(e.value)?null:{url:!0}},e}(),L={},H="[@DELON]:";function W(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.reduce((function(e,t){return e+t.toString()}),"");return!L[r]&&(L[r]=!0,!0)}function $(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];(M.environment.isTestMode||m.isDevMode()&&W.apply(void 0,j(t)))&&e.apply(void 0,j(t))}var Y=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return $.apply(void 0,j([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return console.warn.apply(console,j([H],e))}],e))},z=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(M.environment.isTestMode)return function(){};var r=(new Error).stack;return $.apply(void 0,j([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return console.warn.apply(console,j([H,"deprecated:"],e,[r]))}],e))};function B(e,t,r){return function(n,a,o){var i="$$__"+a;return Object.prototype.hasOwnProperty.call(n,i)&&Y('The prop "'+i+'" is already exist, it will be overrided by '+e+" decorator."),Object.defineProperty(n,i,{configurable:!0,writable:!0}),{get:function(){return o&&o.get?o.get.bind(this)():this[i]},set:function(e){o&&o.set&&o.set.bind(this)(t(e,r)),this[i]=t(e,r)}}}}function U(e,t){return void 0===t&&(t=!1),t&&void 0===e?void 0:null!=e&&""+e!="false"}function F(e,t){return void 0===t&&(t=0),isNaN(parseFloat(e))||isNaN(Number(e))?t:Number(e)}var K=function(){};var G=new m.InjectionToken("alain-config"),R=function(){function e(e){this.config=e||{}}return e.prototype.get=function(e,t){var r,n=this.config[e]||{};return t?((r={})[t]=n[t],r):n},e.prototype.merge=function(e,t){return I({},!0,t,this.get(e))},e.prototype.attach=function(e,t,r){Object.assign(e,this.merge(t,r))},e.prototype.attachKey=function(e,t,r){Object.assign(e,this.get(t,r))},e.prototype.set=function(e,t){this.config[e]=O(O({},this.config[e]),t)},e.decorators=[{type:m.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:m.Optional},{type:m.Inject,args:[G]}]}]},e.ɵprov=m.ɵɵdefineInjectable({factory:function(){return new R(m.ɵɵinject(G,8))},token:R,providedIn:"root"}),e}();var V=function(){function e(e){this.c=e.merge("utilArray",{deepMapName:"deep",parentMapName:"parent",idMapName:"id",parentIdMapName:"parent_id",childrenMapName:"children",titleMapName:"title",checkedMapname:"checked",selectedMapname:"selected",expandedMapname:"expanded",disabledMapname:"disabled"})}return e.prototype.treeToArr=function(e,t){var r=O({deepMapName:this.c.deepMapName,parentMapName:this.c.parentMapName,childrenMapName:this.c.childrenMapName,clearChildren:!0,cb:null},t),n=[],a=function(e,t,o){var i,c;void 0===o&&(o=0);try{for(var u=N(e),d=u.next();!d.done;d=u.next()){var l=d.value;l[r.deepMapName]=o,l[r.parentMapName]=t,r.cb&&r.cb(l,t,o),n.push(l);var s=l[r.childrenMapName];null!=s&&Array.isArray(s)&&s.length>0&&a(s,l,o+1),r.clearChildren&&delete l[r.childrenMapName]}}catch(e){i={error:e}}finally{try{d&&!d.done&&(c=u.return)&&c.call(u)}finally{if(i)throw i.error}}};return a(e,1),n},e.prototype.arrToTree=function(e,t){var r,n,a=O({idMapName:this.c.idMapName,parentIdMapName:this.c.parentIdMapName,childrenMapName:this.c.childrenMapName,cb:null},t),o=[],i={};try{for(var c=N(e),u=c.next();!u.done;u=c.next()){var d=u.value,l=d[a.idMapName],s=d[a.parentIdMapName];i[l]=i[l]||[],d[a.childrenMapName]=i[l],a.cb&&a.cb(d),s?(i[s]=i[s]||[],i[s].push(d)):o.push(d)}}catch(e){r={error:e}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return o},e.prototype.arrToTreeNode=function(e,t){var r=O({idMapName:this.c.idMapName,parentIdMapName:this.c.parentIdMapName,titleMapName:this.c.titleMapName,isLeafMapName:"isLeaf",checkedMapname:this.c.checkedMapname,selectedMapname:this.c.selectedMapname,expandedMapname:this.c.expandedMapname,disabledMapname:this.c.disabledMapname,cb:null},t),n=this.arrToTree(e,{idMapName:r.idMapName,parentIdMapName:r.parentIdMapName,childrenMapName:"children"});return this.visitTree(n,(function(e,t,n){e.key=e[r.idMapName],e.title=e[r.titleMapName],e.checked=e[r.checkedMapname],e.selected=e[r.selectedMapname],e.expanded=e[r.expandedMapname],e.disabled=e[r.disabledMapname],null==e[r.isLeafMapName]?e.isLeaf=0===e.children.length:e.isLeaf=e[r.isLeafMapName],r.cb&&r.cb(e,t,n)})),n.map((function(e){return new g.NzTreeNode(e)}))},e.prototype.visitTree=function(e,t,r){r=O({childrenMapName:this.c.childrenMapName},r);var n=function(e,a,o){var i,c;try{for(var u=N(e),d=u.next();!d.done;d=u.next()){var l=d.value;t(l,a,o);var s=l[r.childrenMapName];s&&s.length>0&&n(s,l,o+1)}}catch(e){i={error:e}}finally{try{d&&!d.done&&(c=u.return)&&c.call(u)}finally{if(i)throw i.error}}};n(e,null,1)},e.prototype.getKeysByTreeNode=function(e,t){var r=O({includeHalfChecked:!0},t),n=[];return this.visitTree(e,(function(e,t,a){(e.isChecked||r.includeHalfChecked&&e.isHalfChecked)&&n.push(r.cb?r.cb(e,t,a):r.keyMapName?e.origin[r.keyMapName]:e.key)})),n},e.decorators=[{type:m.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:R}]},e.ɵprov=m.ɵɵdefineInjectable({factory:function(){return new e(m.ɵɵinject(R))},token:e,providedIn:"root"}),e}();var X=function(){function e(){}return e.decorators=[{type:m.NgModule,args:[{imports:[h.CommonModule]}]}],e}();e.ALAIN_CONFIG=G,e.AlainConfigService=R,e.AlainSVConfig=K,e.ArrayService=V,e.DelonUtilModule=X,e.InputBoolean=function(e){return void 0===e&&(e=!1),B("InputNumber",U,e)},e.InputNumber=function(e){return void 0===e&&(e=0),B("InputNumber",F,e)},e.LazyService=T,e.PREFIX=H,e._Validators=E,e.copy=function(e){return new Promise((function(t){var r=null;try{(r=document.createElement("textarea")).style.height="0px",r.style.opacity="0",r.style.width="0px",document.body.appendChild(r),r.value=e,r.select(),document.execCommand("copy"),t(e)}finally{r&&r.parentNode&&r.parentNode.removeChild(r)}}))},e.deepCopy=x,e.deepGet=k,e.deepMerge=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return I.apply(void 0,j([e,!1],t))},e.deepMergeKey=I,e.deprecation10=function(e,t,r){z(e+" => '"+t+"' is going to be removed in 10.0.0"+(r?", Please use '"+r+"' instead":"")+".")},e.fixEndTimeOfRange=P,e.format=function(e,t,r){return void 0===r&&(r=!1),(e||"").replace(/\${([^}]+)}/g,(function(e,n){return r?k(t,n.split("."),""):(t||{})[n]||""}))},e.getTimeDistance=function(e,t){t=t?"string"==typeof t?c(t,"yyyy-MM-dd HH:mm:ss",new Date):new Date(t):new Date;var n,u={weekStartsOn:1};switch(e){case"today":n=[t,t];break;case"-today":n=[r(t,-1),t];break;case"yesterday":n=[r(t,-1),r(t,-1)];break;case"week":n=[l(t,u),o(t,u)];break;case"-week":n=[l(p(t,1),u),o(p(t,1),u)];break;case"month":n=[d(t),a(t)];break;case"-month":n=[d(f(t,1)),a(f(t,1))];break;case"year":n=[s(t),i(t)];break;case"-year":n=[s(y(t,1)),i(y(t,1))];break;default:n=e>0?[t,r(t,e)]:[r(t,e),t]}return P(n)},e.isDecimal=S,e.isEmpty=function(e){for(var t=e.childNodes,r=0;r<t.length;r++){var n=t.item(r);if(1===n.nodeType&&0!==n.outerHTML.toString().trim().length)return!1;if(3===n.nodeType&&0!==n.textContent.toString().trim().length)return!1}return!0},e.isIdCard=q,e.isInt=D,e.isMobile=A,e.isNum=C,e.isUrl=_,e.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];m.isDevMode()&&console.log.apply(console,j([H],e))},e.toBoolean=U,e.toDate=function(e,t){return void 0===t&&(t="yyyy-MM-dd HH:mm:ss"),e instanceof Date?e:"number"==typeof e?new Date(e):c(e,t,new Date)},e.toNumber=F,e.updateHostClass=function(e,t,r,n){void 0===n&&(n=!1),!0===n?t.removeAttribute(e,"class"):function(e,t,r){for(var n in t)r.removeClass(e,n)}(e,r,t),function(e,t,r){for(var n in t)t[n]&&r.addClass(e,n)}(e,r=O({},r),t)},e.warn=Y,e.warnDeprecation=z,e.ɵa=R,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=util.umd.min.js.map