{"version":3,"file":"delon-util-token.js","sources":["../../../../packages/util/token/window.ts","../../../../packages/util/token/page-visibility.ts"],"sourcesContent":["import { DOCUMENT } from '@angular/common';\nimport { inject, InjectionToken } from '@angular/core';\n\n/**\n * Access to global `window` object\n *\n * 访问全局 `window` 对象\n */\nexport const WINDOW = new InjectionToken<Window>('WINDOW', {\n  factory: () => {\n    const win = inject(DOCUMENT).defaultView;\n    if (!win) {\n      throw new Error('Window is not available');\n    }\n    return win;\n  },\n});\n","import { DOCUMENT } from '@angular/common';\nimport { inject, InjectionToken } from '@angular/core';\nimport { fromEvent, Observable } from 'rxjs';\nimport { distinctUntilChanged, map, share, startWith } from 'rxjs/operators';\n\n/**\n * Use the `visibilitychange` event to monitor whether the browser tab is visible, which is generally used when the user leaves the browser tab to temp interrupt the backend to continue sending requests\n *\n * 通过 `visibilitychange` 事件来监听浏览器选项卡是否可见，一般用于当用户离开应用时暂时中断后端持续发送请求时\n */\nexport const PAGE_VISIBILITY = new InjectionToken<Observable<boolean>>('PAGE_VISIBILITY`', {\n  factory: () => {\n    const doc = inject(DOCUMENT);\n    return fromEvent(doc, 'visibilitychange').pipe(\n      startWith(0),\n      map(() => !doc.hidden),\n      distinctUntilChanged(),\n      share(),\n    );\n  },\n});\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;MAQa,MAAM,GAAG,IAAI,cAAc,CAAS,QAAQ,EAAE;IACzD,OAAO;;;IAAE;;cACD,GAAG,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC,WAAW;QACxC,IAAI,CAAC,GAAG,EAAE;YACR,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;SAC5C;QACD,OAAO,GAAG,CAAC;KACZ,CAAA;CACF;;;;;;;;;;;;;MCNY,eAAe,GAAG,IAAI,cAAc,CAAsB,kBAAkB,EAAE;IACzF,OAAO;;;IAAE;;cACD,GAAG,GAAG,MAAM,CAAC,QAAQ,CAAC;QAC5B,OAAO,SAAS,CAAC,GAAG,EAAE,kBAAkB,CAAC,CAAC,IAAI,CAC5C,SAAS,CAAC,CAAC,CAAC,EACZ,GAAG;;;QAAC,MAAM,CAAC,GAAG,CAAC,MAAM,EAAC,EACtB,oBAAoB,EAAE,EACtB,KAAK,EAAE,CACR,CAAC;KACH,CAAA;CACF;;;;;;;;;;;;;;;;"}