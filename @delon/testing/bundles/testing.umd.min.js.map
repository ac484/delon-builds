{"version":3,"sources":["ng://@delon/testing/src/event-objects.ts","ng://@delon/testing/src/dispatch-events.ts","ng://@delon/testing/src/g2.ts","ng://@delon/testing/src/suite.ts","ng://@delon/testing/src/zorro.ts","ng://@delon/testing/src/type-in-element.ts"],"names":["createMouseEvent","type","x","y","event","document","createEvent","initMouseEvent","window","createTouchEvent","pageX","pageY","touchDetails","initUIEvent","Object","defineProperties","touches","value","createKeyboardEvent","keyCode","target","key","initEventFn","initKeyEvent","initKeyboardEvent","bind","originalPreventDefault","preventDefault","get","defineProperty","apply","this","arguments","createFakeEvent","canBubble","cancelable","initEvent","dispatchEvent","node","dispatchFakeEvent","PageG2","fixture","prototype","debugElement","componentInstance","comp","chart","genModule","module","TestBed","configureTestingModule","imports","declarations","genComp","dc","createComponent","dcFirst","makeModule","options","flush","discardPeriodicTasks","spyOn","changeDetectorRef","markForCheck","detectChanges","end","tick","destroy","ngOnDestroy","newData","data","getEls","cls","dl","querySelectorAll","getEl","querySelector","getController","isCanvas","stauts","isExists","isText","el","expect","trim","toBe","checkOptions","checkAttrOptions","attributeOption","field","isXScalesCount","num","getXScale","length","isYScalesCount","getYScales","isDataCount","results","toBeGreaterThan","getXY","checkTooltip","_includeText","point","firstDataPoint","showTooltip","checkClickItem","clientPoint","canvas","getClientByPoint","MouseEvent","clientX","clientY","TestContext","nativeElement","resolve","component","injector","page","context","delay","console","warn","trigger","allowNull","directive","query","By","NzDropDownDirective","elementRef","element","focus"],"mappings":"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","sourcesContent":["import { NzSafeAny } from 'ng-zorro-antd/core/types';\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/** Creates a browser MouseEvent with the specified options. */\nexport function createMouseEvent(type: string, x = 0, y = 0) {\n  const event = document.createEvent('MouseEvent');\n\n  event.initMouseEvent(\n    type,\n    false /* canBubble */,\n    false /* cancelable */,\n    window /* view */,\n    0 /* detail */,\n    x /* screenX */,\n    y /* screenY */,\n    x /* clientX */,\n    y /* clientY */,\n    false /* ctrlKey */,\n    false /* altKey */,\n    false /* shiftKey */,\n    false /* metaKey */,\n    0 /* button */,\n    null /* relatedTarget */,\n  );\n\n  return event;\n}\n\n/** Creates a browser TouchEvent with the specified pointer coordinates. */\nexport function createTouchEvent(type: string, pageX = 0, pageY = 0) {\n  // In favor of creating events that work for most of the browsers, the event is created\n  // as a basic UI Event. The necessary details for the event will be set manually.\n  const event = document.createEvent('UIEvent');\n  const touchDetails = { pageX, pageY };\n\n  (event as NzSafeAny).initUIEvent(type, true, true, window, 0);\n\n  // Most of the browsers don't have a \"initTouchEvent\" method that can be used to define\n  // the touch details.\n  Object.defineProperties(event, {\n    touches: { value: [touchDetails] },\n  });\n\n  return event;\n}\n\n/** Dispatches a keydown event from an element. */\nexport function createKeyboardEvent(type: string, keyCode: number, target?: Element, key?: string) {\n  const event = document.createEvent('KeyboardEvent') as any;\n  // Firefox does not support `initKeyboardEvent`, but supports `initKeyEvent`.\n  const initEventFn = (event.initKeyEvent || event.initKeyboardEvent).bind(event);\n  const originalPreventDefault = event.preventDefault;\n\n  initEventFn(type, true, true, window, 0, 0, 0, 0, 0, keyCode);\n\n  // Webkit Browsers don't set the keyCode when calling the init function.\n  // See related bug https://bugs.webkit.org/show_bug.cgi?id=16735\n  Object.defineProperties(event, {\n    keyCode: { get: () => keyCode },\n    key: { get: () => key },\n    target: { get: () => target },\n  });\n\n  // IE won't set `defaultPrevented` on synthetic events so we need to do it manually.\n  event.preventDefault = function () {\n    Object.defineProperty(event, 'defaultPrevented', { get: () => true });\n    // tslint:disable-next-line:no-invalid-this\n    return originalPreventDefault.apply(this, arguments);\n  };\n\n  return event;\n}\n\n/** Creates a fake event object with any desired event type. */\nexport function createFakeEvent(type: string, canBubble = true, cancelable = true) {\n  const event = document.createEvent('Event');\n  event.initEvent(type, canBubble, cancelable);\n  return event;\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport { createFakeEvent, createKeyboardEvent, createMouseEvent, createTouchEvent } from './event-objects';\n\n/** Utility to dispatch any event on a Node. */\nexport function dispatchEvent(node: Node | Window, event: Event): Event {\n  node.dispatchEvent(event);\n  return event;\n}\n\n/** Shorthand to dispatch a fake event on a specified node. */\nexport function dispatchFakeEvent(node: Node | Window, type: string | Event, canBubble?: boolean): Event {\n  return dispatchEvent(node, typeof type === 'string' ? createFakeEvent(type, canBubble) : type);\n}\n\n/** Shorthand to dispatch a keyboard event with a specified key code. */\nexport function dispatchKeyboardEvent(node: Node, type: string, keyCode: number, target?: Element): KeyboardEvent {\n  return dispatchEvent(node, createKeyboardEvent(type, keyCode, target)) as KeyboardEvent;\n}\n\n/** Shorthand to dispatch a mouse event on the specified coordinates. */\nexport function dispatchMouseEvent(node: Node, type: string, x = 0, y = 0, event = createMouseEvent(type, x, y)): MouseEvent {\n  return dispatchEvent(node, event) as MouseEvent;\n}\n\n/** Shorthand to dispatch a touch event on the specified coordinates. */\nexport function dispatchTouchEvent(node: Node, type: string, x = 0, y = 0) {\n  return dispatchEvent(node, createTouchEvent(type, x, y));\n}\n","import { Type } from '@angular/core';\nimport { ComponentFixture, discardPeriodicTasks, flush, TestBed, tick } from '@angular/core/testing';\nimport { Chart } from '@antv/g2';\nimport { NzSafeAny } from 'ng-zorro-antd/core/types';\n\nexport type PageG2Type = 'geometries' | 'views';\n\nexport const PageG2DataCount = 2;\nexport const PageG2Height = 100;\n\nexport class PageG2<T> {\n  constructor(public fixture: ComponentFixture<T> | null = null) {}\n\n  get dl() {\n    return this.fixture!.debugElement;\n  }\n\n  get context(): T {\n    return this.fixture!.componentInstance;\n  }\n\n  get comp() {\n    // tslint:disable-next-line:no-string-literal\n    return (this.context as NzSafeAny)['comp'];\n  }\n\n  get chart(): Chart {\n    return this.comp.chart;\n  }\n\n  genModule<M>(module: M, comp: Type<T>) {\n    TestBed.configureTestingModule({\n      imports: [module],\n      declarations: [comp],\n    });\n    return this;\n  }\n\n  genComp(comp: Type<T>, dc = false) {\n    this.fixture = TestBed.createComponent(comp);\n    if (dc) {\n      this.dcFirst();\n    }\n    return this;\n  }\n\n  makeModule<M>(module: M, comp: Type<T>, options = { dc: true }): PageG2<T> {\n    this.genModule(module, comp).genComp(comp, options.dc);\n    return this;\n  }\n\n  dcFirst() {\n    this.dc();\n    flush();\n    discardPeriodicTasks();\n    // FIX: `Error during cleanup of component`\n    if (this.comp && typeof this.comp.chart !== 'undefined') {\n      spyOn(this.comp.chart, 'destroy');\n    }\n    return this;\n  }\n\n  dc() {\n    this.fixture!.changeDetectorRef.markForCheck();\n    this.fixture!.detectChanges();\n    return this;\n  }\n\n  end() {\n    // The 201 value is delay value\n    tick(201);\n    flush();\n    discardPeriodicTasks();\n    return this;\n  }\n\n  destroy() {\n    this.comp.ngOnDestroy();\n  }\n\n  newData(data: any): this {\n    // tslint:disable-next-line:no-string-literal\n    (this.context as NzSafeAny)['data'] = data;\n    this.dc();\n    return this;\n  }\n\n  getEls(cls: string): NodeListOf<HTMLElement> {\n    return (this.dl.nativeElement as HTMLElement).querySelectorAll(cls);\n  }\n\n  getEl(cls: string): HTMLElement {\n    return (this.dl.nativeElement as HTMLElement).querySelector(cls) as HTMLElement;\n  }\n\n  getController(type: 'axis' | 'legend') {\n    return this.chart.getController(type) as NzSafeAny;\n  }\n\n  isCanvas(stauts: boolean = true): this {\n    this.isExists('canvas', stauts);\n    return this;\n  }\n\n  isText(cls: string, value: string) {\n    const el = this.getEl(cls);\n    expect(el ? el.textContent!.trim() : '').toBe(value);\n    return this;\n  }\n\n  isExists(cls: string, stauts: boolean = true) {\n    expect(this.getEl(cls) != null).toBe(stauts);\n    return this;\n  }\n\n  checkOptions(key: string, value: any) {\n    expect((this.chart as NzSafeAny)[key]).toBe(value);\n    return this;\n  }\n\n  checkAttrOptions(type: PageG2Type, key: string, value: any) {\n    const x = (this.chart[type][0] as NzSafeAny).attributeOption[key];\n    expect(x.field).toBe(value);\n    return this;\n  }\n\n  isXScalesCount(num: number) {\n    const x = this.chart.getXScale();\n    expect(x.values!.length).toBe(num);\n    return this;\n  }\n\n  isYScalesCount(num: number) {\n    const y = this.chart.getYScales();\n    expect(y.length).toBe(1);\n    expect(y[0].values!.length).toBe(num);\n    return this;\n  }\n\n  isDataCount(type: PageG2Type, num: number) {\n    const results = this.chart[type];\n    expect(results.length).toBeGreaterThan(0);\n    expect(results[0].data.length).toBe(num);\n    return this;\n  }\n\n  get firstDataPoint(): { x: number; y: number } {\n    // tslint:disable-next-line: no-string-literal\n    return this.chart.getXY((this.context as NzSafeAny)['data'][0]);\n  }\n\n  checkTooltip(_includeText: string | null, point?: { x: number; y: number }) {\n    if (!point) {\n      point = this.firstDataPoint;\n    }\n    this.chart.showTooltip(point);\n    expect(this.chart.getController('tooltip') != null).toBe(true);\n    return this;\n  }\n\n  checkClickItem(): this {\n    const point = this.firstDataPoint;\n    const clientPoint = this.chart.canvas.getClientByPoint(point.x, point.y);\n    const event = new MouseEvent('click', {\n      clientX: clientPoint.x,\n      clientY: clientPoint.y,\n    });\n    (this.chart.canvas.get('el') as HTMLElement).dispatchEvent(event);\n    return this;\n  }\n}\n\nexport function checkDelay<M, T>(module: M, comp: Type<T>, page: PageG2<T> | null = null) {\n  if (page == null) {\n    page = new PageG2<T>().makeModule(module, comp, { dc: false });\n  }\n  const context = page.context as any;\n  if (typeof context.delay === 'undefined') {\n    console.warn(`You muse be dinfed \"delay\" property in test component`);\n    return;\n  }\n  context.delay = 100;\n  page.dc();\n  page.comp.ngOnDestroy();\n  expect(page.chart == null).toBe(true);\n  tick(201);\n  discardPeriodicTasks();\n}\n","import { Type } from '@angular/core';\nimport { ComponentFixture, TestBed } from '@angular/core/testing';\n\nexport class TestContext<T> {\n  constructor(public fixture: ComponentFixture<T>) {}\n\n  get component() {\n    return this.fixture.componentInstance;\n  }\n\n  get el(): HTMLElement {\n    return this.fixture.debugElement.nativeElement;\n  }\n\n  get dl() {\n    return this.fixture.debugElement;\n  }\n\n  get context() {\n    return this.fixture.componentInstance;\n  }\n\n  detectChanges() {\n    this.fixture.detectChanges();\n  }\n\n  resolve<T1>(component: Type<T1>) {\n    return this.fixture.debugElement.injector.get(component) as T1;\n  }\n}\n\nexport const createTestContext = <T>(component: Type<T>) => {\n  return new TestContext<T>(TestBed.createComponent<T>(component));\n};\n","import { DebugElement } from '@angular/core';\nimport { tick } from '@angular/core/testing';\nimport { By } from '@angular/platform-browser';\nimport { NzDropDownDirective } from 'ng-zorro-antd/dropdown';\nimport { dispatchFakeEvent } from './dispatch-events';\n\nexport const DROPDOWN_MIN_TIME = 1000;\n\n/**\n * 触发 dropdown\n */\nexport function dispatchDropDown(dl: DebugElement, trigger: 'mouseleave' | 'click', allowNull = true) {\n  const directive = dl.query(By.directive(NzDropDownDirective));\n  if (allowNull && directive == null) {\n    return false;\n  }\n  const el = directive.injector.get<NzDropDownDirective>(NzDropDownDirective).elementRef.nativeElement as HTMLElement;\n  if (trigger === 'click') {\n    dispatchFakeEvent(el, 'click');\n  } else {\n    dispatchFakeEvent(el, 'mouseenter');\n  }\n  tick(DROPDOWN_MIN_TIME);\n  return true;\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport { dispatchFakeEvent } from './dispatch-events';\n\n/**\n * Focuses an input, sets its value and dispatches\n * the `input` event, simulating the user typing.\n * @param value Value to be set on the input.\n * @param element Element onto which to set the value.\n */\nexport function typeInElement(value: string, element: HTMLInputElement) {\n  element.focus();\n  element.value = value;\n  dispatchFakeEvent(element, 'input');\n}\n"]}