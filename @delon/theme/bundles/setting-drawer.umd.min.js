/**
 * @license ng-alain(cipchk@qq.com) v11.3.1
 * (c) 2020 cipchk https://ng-alain.com/
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/cdk/bidi"),require("@angular/common"),require("@delon/theme"),require("@delon/util/other"),require("ng-zorro-antd/message"),require("rxjs"),require("rxjs/operators"),require("@angular/forms"),require("ng-zorro-antd/alert"),require("ng-zorro-antd/button"),require("ng-zorro-antd/divider"),require("ng-zorro-antd/drawer"),require("ng-zorro-antd/icon"),require("ng-zorro-antd/input"),require("ng-zorro-antd/input-number"),require("ng-zorro-antd/switch"),require("ng-zorro-antd/tabs"),require("ng-zorro-antd/tooltip")):"function"==typeof define&&define.amd?define("@delon/theme/setting-drawer",["exports","@angular/core","@angular/cdk/bidi","@angular/common","@delon/theme","@delon/util/other","ng-zorro-antd/message","rxjs","rxjs/operators","@angular/forms","ng-zorro-antd/alert","ng-zorro-antd/button","ng-zorro-antd/divider","ng-zorro-antd/drawer","ng-zorro-antd/icon","ng-zorro-antd/input","ng-zorro-antd/input-number","ng-zorro-antd/switch","ng-zorro-antd/tabs","ng-zorro-antd/tooltip"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).delon=e.delon||{},e.delon.theme=e.delon.theme||{},e.delon.theme["setting-drawer"]={}),e.ng.core,e.ng.cdk.bidi,e.ng.common,e.delon.theme,e.other,e.message,e.rxjs,e.rxjs.operators,e.ng.forms,e.alert,e.button,e.divider,e.drawer,e.icon,e.input,e.inputNumber,e._switch,e.tabs,e.tooltip)}(this,(function(e,t,n,a,r,i,o,l,s,d,c,u,p,g,f,h,y,m,b,w){"use strict";var z=function(){function e(){this.i={},this.pxVal=0,this.format=function(e){return e+" px"}}return Object.defineProperty(e.prototype,"data",{set:function(e){this.i=e,"px"===e.type&&(this.pxVal=+e.value.replace("px",""))},enumerable:!1,configurable:!0}),e.prototype.pxChange=function(e){this.i.value=e+"px"},e}();z.decorators=[{type:t.Component,args:[{selector:"setting-drawer-item",template:'<span>\n  {{ i.label }}\n  <span class="pl-sm text-grey">{{ i.tip }}</span>\n</span>\n<div [ngSwitch]="i.type">\n  <ng-container *ngSwitchCase="\'color\'">\n    <input nz-input type="color" style="min-width: 88px" [(ngModel)]="i.value" [ngModelOptions]="{ standalone: true }" />\n  </ng-container>\n  <ng-container *ngSwitchCase="\'input\'">\n    <input nz-input style="min-width: 88px" [(ngModel)]="i.value" [ngModelOptions]="{ standalone: true }" />\n  </ng-container>\n  <ng-container *ngSwitchCase="\'px\'">\n    <nz-input-number\n      [(ngModel)]="pxVal"\n      (ngModelChange)="pxChange($event)"\n      [nzMin]="i.min"\n      [nzMax]="i.max"\n      [nzStep]="i.step || 2"\n      [nzFormatter]="format"\n    ></nz-input-number>\n  </ng-container>\n  <ng-container *ngSwitchCase="\'switch\'">\n    <nz-switch nzSize="small" [(ngModel)]="i.value" [ngModelOptions]="{ standalone: true }"></nz-switch>\n  </ng-container>\n  <ng-container *ngSwitchDefault>\n    <ng-template nzDrawerContent></ng-template>\n  </ng-container>\n</div>\n',host:{"[class.setting-drawer__body-item]":"true"}}]}],z.propDecorators={data:[{type:t.Input}]};function v(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{s(a.next(e))}catch(e){i(e)}}function l(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}s((a=a.apply(e,t||[])).next())}))}function x(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}Object.create;Object.create;var M="alain-default-vars",k=[{key:"dust",color:"#F5222D"},{key:"volcano",color:"#FA541C"},{key:"sunset",color:"#FAAD14"},{key:"cyan",color:"#13C2C2"},{key:"green",color:"#52C41A"},{key:"daybreak",color:"#1890ff"},{key:"geekblue",color:"#2F54EB"},{key:"purple",color:"#722ED1"},{key:"black",color:"#001529"}],C={"primary-color":{label:"主颜色",type:"color",default:"#1890ff"},"alain-default-header-hg":{label:"高",type:"px",default:"64px",max:300,min:24},"alain-default-header-bg":{label:"背景色",type:"color",default:"@primary-color",tip:"默认同主色系"},"alain-default-header-padding":{label:"顶部左右内边距",type:"px",default:"16px"},"alain-default-aside-wd":{label:"宽度",type:"px",default:"200px"},"alain-default-aside-bg":{label:"背景",type:"color",default:"#ffffff"},"alain-default-aside-collapsed-wd":{label:"收缩宽度",type:"px",default:"64px"},"alain-default-aside-nav-padding-top-bottom":{label:"项上下内边距",type:"px",default:"8px",step:8},"alain-default-aside-nav-fs":{label:"菜单字号",type:"px",default:"14px",min:14,max:30},"alain-default-aside-collapsed-nav-fs":{label:"收缩菜单字号",type:"px",default:"24px",min:24,max:32},"alain-default-aside-nav-item-height":{label:"菜单项高度",type:"px",default:"38px",min:24,max:64},"alain-default-aside-nav-text-color":{label:"菜单文本颜色",type:"color",default:"rgba(0, 0, 0, 0.65)",rgba:!0},"alain-default-aside-nav-text-hover-color":{label:"菜单文本悬停颜色",type:"color",default:"@primary-color",tip:"默认同主色系"},"alain-default-aside-nav-group-text-color":{label:"菜单分组文本颜色",type:"color",default:"rgba(0, 0, 0, 0.43)",rgba:!0},"alain-default-aside-nav-selected-text-color":{label:"菜单激活时文本颜色",type:"color",default:"@primary-color",tip:"默认同主色系"},"alain-default-aside-nav-selected-bg":{label:"菜单激活时背景颜色",type:"color",default:"#fcfcfc"},"alain-default-content-bg":{label:"背景色",type:"color",default:"#f5f7fa"},"alain-default-content-heading-bg":{label:"标题背景色",type:"color",default:"#fafbfc"},"alain-default-content-heading-border":{label:"标题底部边框色",type:"color",default:"#efe3e5"},"alain-default-content-padding":{label:"内边距",type:"px",default:"24px",min:0,max:128,step:8},"form-state-visual-feedback-enabled":{label:"开启表单元素的视觉反馈",type:"switch",default:!0},"preserve-white-spaces-enabled":{label:"开启 preserveWhitespaces",type:"switch",default:!0},"nz-table-img-radius":{label:"表格中：图片圆角",type:"px",default:"4px",min:0,max:128},"nz-table-img-margin-right":{label:"表格中：图片右外边距",type:"px",default:"4px",min:0,max:128},"nz-table-img-max-width":{label:"表格中：图片最大宽度",type:"px",default:"32px",min:8,max:128},"nz-table-img-max-height":{label:"表格中：图片最大高度",type:"px",default:"32px",min:8,max:128}},D=function(){function e(e,n,a,r,i,o,s){this.cdr=e,this.msg=n,this.settingSrv=a,this.lazy=r,this.zone=i,this.doc=o,this.directionality=s,this.autoApplyColor=!0,this.devTips="When the color can't be switched, you need to run it once: npm run color-less",this.loadedLess=!1,this.destroy$=new l.Subject,this.dir="ltr",this.isDev=t.isDevMode(),this.collapse=!1,this.data={},this.colors=k,this.color=this.cachedData["@primary-color"]||this.DEFAULT_PRIMARY,this.resetData(this.cachedData,!1)}return Object.defineProperty(e.prototype,"layout",{get:function(){return this.settingSrv.layout},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cachedData",{get:function(){return this.settingSrv.layout[M]||{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"DEFAULT_PRIMARY",{get:function(){return C["primary-color"].default},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e,t=this;this.dir=this.directionality.value,null===(e=this.directionality.change)||void 0===e||e.pipe(s.takeUntil(this.destroy$)).subscribe((function(e){t.dir=e})),this.autoApplyColor&&this.color!==this.DEFAULT_PRIMARY&&(this.changeColor(this.color),this.runLess())},e.prototype.loadLess=function(){return v(this,void 0,void 0,(function(){var e=this;return x(this,(function(t){return this.loadedLess?[2,Promise.resolve()]:[2,this.lazy.loadStyle("./assets/color.less","stylesheet/less").then((function(){var t=e.doc.createElement("script");t.innerHTML="\n          window.less = {\n            async: true,\n            env: 'production',\n            javascriptEnabled: true\n          };\n        ",e.doc.body.appendChild(t)})).then((function(){return e.lazy.loadScript("https://gw.alipayobjects.com/os/lib/less.js/3.8.1/less.min.js")})).then((function(){e.loadedLess=!0}))]}))}))},e.prototype.genVars=function(){var e,t=this,n=t.data,a=t.color,r=t.validKeys,i=((e={})["@primary-color"]=a,e);return r.filter((function(e){return"primary-color"!==e})).forEach((function(e){return i["@"+e]=n[e].value})),this.setLayout(M,i),i},e.prototype.runLess=function(){var e=this,t=this,n=t.zone,a=t.msg,r=t.cdr,i=a.loading("正在编译主题！",{nzDuration:0}).messageId;setTimeout((function(){n.runOutsideAngular((function(){e.loadLess().then((function(){window.less.modifyVars(e.genVars()).then((function(){a.success("成功"),a.remove(i),n.run((function(){return r.detectChanges()}))}))}))}))}),200)},e.prototype.toggle=function(){this.collapse=!this.collapse},e.prototype.changeColor=function(e){var t=this;this.color=e,Object.keys(C).filter((function(e){return"@primary-color"===C[e].default})).forEach((function(e){return delete t.cachedData["@"+e]})),this.resetData(this.cachedData,!1)},e.prototype.setLayout=function(e,t){this.settingSrv.setLayout(e,t)},e.prototype.resetData=function(e,t){var n=this;void 0===t&&(t=!0),e=e||{};var a=i.deepCopy(C);Object.keys(a).forEach((function(t){var r=e["@"+t]||a[t].default||"";a[t].value="@primary-color"===r?n.color:r})),this.data=a,t&&(this.cdr.detectChanges(),this.runLess())},Object.defineProperty(e.prototype,"validKeys",{get:function(){var e=this;return Object.keys(this.data).filter((function(t){return e.data[t].value!==e.data[t].default}))},enumerable:!1,configurable:!0}),e.prototype.apply=function(){this.runLess()},e.prototype.reset=function(){this.color=this.DEFAULT_PRIMARY,this.settingSrv.setLayout(M,{}),this.resetData({})},e.prototype.copyVar=function(){var e=this.genVars(),t=Object.keys(e).map((function(t){return t+": "+e[t]+";"})).join("\n");i.copy(t),this.msg.success("Copy success")},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e}();D.decorators=[{type:t.Component,args:[{selector:"setting-drawer",template:'<nz-drawer [nzVisible]="collapse" [nzPlacement]="dir === \'rtl\' ? \'left\' : \'right\'" [nzWidth]="500" (nzOnClose)="toggle()">\n  <div *nzDrawerContent class="setting-drawer__content">\n    <div class="setting-drawer__body setting-drawer__theme">\n      <h3 class="setting-drawer__title">主题色</h3>\n      <span\n        *ngFor="let c of colors"\n        [style]="{ \'background-color\': c.color }"\n        (click)="changeColor(c.color)"\n        nz-tooltip\n        [nzTooltipTitle]="c.key"\n        class="setting-drawer__theme-tag"\n      >\n        <i *ngIf="color === c.color" nz-icon nzType="check"></i>\n      </span>\n    </div>\n    <nz-divider></nz-divider>\n    <div class="setting-drawer__body">\n      <h3 class="setting-drawer__title">设置</h3>\n      <nz-tabset>\n        <nz-tab nzTitle="顶部">\n          <div class="setting-drawer__body">\n            <setting-drawer-item [data]="data[\'alain-default-header-hg\']"></setting-drawer-item>\n            <setting-drawer-item [data]="data[\'alain-default-header-bg\']"></setting-drawer-item>\n            <setting-drawer-item [data]="data[\'alain-default-header-padding\']"></setting-drawer-item>\n          </div>\n        </nz-tab>\n        <nz-tab nzTitle="侧边栏">\n          <setting-drawer-item [data]="data[\'alain-default-aside-wd\']"></setting-drawer-item>\n          <setting-drawer-item [data]="data[\'alain-default-aside-bg\']"></setting-drawer-item>\n          <setting-drawer-item [data]="data[\'alain-default-aside-collapsed-wd\']"></setting-drawer-item>\n          <setting-drawer-item [data]="data[\'alain-default-aside-nav-padding-top-bottom\']"></setting-drawer-item>\n        </nz-tab>\n        <nz-tab nzTitle="内容">\n          <setting-drawer-item [data]="data[\'alain-default-content-bg\']"></setting-drawer-item>\n          <setting-drawer-item [data]="data[\'alain-default-content-heading-bg\']"></setting-drawer-item>\n          <setting-drawer-item [data]="data[\'alain-default-content-heading-border\']"></setting-drawer-item>\n          <setting-drawer-item [data]="data[\'alain-default-content-padding\']"></setting-drawer-item>\n        </nz-tab>\n        <nz-tab nzTitle="其它">\n          <setting-drawer-item [data]="data[\'form-state-visual-feedback-enabled\']"></setting-drawer-item>\n          <setting-drawer-item [data]="data[\'preserve-white-spaces-enabled\']"></setting-drawer-item>\n          <setting-drawer-item [data]="data[\'nz-table-img-radius\']"></setting-drawer-item>\n          <setting-drawer-item [data]="data[\'nz-table-img-margin-right\']"></setting-drawer-item>\n          <setting-drawer-item [data]="data[\'nz-table-img-max-width\']"></setting-drawer-item>\n          <setting-drawer-item [data]="data[\'nz-table-img-max-height\']"></setting-drawer-item>\n        </nz-tab>\n      </nz-tabset>\n    </div>\n    <nz-divider></nz-divider>\n    <div class="setting-drawer__body">\n      <div class="setting-drawer__body-item">\n        固定头和侧边栏\n        <nz-switch nzSize="small" [(ngModel)]="layout.fixed" (ngModelChange)="setLayout(\'fixed\', layout.fixed)"></nz-switch>\n      </div>\n      <div class="setting-drawer__body-item">\n        色弱模式\n        <nz-switch nzSize="small" [(ngModel)]="layout.colorWeak" (ngModelChange)="setLayout(\'colorWeak\', layout.colorWeak)"></nz-switch>\n      </div>\n    </div>\n    <nz-divider></nz-divider>\n    <button (click)="apply()" type="button" nz-button nzType="primary">预览</button>\n    <button (click)="reset()" type="button" nz-button>重置</button>\n    <button (click)="copyVar()" type="button" nz-button>拷贝</button>\n    <nz-alert\n      class="mt-md"\n      nzType="warning"\n      nzMessage="配置栏只在开发环境用于预览，生产环境不会展现，请拷贝后手动修改参数配置文件 src/styles/theme.less"\n    ></nz-alert>\n  </div>\n</nz-drawer>\n<div\n  class="setting-drawer__handle"\n  [ngClass]="{ \'setting-drawer__handle-opened\': collapse }"\n  (click)="toggle()"\n  nz-tooltip\n  [nzTooltipTitle]="isDev ? devTips : null"\n>\n  <i nz-icon [nzType]="!collapse ? \'setting\' : \'close\'" class="setting-drawer__handle-icon"></i>\n</div>\n',host:{"[class.setting-drawer]":"true","[class.setting-drawer-rtl]":"dir === 'rtl'"},changeDetection:t.ChangeDetectionStrategy.OnPush}]}],D.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:o.NzMessageService},{type:r.SettingsService},{type:i.LazyService},{type:t.NgZone},{type:void 0,decorators:[{type:t.Inject,args:[a.DOCUMENT]}]},{type:n.Directionality,decorators:[{type:t.Optional}]}]},D.propDecorators={autoApplyColor:[{type:t.Input}],devTips:[{type:t.Input}]},function(e,t,n,a){var r,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(i<3?r(o):i>3?r(t,n,o):r(t,n))||o);i>3&&o&&Object.defineProperty(t,n,o)}([i.InputBoolean(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:type",Object)],D.prototype,"autoApplyColor",void 0);var _=[z,D],j=function(){};j.decorators=[{type:t.NgModule,args:[{imports:[a.CommonModule,d.FormsModule,g.NzDrawerModule,w.NzToolTipModule,p.NzDividerModule,b.NzTabsModule,m.NzSwitchModule,c.NzAlertModule,f.NzIconModule,h.NzInputModule,y.NzInputNumberModule,u.NzButtonModule],declarations:_,exports:_}]}],e.SettingDrawerComponent=D,e.SettingDrawerItemComponent=z,e.SettingDrawerModule=j,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=setting-drawer.umd.min.js.map